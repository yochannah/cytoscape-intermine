!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cymine=e()}}(function(){var e;return function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){t.exports=[{selector:"node",style:{content:"data(label)","border-width":"2px","background-color":"#dedede","border-style":"solid","border-color":"#999"}},{selector:":selected",style:{"text-outline-color":"black","background-color":"gold","border-color":"gold","border-width":"5px","border-style":"solid"}},{selector:"edge",style:{width:"2px"}},{selector:'edge[interactionType@^="genetic"]',style:{"line-color":"#2c79be"}},{selector:'edge[interactionType@^="physical"]',style:{"line-color":"#c00"}},{selector:".genetic",style:{"border-color":"#225f95"}},{selector:".physical",style:{"border-color":"#c00"}},{selector:".both",style:{"border-color":"#77304B"}}]},{}],2:[function(e,t,n){var r=e("underscore"),i=function(e){function t(e,o){var a,s={nodes:[],edges:[]};for(var u in e){var l,h=e[u];a=n(o,h),l=i(h,o),h.interactions?s=r.extend(s,t(h.interactions,l)):s.edges=s.edges.concat(c(o,l)),a||s.nodes.push(l)}return s}this.records=e;var n=function(e,t){var n,r;return n=e&&e.data.symbol&&t.participant2.symbol,n&&(r=t.participant2.symbol===e.data.symbol),n&&r},i=function(e,t){var n,r,i;return n=e.participant2?e.participant2:e,r=s(e),i=l(e),{classes:a(r),data:{title:n["class"]+" "+i,"interaction details":u(e.details,i,t),label:i,"class":n["class"],interactionTypes:r,symbol:n.symbol,id:n.primaryIdentifier}}},a=function(e){var t=r.uniq(e);return t.length>1&&t.push("both"),t.join(" ")},s=function(e){var t=[];if(e.details)for(var n=0;n<e.details.length;n++)t.indexOf(e.details[n].type)<0&&t.push(e.details[n].type);else t.push("master");return t},u=function(e,t,n){var r={};if(e)for(var i in e)e.hasOwnProperty(i)&&(r[e[i].name]=e[i],"unspecified"!==e[i].role1?(e[i].roles={},e[i].roles[e[i].role2]=t,e[i].roles[e[i].role1]=n.data.label):e[i].roles="unspecified");return r||{}},l=function(e){return e.participant2&&e.participant2.symbol?e.participant2.symbol:e.participant2&&e.participant2.primaryIdentifier?e.participant2.primaryIdentifier:e.symbol?e.symbol:e.details?e.details[0].name:e.primaryIdentifier?e.primaryIdentifier:"NAME MISSING"},c=function(e,t){for(var n=t.data.interactionTypes,r=[],i=0;i<n.length;i++)r.push({classes:n[i],data:{id:o(t,n[i])+"",title:"Interaction between "+e.data.label+" and "+t.data.label,source:e.data.id,target:t.data.id,interactionType:n[i]}});return r};return t(e)},o=function(e,t){return e.data.label+"_"+t};t.exports=i},{underscore:78}],3:[function(e,t,n){var r=(e("./../util"),e("./svDataFormatter")()),i=function(){var e=function(e,t){var i=r.format(e,t),o="text/"+e;n(i,"results-table."+e,o,!0)},t=function(e,t,n){var r;return e?(r="data:"+t+",",r+=encodeURIComponent(n)):r=n,r},n=function(e,n,r,i){var o=document.createElement("a"),a=t(i,r,e);if(r=r||"application/octet-stream",navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([e],{type:r}),n);if("download"in o)return o.href+=a,o.setAttribute("download",n),document.body.appendChild(o),setTimeout(function(){o.click(),document.body.removeChild(o)},66),!0;var s=document.createElement("iframe");return document.body.appendChild(s),s.src=a,setTimeout(function(){document.body.removeChild(s)},333),!0};return{sv:e,download:n,prepDownloadString:t}};t.exports=i},{"./../util":13,"./svDataFormatter":5}],4:[function(e,t,n){var r=e("./../util"),i=e("./exportHelpers")(),o=function(){var e,t,n={},o=function(){var n=function(){i.download(t.jpg(),"network.jpg")},r=function(){i.download(t.png(),"network.png")},o=function(){i.sv("csv",e)},a=function(){i.sv("tsv",e)};return{jpg:n,png:r,csv:o,tsv:a}},a=function(){var e=n;e.exportElem=e.parentElem.querySelector(".export"),e.formatChooser=e.exportElem.querySelector("select"),e.exportButton=e.exportElem.querySelector("button");var t=o();e.exportElem.addEventListener("click",function(){r.addClass(e.exportElem,"active")}),e.exportButton.addEventListener("click",function(){var n=u();try{t[n]()}catch(i){console.error("Invalid file format: '"+n+"'. ",i)}r.removeClass(e.exportElem,"active")})},s=function(r){n.parentElem=r.parentElem,e=r.rawData,t=r.cy,a()},u=function(){return n.formatChooser.value};return{init:s}};t.exports=o},{"./../util":13,"./exportHelpers":3}],5:[function(e,t,n){var r=function(){var e=function(e,t){var n=["Gene > Symbol","Gene > DB identifier","Gene > Interactions > Details > Type","Gene > Interactions > Gene 2 . Symbol","Gene > Interactions > Gene 2 > DB identifier","Gene > Interactions > Details > Data Sets > Data Source > Name"];return n.join(e)},t=function(e){var t,r,i=[];e=e[0];for(var o=0;o<e.interactions.length;o++)r=e.interactions[o],t=[e.symbol,e.primaryIdentifier,r.participant2.symbol,r.participant2.primaryIdentifier],i=i.concat(n(t,r.details));return i},n=function(e,t){for(var n,i=[],o=0;o<t.length;o++)detail=t[o],n=e.slice(0),n.splice(2,0,detail.type),i=i.concat(r(n,detail.dataSets));return i},r=function(e,t){for(var n,r=[],i=0;i<t.length;i++)ds=t[i],n=e.slice(0),n.push(ds.name),r.push(n);return r},i=function(n,r){var i={csv:",",tsv:"\t"},o=e(i[n],r)+"\n",a=t(r);return a.forEach(function(e,t){dataString=e.join(i[n]),o+=dataString+"\n"}),o};return{format:i}};t.exports=r},{}],6:[function(e,t,n){function r(e){function t(){if(!b.parentElem){var e=document.getElementById("cymine");if(!e)return console.error(u.dev.noParent.noDefault),!1;b.parentElem=e,console.info(u.dev.noParent.usingDefault)}return!0}function n(){if(b.service)return new a.Service({token:b.service.token,root:b.service.root,errorHandler:i});throw new y("noServiceUrl")}function r(){if(b.queryOn)return s.extend(l.where[0],b.queryOn),b.query=l,b.nodeType===u.CONST.PROTEIN&&v(),!0;throw new y("noQueryData")}function v(){b.query.where[0].path=u.CONST.LOOKUP_PROTEIN,"="===b.query.where[0].op&&(b.query.where[0].path+=".id"),b.query.where.length<=1&&b.query.where.push(c)}function g(){var e=new d(function(e,i){if(t()){if(m=new p(b),m.init(),mine=n(),r()&&mine){mine.records(l).then(function(t){var n=t.length,r=n?t[0].interactions.length:0,i=t.length>0&&r<=x,a=r>x;if(i){b.rawData=t,b.data=new o(t),b.cy=m.attachResults();try{w.init(b)}catch(s){console.error(s)}try{f.init(b)}catch(s){console.error(s)}console.debug("response:",t,"graphdata:",b),e(b)}else a?m.attachResults(u.user.tooManyResults):m.attachResults(u.user.noResults)})["catch"](function(e){console.error("Communication error: ",e),m.attachResults(u.user.pleaseClearCache),i()})}}else i("bad query")});return e}function y(e,t){var n=t?t:"noQueryData";m.init(u.user[n]),console.error(u.dev[e])}var m,b=s.extend({},e),w=h(),x=500,E=g();return E}function i(){throw new initError("badServiceUrl")}var o=e("./dataFormatter"),a=e("imjs"),s=(e("cytoscape"),e("underscore")),u=e("./strings"),l=e("./query/query"),c=e("./query/proteinPhysicalConstraint"),h=e("./exporter/exporter"),f=e("./showInTable")(),d=e("es6-promise").Promise,p=e("./ui");t.exports=r},{"./dataFormatter":2,"./exporter/exporter":4,"./query/proteinPhysicalConstraint":8,"./query/query":9,"./showInTable":10,"./strings":11,"./ui":12,cytoscape:21,"es6-promise":22,imjs:35,underscore:78}],7:[function(e,t,n){var r=["label","objectId","title","interactionTypes","class","role1","role2"];t.exports=r},{}],8:[function(e,t,n){t.exports={path:"interactions.details.type",op:"=",value:"physical",code:"B"}},{}],9:[function(e,t,n){t.exports={name:"Gene_Interactions",title:"Gene --> Interactions",description:"Show all interactions for a given gene.",constraintLogic:"A and B",from:"Gene",select:["primaryIdentifier","symbol","interactions.participant2.symbol","interactions.participant2.primaryIdentifier","interactions.details.name","interactions.details.role1","interactions.details.role2","interactions.details.type","interactions.details.dataSets.name"],orderBy:[{path:"symbol",direction:"ASC"}],where:[{path:"Gene",op:"LOOKUP",code:"A",editable:!0,switched:"LOCKED",switchable:!1}]}},{}],10:[function(e,t,n){var r=e("./util"),i=e("./strings").showTable,o=function(){var e,t,n={},o=function(n){setTimeout(function(){"undefined"!=typeof imtables&&(e=n,a(),t={query:e.query,service:{root:e.service.root}})},500)},a=function(){n.showTable=e.parentElem.querySelector(".showTable"),r.addClass(n.showTable,"enabled"),n.showTable.innerHTML=i.showInTableFormat,l()},s=function(){n.theTable=e.parentElem.querySelector(".tableView"),n.showTable.innerHTML=i.hideTableFormat,r.removeClass(n.theTable,"disabled"),r.hasClass(n.theTable,"firstRun")&&(imtables.loadTable(n.theTable,{start:0,size:25},{query:e.query,service:{root:e.service.root}}).then(function(e){console.log("Table loaded",e)},function(e){console.error("Could not load table",e)}),r.removeClass(n.theTable,"firstRun"))},u=function(){r.addClass(n.theTable,"disabled"),n.showTable.innerHTML=i.showInTableFormat},l=function(){n.showTable.addEventListener("click",function(){!n.theTable||r.hasClass(n.theTable,"disabled")?s():u()})};return{showTable:s,init:o}};t.exports=o},{"./strings":11,"./util":13}],11:[function(e,t,n){t.exports={user:{noResults:"No interaction results for this query",tooManyResults:"This graph is displayed when there are 500 or fewer interactions.",pleaseClearCache:"Error loading results. Please clear your cache and try again.",noQueryData:"Problem loading query results"},dev:{noParent:{usingDefault:"Cymine: No parent element specified for Cymine. Using default '#cymine",noDefault:"Cymine: No parent element specified, and default '#cymine' not available."},noQueryData:"Cymine: No queryOn values supplied!",noServiceUrl:"Cymine: No serviceUrl defined, unable to query for interactions.",badServiceUrl:"Cymine: bad serviceUrl. Please check for typos and check this host is up."},showTable:{showInTableFormat:"Show in table format",hideTableFormat:"Hide table"},CONST:{PROTEIN:"Protein",LOOKUP_PROTEIN:"proteins"}}},{}],12:[function(e,t,n){var r=e("./metaFields"),i=e("./util"),o=e("underscore"),a=e("cytoscape"),s=e("./cytoscapeStyle"),u=function(t){o.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},this.graph=t;var n,u={name:"cose"},l={cymineHtml:{html:e("./../template/cytomine.html"),type:"html"},InteractionDetail:{html:e("./../template/interaction.html"),type:"_"}},c=function(e){t.targetElem=t.parentElem.querySelector("nodeDetails"),h(e),f(e)},h=function(e){var n=t.parentElem.querySelector(".nodeTitle");n.innerHTML=e.title},f=function(e){try{var n=v(e),r=t.parentElem.querySelector(".nodeInfo");n.setAttribute("class","nodeInfo"),r.parentElement.replaceChild(n,r)}catch(i){console.error("Whoopsie",i)}},d=function(e){var t=l[e];return"html"===t.type?t.html:"_"===t.type?o.template(t.html):void 0},p=function(e){return l[e]&&!0},v=function(e){var t,n,o=document.createElement("dl");for(var a in e)r.indexOf(a)<0&&(t=document.createElement("dt"),t.appendChild(document.createTextNode(a)),n=document.createElement("dd"),i.addClass(n,"cym-"+a),"object"==typeof e[a]?e[a]&&p(e[a]["class"])?n.appendChild(g(e[a])):(i.addClass(n,"child"),n.appendChild(v(e[a]))):n.appendChild(document.createTextNode(e[a])),y([t,n],o));return o},g=function(e){var t=o.clone(e),n=d(e["class"]);l[e["class"]].additionalFunction&&(t=l[e["class"]].additionalFunction(t));var r=document.createElement("div");return r.innerHTML=n(t),r},y=function(e,t){for(var n=t.firstChild,r=0;r<e.length;r++)t.insertBefore(e[r],n)},m=function(e){return e?E(e):x(),n},b=function(){var e,r=function(){return t.parentElem.querySelector(".interactionFilter")},o=function(){return t.parentElem.querySelector(".reset")},a=function(t){var r=t.target;if(r!==t.currentTarget&&"button"===r.nodeName.toLowerCase()){c();var o=r.className;i.addClass(r,"selected"),e&&e.restore(),e=n.elements().filterFn(function(e){return"default"===o?!e:!e.hasClass(o)&&!e.hasClass("both")&&!e.hasClass("master")}).remove()}},s=function(){n.makeLayout(u).run(),r().querySelector(".default").click()},l=function(){r().addEventListener("click",a,!1),o().addEventListener("click",s,!1)},c=function(){for(var e=r().querySelectorAll("button"),t=0;t<e.length;t++)i.removeClass(e[t]," selected"),i.removeClass(e[t],"selected")};return{listen:l}},w=function(){t.parentElem.innerHTML=d("cymineHtml"),i.addClass(t.parentElem,"cymine"),t.statusBar=t.parentElem.querySelector(".status"),t.targetElem=t.parentElem.querySelector(".cy"),t.targetElem.style.width=t.parentElem.querySelector(".graph").clientWidth+"px",console.log("%cgraph.compact","color:seagreen;font-weight:bold;",t.compact,t)},x=function(){try{var e=b();e.listen(),n=a({container:t.targetElem,layout:u,elements:t.data,style:s,ready:function(){t.statusBar.remove()}})}catch(r){console.error(r)}n.on("tap","node",function(){c(this.data())}),n.on("tap","edge",function(){c(this.data())})},E=function(e){t.compact&&i.addClass(t.parentElem,"compact"),t.statusBar.className="status no-results",t.statusBar.innerHTML=e};return{init:w,attachResults:m,noResults:E}};t.exports=u},{"./../template/cytomine.html":83,"./../template/interaction.html":84,"./cytoscapeStyle":1,"./metaFields":7,"./util":13,cytoscape:21,underscore:78}],13:[function(e,t,n){var r={addClass:function(e,t){r.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(t,"")},hasClass:function(e,t){var n=e.className.split(" ");return n.indexOf(t)>=0}};t.exports=r},{}],14:[function(t,n,r){!function(){function t(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++l+"";return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,n){if(null!=e)if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var o in e)this.has(e,o)&&t.call(n,e[o],o,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,o=this,a=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=t();i={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=c.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,s,u,l,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(a=e?[e]:c.keys(this._events),s=0,u=a.length;s<u;s++)if(e=a[s],o=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,h=o.length;l<h;l++)i=o[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var o in r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}};var h=/\s+/,f=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(h.test(n)){for(var o=n.split(h),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(e,t){i[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=c.uniqueId("l"));return i[o]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.BackboneEvents=i):"function"==typeof e&&"object"==typeof e.amd?e(function(){return i}):o.BackboneEvents=i}(this)},{}],15:[function(e,t,n){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":14}],16:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new f(o(e,i,a)),u=0,l=a>0?i-4:i,c=0;c<l;c+=4)t=h[e.charCodeAt(c)]<<18|h[e.charCodeAt(c+1)]<<12|h[e.charCodeAt(c+2)]<<6|h[e.charCodeAt(c+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=h[e.charCodeAt(c)]<<2|h[e.charCodeAt(c+1)]>>4,s[u++]=255&t),1===a&&(t=h[e.charCodeAt(c)]<<10|h[e.charCodeAt(c+1)]<<4|h[e.charCodeAt(c+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(u(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}n.byteLength=i,n.toByteArray=a,n.fromByteArray=l;for(var c=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,v=d.length;p<v;++p)c[p]=d[p],h[d.charCodeAt(p)]=p;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],17:[function(e,t,n){},{}],18:[function(e,t,n){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}function i(e){if(e>Z)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return c(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);var i=d(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}function l(e){return s(e),i(e<0?0:0|p(e))}function c(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=i(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}function h(e){for(var t=e.length<0?0:0|p(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=o.prototype,r}function d(e){if(o.isBuffer(e)){var t=0|p(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}return void 0!==e.length?"number"!=typeof e.length||W(e.length)?i(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}function p(e){if(e>=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(i)return r?-1:z(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,W(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t=255&t,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(e,l)===o(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(e,l+f)!==o(t,f)){h=!1;break}if(h)return l}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(W(s))return a;e[n+a]=s}return a}function E(e,t,n,r){return H(z(t,e.length-n),e,n,r)}function _(e,t,n,r){return H(V(t),e,n,r)}function S(e,t,n,r){return _(e,t,n,r)}function T(e,t,n,r){return H(X(t),e,n,r)}function k(e,t,n,r){return H(U(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return A(r)}function A(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function q(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function U(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(e){return G.toByteArray(q(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!==e}var G=e("base64-js"),K=e("ieee754");n.Buffer=o,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;var Z=2147483647;n.kMaxLength=Z,o.TYPED_ARRAY_SUPPORT=r(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return u(e,t,n)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&e._isBuffer===!0&&e!==o.prototype},o.compare=function(e,t){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(Y(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),
e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:o.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var Q=/[^+\/0-9A-Za-z-_]/g},{"base64-js":16,ieee754:26}],19:[function(e,t,n){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],20:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function h(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function d(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=l,n.isRegExp=c,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=v,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":46}],21:[function(e,t,n){(function(n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return c(e)||h(e,t)||f()}function c(e){if(Array.isArray(e))return e}function h(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t,n,r,i,o){var a;return a=xe(e)?e:Br[e]||Br.euclidean,0===t&&xe(e)?a(i,o):a(t,n,r,i,o)}function p(e,t,n,r){for(var i=[],o=new Xt,a=e.cy(),s=a.hasCompoundNodes(),u=0;u<e.length;u++){var l=e[u];n?i.push(l):s&&r(i,o,l)}for(;i.length>0;){var c=i.shift();t(c),o.add(c.id()),s&&r(i,o,c)}return e}function v(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];t.has(o.id())||e.push(o)}}function g(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function y(e,t,n){g(e,t,n),v(e,t,n)}function m(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!t&&s.isLoop()||(r+=e(i,s))}return r}}}function b(e,t){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}function w(){return!1}function x(){return!0}function E(e,t){for(var n=0;n<sa.length;n++){var r=sa[n];this[r]=e[r]||aa[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}function _(e,t,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[e])?r:r=o[e]=t(n)}function S(e,t){return e=gt(e),function(n){return _(e,t,n)}}function T(e,t){e=gt(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return _(e,n,t)}}function k(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!t(o))return!1}return!0}function C(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],o=e.hasCompoundNodes();if(i){var a=i._private;if(!t(i))return!1;if(i.isNode())return!o||k(i,r);var s=a.source,u=a.target;return n(s)&&(!o||k(s,n))&&(s===u||n(u)&&(!o||k(u,n)))}}}function P(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length){var o=t[0];this.on(e.event,o)}else if(0===t.length){for(var a=0;a<this.length;a++){var s=this[a],u=!e.ableField||s._private[e.ableField],l=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(u=c,!c))return this}u&&(s._private[e.field]=e.value,l&&n.push(s))}var h=this.spawn(n);h.updateStyle(),h.emit(e.event)}return this}}function A(e){Pa[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},Pa[e.on]=P({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Pa[e.off]=P({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}function O(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[e.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(t)}}function D(e){return function(t){var n=[],r=this._private.cy,i=e||{};we(t)&&(t=r.$(t));for(var o=0;o<t.length;o++)for(var a=t[o]._private.edges,s=0;s<a.length;s++){var u=a[s],l=u._private.data,c=this.hasElementWithId(l.source)&&t.hasElementWithId(l.target),h=t.hasElementWithId(l.source)&&this.hasElementWithId(l.target),f=c||h;if(f){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(u)}}return this.spawn(n,{unique:!0})}}function N(e){var t={codirected:!1};return e=Je({},t,e),function(t){for(var n=[],r=this.edges(),i=e,o=0;o<r.length;o++)for(var a=r[o],s=a._private,u=s.source,l=u._private.data.id,c=s.data.target,h=u._private.edges,f=0;f<h.length;f++){var d=h[f],p=d._private.data,v=p.target,g=p.source,y=v===c&&g===l,m=l===v&&c===g;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(t)}}function M(e,t,n,r){function i(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function a(e){return 3*e}function s(e,t,n){return((i(t,n)*e+o(t,n))*e+a(t))*e}function u(e,t,n){return 3*i(t,n)*e*e+2*o(t,n)*e+a(t)}function l(t,r){for(var i=0;i<p;++i){var o=u(r,e,n);if(0===o)return r;var a=s(r,e,n)-t;r-=a/o}return r}function c(){for(var t=0;t<m;++t)E[t]=s(t*b,e,n)}function h(t,r,i){var o,a,u=0;do a=r+(i-r)/2,o=s(a,e,n)-t,o>0?i=a:r=a;while(Math.abs(o)>g&&++u<y);return a}function f(t){for(var r=0,i=1,o=m-1;i!==o&&E[i]<=t;++i)r+=b;--i;var a=(t-E[i])/(E[i+1]-E[i]),s=r+a*b,c=u(s,e,n);return c>=v?l(t,s):0===c?s:h(t,r,r+b)}function d(){_=!0,e===t&&n===r||c()}var p=4,v=.001,g=1e-7,y=10,m=11,b=1/(m-1),w="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var x=0;x<4;++x)if("number"!=typeof arguments[x]||isNaN(arguments[x])||!isFinite(arguments[x]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var E=w?new Float32Array(m):new Array(m),_=!1,S=function(i){return _||d(),e===t&&n===r?i:0===i?0:1===i?1:s(f(i),t,r)};S.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var T="generateBezier("+[e,t,n,r]+")";return S.toString=function(){return T},S}function I(e,t,n,r,i){if(1===r)return n;var o=i(t,n,r);return null==e?o:((e.roundValue||e.color)&&(o=Math.round(o)),void 0!==e.min&&(o=Math.max(o,e.min)),void 0!==e.max&&(o=Math.min(o,e.max)),o)}function L(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function R(e,t,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=L(e,i),s=L(t,i);if(Te(a)&&Te(s))return I(o,a,s,n,r);if(Ee(a)&&Ee(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],h=s[l];if(null!=c&&null!=h){var f=I(o,c,h,n,r);u.push(f)}else u.push(h)}return u}}function B(e,t,n,r){var i=!r,o=e._private,a=t._private,s=a.easing,u=a.startTime,l=r?e:e.cy(),c=l.style();if(!a.easingImpl)if(null==s)a.easingImpl=qa.linear;else{var h;if(we(s)){var f=c.parse("transition-timing-function",s);h=f.value}else h=s;var d,p;we(h)?(d=h,p=[]):(d=h[1],p=h.slice(2).map(function(e){return+e})),p.length>0?("spring"===d&&p.push(a.duration),a.easingImpl=qa[d].apply(null,p)):a.easingImpl=qa[d]}var v,g=a.easingImpl;if(v=0===a.duration?1:(n-u)/a.duration,a.applying&&(v=a.progress),v<0?v=0:v>1&&(v=1),null==a.delay){var y=a.startPosition,m=a.position;if(m&&i&&!e.locked()){var b={};j(y.x,m.x)&&(b.x=R(y.x,m.x,v,g)),j(y.y,m.y)&&(b.y=R(y.y,m.y,v,g)),e.position(b)}var w=a.startPan,x=a.pan,E=o.pan,_=null!=x&&r;_&&(j(w.x,x.x)&&(E.x=R(w.x,x.x,v,g)),j(w.y,x.y)&&(E.y=R(w.y,x.y,v,g)),e.emit("pan"));var S=a.startZoom,T=a.zoom,k=null!=T&&r;k&&(j(S,T)&&(o.zoom=R(S,T,v,g)),e.emit("zoom")),(_||k)&&e.emit("viewport");var C=a.style;if(C&&C.length>0&&i){for(var P=0;P<C.length;P++){var A=C[P],O=A.name,D=A,N=a.startStyle[O],M=c.properties[N.name],I=R(N,D,v,g,M);c.overrideBypass(e,O,I)}e.emit("style")}}return a.progress=v,v}function j(e,t){return null!=e&&null!=t&&(!(!Te(e)||!Te(t))||!(!e||!t))}function q(e,t,n,r){var i=!r,o=e,a=t._private,s=r?e:e.cy(),u=s.style();if(i){var l=o.position();a.startPosition=a.startPosition||{x:l.x,y:l.y},a.startStyle=a.startStyle||u.getAnimationStartStyle(o,a.style)}if(r){var c=s._private.pan;a.startPan=a.startPan||{x:c.x,y:c.y},a.startZoom=null!=a.startZoom?a.startZoom:s._private.zoom}a.started=!0,a.startTime=n-a.progress*a.duration}function F(e,t){function n(t,n){var r=t._private,o=r.animation.current,a=r.animation.queue,s=!1;if(!n&&"none"===t.pstyle("display").value){o=o.splice(0,o.length).concat(a.splice(0,a.length));for(var u=0;u<o.length;u++)o[u].stop()}if(0===o.length){var l=a.shift();l&&o.push(l)}for(var c=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n()}e.splice(0,e.length)},h=o.length-1;h>=0;h--){var f=o[h],d=f._private;d.stopped?(o.splice(h,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||q(t,f,e,n),B(t,f,e,n),d.applying&&(d.applying=!1),c(d.frames),null!=d.step&&d.step(e),f.completed()&&(o.splice(h,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.completes)),s=!0)}return n||0!==o.length||0!==a.length||i.push(t),s}for(var r=t._private.aniEles,i=[],o=!1,a=0;a<r.length;a++){var s=r[a],u=n(s);o=o||u}var l=n(t,!0);(o||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(i),t.emit("step")}function z(e){this.options=Je({},fs,e)}function V(e){this.options=Je({},vs,e)}function U(e){this.options=Je({},gs,e)}function X(e){this.options=Je({},ms,e),this.options.layout=this}function H(e){this.options=Je({},Ts,e)}function Y(e){this.options=Je({},ks,e)}function W(e){this.options=Je({},Cs,e)}function G(e){this.options=Je({},Ps,e)}function K(e){this.options=e,this.notifications=0}function Z(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}function $(e,t,n){for(var r=function(e,t,n,r){return En(e,t,n,r)},i=t._private,o=i.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var s=e.bezierProjPcts[a];o.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function J(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];0===i&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function ee(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}var a=n,s=n[0];e.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()}function te(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}function ne(e,t,n,r,i,o){var o=o||5;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill()}function re(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:t})}function ie(e){var t=e.indexOf(",");return e.substr(t+1)}function oe(e,t,n){var r=t.toDataURL(n,e.quality);switch(e.output){case"blob":return re(ie(r),n);case"base64":return ie(r);case"base64uri":default:return r}}function ae(e){var t=this;t.data={canvases:new Array(dl.CANVAS_LAYERS),contexts:new Array(dl.CANVAS_LAYERS),canvasNeedsRedraw:new Array(dl.CANVAS_LAYERS),bufferCanvases:new Array(dl.BUFFER_COUNT),bufferContexts:new Array(dl.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";t.data.canvasContainer=document.createElement("div");var r=t.data.canvasContainer.style;t.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),(i.getAttribute("style")||"").indexOf(n)<0&&i.setAttribute("style",(i.getAttribute("style")||"")+n);for(var o=0;o<dl.CANVAS_LAYERS;o++){var a=t.data.canvases[o]=document.createElement("canvas");t.data.contexts[o]=a.getContext("2d"),a.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(je()?" -ms-touch-action: none; touch-action: none; ":"")),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(dl.CANVAS_LAYERS-o),t.data.canvasContainer.appendChild(a),t.data.canvasNeedsRedraw[o]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[dl.NODE].setAttribute("data-id","layer"+dl.NODE+"-node"),t.data.canvases[dl.SELECT_BOX].setAttribute("data-id","layer"+dl.SELECT_BOX+"-selectbox"),t.data.canvases[dl.DRAG].setAttribute("data-id","layer"+dl.DRAG+"-drag");for(var o=0;o<dl.BUFFER_COUNT;o++)t.data.bufferCanvases[o]=document.createElement("canvas"),t.data.bufferContexts[o]=t.data.bufferCanvases[o].getContext("2d"),t.data.bufferCanvases[o].style.position="absolute",t.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),t.data.bufferCanvases[o].style.zIndex=String(-o-1),t.data.bufferCanvases[o].style.visibility="hidden";t.pathsEnabled=!0;var s=kn(),u=function(e){return e[0]._private.nodeKey},l=function(e,n,r,i,o){return t.drawElement(e,n,r,!1,!1,o)},c=function(e){return e.boundingBox(),e[0]._private.bodyBounds},h=function(e){var t=e[0]._private,n=t.oldBackgroundTimestamp===t.backgroundTimestamp;return!n},f=function(e){return e[0]._private.labelStyleKey},d=function(e){return e[0]._private.sourceLabelStyleKey},p=function(e){return e[0]._private.targetLabelStyleKey},v=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"main",o)},g=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"source",o)},y=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"target",o)},m=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||s},b=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||s},w=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||s},x=function(e,t){return t},E=t.data.eleTxrCache=new Su(t,{getKey:u,doesEleInvalidateKey:h,drawElement:l,getBoundingBox:c,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),_=t.data.lblTxrCache=new Su(t,{getKey:f,drawElement:v,getBoundingBox:m,isVisible:x}),S=t.data.slbTxrCache=new Su(t,{getKey:d,drawElement:g,getBoundingBox:b,isVisible:x}),T=t.data.tlbTxrCache=new Su(t,{getKey:p,drawElement:y,getBoundingBox:w,isVisible:x}),k=t.data.lyrTxrCache=new Fu(t);t.onUpdateEleCalcs(function(e,t){E.invalidateElements(t),_.invalidateElements(t),S.invalidateElements(t),T.invalidateElements(t),k.invalidateElements(t);for(var n=0;n<t.length;n++){var r=t[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var C=function(e){for(var t=0;t<e.length;t++)k.enqueueElementRefinement(e[t].ele)};E.onDequeue(C),_.onDequeue(C),S.onDequeue(C),T.onDequeue(C)}function se(e,t,n){var r=n,i=function(n){kt("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(cs.prototype[t])return i(t);cs.prototype[t]=n}else if("collection"===e){if(Ia.prototype[t])return i(t);Ia.prototype[t]=n}else if("layout"===e){for(var o=function(e){this.options=e,n.call(this,e),_e(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},f={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};Je(a,{createEmitter:function(){return this._private.emitter=new E(f,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),Ri.eventAliasesOn(a),r=o}else if("renderer"===e&&"null"!==t&&"base"!==t){var d=ue("renderer","base"),p=d.prototype,v=n,g=n.prototype,y=function(){d.apply(this,arguments),v.apply(this,arguments)},m=y.prototype;for(var b in p){var w=p[b],x=null!=g[b];if(x)return i(b);m[b]=w}for(var _ in g)m[_]=g[_];p.clientFunctions.forEach(function(e){m[e]=m[e]||function(){kt("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=y}return at({map:yl,keys:[e,t],value:r})}function ue(e,t){return st({map:yl,keys:[e,t]})}function le(e,t,n,r,i){return at({map:ml,keys:[e,t,n,r],value:i})}function ce(e,t,n,r){return st({map:ml,keys:[e,t,n,r]})}var he=r(e("lodash.debounce")),fe=r(e("heap")),de="undefined"==typeof window?null:window,pe=de?de.navigator:null,ve=(de?de.document:null,i("")),ge=i({}),ye=i(function(){}),me="undefined"==typeof HTMLElement?"undefined":i(HTMLElement),be=function(e){return e&&e.instanceString&&xe(e.instanceString)?e.instanceString():null},we=function(e){return null!=e&&i(e)==ve},xe=function(e){return null!=e&&i(e)===ye},Ee=function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},_e=function(e){return null!=e&&i(e)===ge&&!Ee(e)&&e.constructor===Object},Se=function(e){return null!=e&&i(e)===ge},Te=function(e){return null!=e&&i(e)===i(1)&&!isNaN(e)},ke=function(e){return Te(e)&&Math.floor(e)===e},Ce=function(e){return"undefined"===me?void 0:null!=e&&e instanceof HTMLElement},Pe=function(e){return Ae(e)||Oe(e)},Ae=function(e){return"collection"===be(e)&&e._private.single},Oe=function(e){return"collection"===be(e)&&!e._private.single},De=function(e){return"core"===be(e)},Ne=function(e){return"stylesheet"===be(e)},Me=function(e){return"event"===be(e)},Ie=function(e){return void 0===e||null===e||!(""!==e&&!e.match(/^\s+$/))},Le=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},Re=function(e){return _e(e)&&Te(e.x1)&&Te(e.x2)&&Te(e.y1)&&Te(e.y2)},Be=function(e){return Se(e)&&xe(e.then)},je=function(){return pe&&pe.userAgent.match(/msie|trident|edge/i)},qe=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function r(){var n,i=this,o=arguments,a=t.apply(i,o),s=r.cache;return(n=s[a])||(n=s[a]=e.apply(i,o)),n};return n.cache={},n},Fe=qe(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),ze=qe(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Ve=qe(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Ue=function(e){return Ie(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Xe="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",He="rgb[a]?\\(("+Xe+"[%]?)\\s*,\\s*("+Xe+"[%]?)\\s*,\\s*("+Xe+"[%]?)(?:\\s*,\\s*("+Xe+"))?\\)",Ye="rgb[a]?\\((?:"+Xe+"[%]?)\\s*,\\s*(?:"+Xe+"[%]?)\\s*,\\s*(?:"+Xe+"[%]?)(?:\\s*,\\s*(?:"+Xe+"))?\\)",We="hsl[a]?\\(("+Xe+")\\s*,\\s*("+Xe+"[%])\\s*,\\s*("+Xe+"[%])(?:\\s*,\\s*("+Xe+"))?\\)",Ge="hsl[a]?\\((?:"+Xe+")\\s*,\\s*(?:"+Xe+"[%])\\s*,\\s*(?:"+Xe+"[%])(?:\\s*,\\s*(?:"+Xe+"))?\\)",Ke="\\#[0-9a-fA-F]{3}",Ze="\\#[0-9a-fA-F]{6}",$e=function(e,t){return e<t?-1:e>t?1:0},Qe=function(e,t){return-1*$e(e,t)},Je=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];e[a]=r[a]}}return e},et=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=4===e.length,o=16;return i?(t=parseInt(e[1]+e[1],o),n=parseInt(e[2]+e[2],o),r=parseInt(e[3]+e[3],o)):(t=parseInt(e[1]+e[2],o),n=parseInt(e[3]+e[4],o),r=parseInt(e[5]+e[6],o)),[t,n,r]}},tt=function(e){function t(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n,r,i,o,a,s,u,l,c=new RegExp("^"+We+"$").exec(e);if(c){if(r=parseInt(c[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,i=parseFloat(c[2]),i<0||i>100)return;if(i/=100,o=parseFloat(c[3]),o<0||o>100)return;if(o/=100,a=c[4],void 0!==a&&(a=parseFloat(a),a<0||a>1))return;if(0===i)s=u=l=Math.round(255*o);else{var h=o<.5?o*(1+i):o+i-o*i,f=2*o-h;s=Math.round(255*t(f,h,r+1/3)),u=Math.round(255*t(f,h,r)),l=Math.round(255*t(f,h,r-1/3))}n=[s,u,l,a]}return n},nt=function(e){var t,n=new RegExp("^"+He+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},rt=function(e){return ot[e.toLowerCase()]},it=function(e){return(Ee(e)?e:null)||rt(e)||et(e)||nt(e)||tt(e)},ot={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],
ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},at=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_e(o))throw Error("Tried to set map with object key");i<n.length-1?(null==t[o]&&(t[o]={}),t=t[o]):t[o]=e.value}},st=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(_e(o))throw Error("Tried to get map with object key");if(t=t[o],null==t)return t}return t},ut=de?de.performance:null,lt=ut&&ut.now?function(){return ut.now()}:function(){return Date.now()},ct=function(){if(de){if(de.requestAnimationFrame)return function(e){de.requestAnimationFrame(e)};if(de.mozRequestAnimationFrame)return function(e){de.mozRequestAnimationFrame(e)};if(de.webkitRequestAnimationFrame)return function(e){de.webkitRequestAnimationFrame(e)};if(de.msRequestAnimationFrame)return function(e){de.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(lt())},1e3/60)}}(),ht=function(e){return ct(e)},ft=lt,dt=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381,r=n;t=e.next(),!t.done;)r=33*r^t.value;return r>>>0},pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(33*t^e)>>>0},vt=function(e,t){var n={value:0,done:!1},r=0,i=e.length,o={next:function(){return r<i?n.value=e[r++]:n.done=!0,n}};return dt(o,t)},gt=function(e,t){var n={value:0,done:!1},r=0,i=e.length,o={next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}};return dt(o,t)},yt=function(){return mt(arguments)},mt=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?gt(r):gt(r,t)}return t},bt=null!=console.warn,wt=null!=console.trace,xt=Number.MAX_SAFE_INTEGER||9007199254740991,Et=function(){return!0},_t=function(){return!1},St=function(){return 0},Tt=function(){},kt=function(e){throw new Error(e)},Ct=function(e){bt?console.warn(e):(console.log(e),wt&&console.trace())},Pt=function(e){return Je({},e)},At=function(e){return null==e?e:Ee(e)?e.slice():_e(e)?Pt(e):e},Ot=function(e){return e.slice()},Dt=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},Nt={},Mt=function(){return Nt},It=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var o=t[i],a=null==n?void 0:n[o];r[o]=void 0===a?e[o]:a}return r}},Lt=function(e,t,n){for(var r=e.length;r>=0&&(e[r]!==t||(e.splice(r,1),n));r--);},Rt=function(e){e.splice(0,e.length)},Bt=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},jt=function(e,t,n){return n&&(t=Ve(n,t)),e[t]},qt=function(e,t,n,r){n&&(t=Ve(n,t)),e[t]=r},Ft=function(){function e(){o(this,e),this._obj={}}return s(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),zt="undefined"!=typeof Map?Map:Ft,Vt="undefined",Ut=function(){function e(t){if(o(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}}return s(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),Xt=("undefined"==typeof Set?"undefined":i(Set))!==Vt?Set:Ut,Ht=function(e,t,n){if(n=!(void 0!==n&&!n),void 0===e||void 0===t||!De(e))return void kt("An element must have a core reference and parameters set");var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==r&&"edges"!==r)return void kt("An element must be of type `nodes` or `edges`; you specified `"+r+"`");this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,active:!1,classes:new Xt,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,a=e.pan(),s=e.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var u=[];Ee(t.classes)?u=t.classes:we(t.classes)&&(u=t.classes.split(/\s+/));for(var l=0,c=u.length;l<c;l++){var h=u[l];h&&""!==h&&i.classes.add(h)}var f=t.style||t.css;f&&(Ct("Setting a `style` bypass at element creation is deprecated"),e.style().applyBypass(this,f)),this.createEmitter(),(void 0===n||n)&&this.restore()},Yt=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var i;_e(t)&&!Pe(t)&&(i=t,t=i.roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||xe(n)?r:n,n=xe(n)?n:function(){};for(var o,a=this._private.cy,s=t=we(t)?this.filter(t):t,u=[],l=[],c={},h={},f={},d=0,p=this.byGroup(),v=p.nodes,g=p.edges,y=0;y<s.length;y++){var m=s[y],b=m.id();m.isNode()&&(u.unshift(m),e.bfs&&(f[b]=!0,l.push(m)),h[b]=0)}var w=function(){var t=e.bfs?u.shift():u.pop(),i=t.id();if(e.dfs){if(f[i])return"continue";f[i]=!0,l.push(t)}var a=h[i],s=c[i],p=null!=s?s.source():null,y=null!=s?s.target():null,m=null==s?void 0:t.same(p)?y[0]:p[0],b=void 0;if(b=n(t,s,m,d++,a),b===!0)return o=t,"break";if(b===!1)return"break";for(var w=t.connectedEdges().filter(function(e){return(!r||e.source().same(t))&&g.has(e)}),x=0;x<w.length;x++){var E=w[x],_=E.connectedNodes().filter(function(e){return!e.same(t)&&v.has(e)}),S=_.id();0===_.length||f[S]||(_=_[0],u.push(_),e.bfs&&(f[S]=!0,l.push(_)),c[S]=E,h[S]=h[i]+1)}};e:for(;0!==u.length;){var x=w();switch(x){case"continue":continue;case"break":break e}}for(var E=a.collection(),_=0;_<l.length;_++){var S=l[_],T=c[S.id()];null!=T&&E.merge(T),E.merge(S)}return{path:a.collection(E),found:a.collection(o)}}},Wt={breadthFirstSearch:Yt({bfs:!0}),depthFirstSearch:Yt({dfs:!0})};Wt.bfs=Wt.breadthFirstSearch,Wt.dfs=Wt.depthFirstSearch;var Gt=It({root:null,weight:function(e){return 1},directed:!1}),Kt={dijkstra:function(e){if(!_e(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Gt(e),r=n.root,i=n.weight,o=n.directed,a=this,s=i,u=we(r)?this.filter(r)[0]:r[0],l={},c={},h={},f=this.byGroup(),d=f.nodes,p=f.edges;p.unmergeBy(function(e){return e.isLoop()});for(var v=function(e){return l[e.id()]},g=function(e,t){l[e.id()]=t,y.updateItem(e)},y=new fe(function(e,t){return v(e)-v(t)}),m=0;m<d.length;m++){var b=d[m];l[b.id()]=b.same(u)?0:1/0,y.push(b)}for(var w=function(e,t){for(var n,r=(o?e.edgesTo(t):e.edgesWith(t)).intersect(p),i=1/0,a=0;a<r.length;a++){var u=r[a],l=s(u);(l<i||!n)&&(i=l,n=u)}return{edge:n,dist:i}};y.size()>0;){var x=y.pop(),E=v(x),_=x.id();if(h[_]=E,E!==1/0)for(var S=x.neighborhood().intersect(d),T=0;T<S.length;T++){var k=S[T],C=k.id(),P=w(x,k),A=E+P.dist;A<v(k)&&(g(k,A),c[C]={node:x,edge:P.edge})}}return{distanceTo:function(e){var t=we(e)?d.filter(e)[0]:e[0];return h[t.id()]},pathTo:function(e){var t=we(e)?d.filter(e)[0]:e[0],n=[],r=t,i=r.id();if(t.length>0)for(n.unshift(t);c[i];){var o=c[i];n.unshift(o.edge),n.unshift(o.node),r=o.node,i=r.id()}return a.spawn(n)}}}},Zt={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,o=new Array(i),a=n,s=function(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.has(e))return t}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var l=r.sort(function(t,n){return e(t)-e(n)}),c=0;c<l.length;c++){var h=l[c],f=h.source()[0],d=h.target()[0],p=s(f),v=s(d),g=o[p],y=o[v];p!==v&&(a.merge(h),g.merge(y),o.splice(v,1))}return a}},$t=It({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Qt={aStar:function(e){var t=this.cy(),n=$t(e),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=t.collection(r)[0],i=t.collection(i)[0];var u,l,c=r.id(),h=i.id(),f={},d={},p={},v=new fe(function(e,t){return d[e.id()]-d[t.id()]}),g=new Xt,y={},m={},b=function(e,t){v.push(e),g.add(t)},w=function(){u=v.pop(),l=u.id(),g["delete"](l)},x=function(e){return g.has(e)};b(r,c),f[c]=0,d[c]=o(r);for(var E=0;v.size()>0;){if(w(),E++,l===h){for(var _=[],S=i,T=h,k=m[T];_.unshift(S),null!=k&&_.unshift(k),S=y[T],null!=S;)T=S.id(),k=m[T];return{found:!0,distance:f[l],path:this.spawn(_),steps:E}}p[l]=!0;for(var C=u._private.edges,P=0;P<C.length;P++){var A=C[P];if(this.hasElementWithId(A.id())&&(!a||A.data("source")===l)){var O=A.source(),D=A.target(),N=O.id()!==l?O:D,M=N.id();if(this.hasElementWithId(M)&&!p[M]){var I=f[l]+s(A);x(M)?I<f[M]&&(f[M]=I,d[M]=I+o(N),y[M]=u):(f[M]=I,d[M]=I+o(N),b(N,M),y[M]=u,m[M]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},Jt=It({weight:function(e){return 1},directed:!1}),en={floydWarshall:function(e){for(var t=this.cy(),n=Jt(e),r=n.weight,i=n.directed,o=r,a=this.byGroup(),s=a.nodes,u=a.edges,l=s.length,c=l*l,h=function(e){return s.indexOf(e)},f=function(e){return s[e]},d=new Array(c),p=0;p<c;p++){var v=p%l,g=(p-v)/l;g===v?d[p]=0:d[p]=1/0}for(var y=new Array(c),m=new Array(c),b=0;b<u.length;b++){var w=u[b],x=w.source()[0],E=w.target()[0];if(x!==E){var _=h(x),S=h(E),T=_*l+S,k=o(w);if(d[T]>k&&(d[T]=k,y[T]=S,m[T]=w),!i){var C=S*l+_;!i&&d[C]>k&&(d[C]=k,y[C]=_,m[C]=w)}}}for(var P=0;P<l;P++)for(var A=0;A<l;A++)for(var O=A*l+P,D=0;D<l;D++){var N=A*l+D,M=P*l+D;d[O]+d[M]<d[N]&&(d[N]=d[O]+d[M],y[N]=y[O])}var I=function(e){return(we(e)?t.filter(e):e)[0]},L=function(e){return h(I(e))},R={distance:function(e,t){var n=L(e),r=L(t);return d[n*l+r]},path:function B(e,n){var r=L(e),i=L(n),o=f(r);if(r===i)return o.collection();if(null==y[r*l+i])return t.collection();var a,B=t.collection(),s=r;for(B.merge(o);r!==i;)s=r,r=y[r*l+i],a=m[s*l+r],B.merge(a),B.merge(f(r));return B}};return R}},tn=It({weight:function(e){return 1},directed:!1,root:null}),nn={bellmanFord:function(e){var t=this,n=tn(e),r=n.weight,i=n.directed,o=n.root,a=r,s=this,u=this.cy(),l=this.byGroup(),c=l.edges,h=l.nodes,f=h.length,d=new zt,p=!1,v=[];o=u.collection(o)[0],c.unmergeBy(function(e){return e.isLoop()});for(var g=c.length,y=function(e){var t=d.get(e.id());return t||(t={},d.set(e.id(),t)),t},m=function(e){return(we(e)?u.$(e):e)[0]},b=function(e){return y(m(e)).dist},w=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=m(e),i=[],a=r;;){if(null==a)return t.spawn();var u=y(a),l=u.edge,c=u.pred;if(i.unshift(a[0]),a.same(n)&&i.length>0)break;null!=l&&i.unshift(l),a=c}return s.spawn(i)},x=0;x<f;x++){var E=h[x],_=y(E);E.same(o)?_.dist=0:_.dist=1/0,_.pred=null,_.edge=null}for(var S=!1,T=function(e,t,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=e,i.edge=n,S=!0)},k=1;k<f;k++){S=!1;for(var C=0;C<g;C++){var P=c[C],A=P.source(),O=P.target(),D=a(P),N=y(A),M=y(O);T(A,O,P,N,M,D),i||T(O,A,P,M,N,D)}if(!S)break}if(S)for(var I=0;I<g;I++){var L=c[I],R=L.source(),B=L.target(),j=a(L),q=y(R).dist,F=y(B).dist;if(q+j<F||!i&&F+j<q){Ct("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:b,pathTo:w,hasNegativeWeightCycle:p,negativeWeightCycles:v}}},rn=Math.sqrt(2),on=function(e,t,n){0===n.length&&kt("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],u=n,l=u.length-1;l>=0;l--){var c=u[l],h=c[1],f=c[2];(t[h]===a&&t[f]===s||t[h]===s&&t[f]===a)&&u.splice(l,1)}for(var d=0;d<u.length;d++){var p=u[d];p[1]===s?(u[d]=p.slice(),u[d][1]=a):p[2]===s&&(u[d]=p.slice(),u[d][2]=a)}for(var v=0;v<t.length;v++)t[v]===s&&(t[v]=a);return u},an=function(e,t,n,r){for(;n>r;){var i=Math.floor(Math.random()*t.length);t=on(i,e,t),n--}return t},sn={kargerStein:function(){var e=this.byGroup(),t=e.nodes,n=e.edges;n.unmergeBy(function(e){return e.isLoop()});var r=t.length,i=n.length,o=Math.ceil(Math.pow(Math.log(r)/Math.LN2,2)),a=Math.floor(r/rn);if(r<2)return void kt("At least 2 nodes are required for Karger-Stein algorithm");for(var s=[],u=0;u<i;u++){var l=n[u];s.push([u,t.indexOf(l.source()),t.indexOf(l.target())])}for(var c=1/0,h=[],f=new Array(r),d=new Array(r),p=new Array(r),v=function(e,t){for(var n=0;n<r;n++)t[n]=e[n]},g=0;g<=o;g++){for(var y=0;y<r;y++)d[y]=y;var m=an(d,s.slice(),r,a),b=m.slice();v(d,p);var w=an(d,m,a,2),x=an(p,b,a,2);w.length<=x.length&&w.length<c?(c=w.length,h=w,v(d,f)):x.length<=w.length&&x.length<c&&(c=x.length,h=x,v(p,f))}for(var E=this.spawn(h.map(function(e){return n[e[0]]})),_=this.spawn(),S=this.spawn(),T=f[0],k=0;k<f.length;k++){var C=f[k],P=t[k];C===T?_.merge(P):S.merge(P)}var A={cut:E,partition1:_,partition2:S};return A}},un=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},ln=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},cn=function(e){return{x:e[0],y:e[1]}},hn=function Sl(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,Sl=1/0,r=t;r<n;r++){var i=e[r];isFinite(i)&&(Sl=Math.min(i,Sl))}return Sl},fn=function Tl(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,Tl=-(1/0),r=t;r<n;r++){var i=e[r];isFinite(i)&&(Tl=Math.max(i,Tl))}return Tl},dn=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(r+=a,i++)}return r/i},pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var a=0,s=e.length-1;s>=0;s--){var u=e[s];o?isFinite(u)||(e[s]=-(1/0),a++):e.splice(s,1)}i&&e.sort(function(e,t){return e-t});var l=e.length,c=Math.floor(l/2);return l%2!==0?e[c+1+a]:(e[c-1+a]+e[c+a])/2},vn=function(e){return Math.PI*e/180},gn=function(e,t){return Math.atan2(t,e)-Math.PI/2},yn=Math.log2||function(e){return Math.log(e)/Math.log(2)},mn=function(e){return e>0?1:e<0?-1:0},bn=function(e,t){return Math.sqrt(wn(e,t))},wn=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},xn=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},En=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},_n=function(e,t,n,r){return{x:En(e.x,t.x,n.x,r),y:En(e.y,t.y,n.y,r)}},Sn=function(e,t,n,r){var i={x:t.x-e.x,y:t.y-e.y},o=bn(e,t),a={x:i.x/o,y:i.y/o};return n=null==n?0:n,r=null!=r?r:n*o,{x:e.x+a.x*r,y:e.y+a.y*r}},Tn=function(e,t,n){return Math.max(e,Math.min(n,t))},kn=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Cn=function(e){e.x1=1/0,e.y1=1/0,e.x2=-(1/0),e.y2=-(1/0),e.w=0,e.h=0},Pn=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},An=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Dn=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Nn=function(e,t){e.x1+=t.x,e.x2+=t.x,e.y1+=t.y,e.y2+=t.y},Mn=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},In=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Ln=function(e,t){return In(e,t.x,t.y)},Rn=function(e,t){return In(e,t.x1,t.y1)&&In(e,t.x2,t.y2)},Bn=function(e,t,n,r,i,o,a){var s,u=ir(i,o),l=i/2,c=o/2,h=n-l+u-a,f=r-c-a,d=n+l-u+a,p=f;if(s=Qn(e,t,n,r,h,f,d,p,!1),s.length>0)return s;var v=n+l+a,g=r-c+u-a,y=v,m=r+c-u+a;if(s=Qn(e,t,n,r,v,g,y,m,!1),s.length>0)return s;var b=n-l+u-a,w=r+c+a,x=n+l-u+a,E=w;if(s=Qn(e,t,n,r,b,w,x,E,!1),s.length>0)return s;var _=n-l-a,S=r-c+u-a,T=_,k=r+c-u+a;if(s=Qn(e,t,n,r,_,S,T,k,!1),s.length>0)return s;var C,P=n-l+u,A=r-c+u;if(C=Zn(e,t,n,r,P,A,u+a),C.length>0&&C[0]<=P&&C[1]<=A)return[C[0],C[1]];var O=n+l-u,D=r-c+u;if(C=Zn(e,t,n,r,O,D,u+a),C.length>0&&C[0]>=O&&C[1]<=D)return[C[0],C[1]];var N=n+l-u,M=r+c-u;if(C=Zn(e,t,n,r,N,M,u+a),C.length>0&&C[0]>=N&&C[1]>=M)return[C[0],C[1]];var I=n-l+u,L=r+c-u;return C=Zn(e,t,n,r,I,L,u+a),C.length>0&&C[0]<=I&&C[1]>=L?[C[0],C[1]]:[]},jn=function(e,t,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return u-s<=e&&e<=l+s&&c-s<=t&&t<=h+s},qn=function(e,t,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i)-u,x2:Math.max(n,a,i)+u,y1:Math.min(r,s,o)-u,y2:Math.max(r,s,o)+u};return!(e<l.x1||e>l.x2||t<l.y1||t>l.y2)},Fn=function(e,t,n,r){n-=r;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),a=2*e,s=(-t+o)/a,u=(-t-o)/a;return[s,u]},zn=function(e,t,n,r,i){t/=e,n/=e,r/=e;var o,a,s,u,l,c,h,f;return a=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*(t*t)),s/=54,o=a*a*a+s*s,i[1]=0,h=t/3,o>0?(l=s+Math.sqrt(o),l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(f=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*f,void(i[4]=i[2]=-(f+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),f=2*Math.sqrt(a),i[0]=-h+f*Math.cos(u/3),i[2]=-h+f*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+f*Math.cos((u+4*Math.PI)/3))))},Vn=function(e,t,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,f=[];zn(u,l,c,h,f);for(var d=1e-7,p=[],v=0;v<6;v+=2)Math.abs(f[v+1])<d&&f[v]>=0&&f[v]<=1&&p.push(f[v]);p.push(1),p.push(0);for(var g,y,m,b=-1,w=0;w<p.length;w++)g=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*i+p[w]*p[w]*a,y=Math.pow(1-p[w],2)*r+2*(1-p[w])*p[w]*o+p[w]*p[w]*s,m=Math.pow(g-e,2)+Math.pow(y-t,2),b>=0?m<b&&(b=m):b=m;return b},Un=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return c<0?l:h>u?(e-i)*(e-i)+(t-o)*(t-o):l-h},Xn=function(e,t,n){for(var r,i,o,a,s,u=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||r<=e&&e<=o))continue;s=(e-r)/(o-r)*(a-i)+i,s>t&&u++}return u%2!==0},Hn=function(e,t,n,r,i,o,a,s,u){var l,c=new Array(n.length);null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var h=Math.cos(-l),f=Math.sin(-l),d=0;d<c.length/2;d++)c[2*d]=o/2*(n[2*d]*h-n[2*d+1]*f),c[2*d+1]=a/2*(n[2*d+1]*h+n[2*d]*f),c[2*d]+=r,c[2*d+1]+=i;var p;if(u>0){var v=Wn(c,-u);p=Yn(v)}else p=c;return Xn(e,t,p)},Yn=function(e){for(var t,n,r,i,o,a,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(o=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(o=e[0],a=e[1],s=e[2],u=e[3]);var h=Qn(t,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},Wn=function(e,t){for(var n,r,i,o,a=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],o=e[2*(s+1)+1]):(i=e[0],o=e[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,f=l/c;a[4*s]=n+h*t,a[4*s+1]=r+f*t,a[4*s+2]=i+h*t,a[4*s+3]=o+f*t}return a},Gn=function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},Kn=function(e,t,n,r,i,o,a){return e-=i,t-=o,e/=n/2+a,t/=r/2+a,e*e+t*t<=1},Zn=function(e,t,n,r,i,o,a){var s=[n-e,r-t],u=[e-i,t-o],l=s[0]*s[0]+s[1]*s[1],c=2*(u[0]*s[0]+u[1]*s[1]),h=u[0]*u[0]+u[1]*u[1]-a*a,f=c*c-4*l*h;if(f<0)return[];var d=(-c+Math.sqrt(f))/(2*l),p=(-c-Math.sqrt(f))/(2*l),v=Math.min(d,p),g=Math.max(d,p),y=[];if(v>=0&&v<=1&&y.push(v),g>=0&&g<=1&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var w=y[1]*s[0]+e,x=y[1]*s[1]+t;return[m,b,w,x]}return[m,b]},$n=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Qn=function(e,t,n,r,i,o,a,s,u){var l=e-i,c=n-e,h=a-i,f=t-o,d=r-t,p=s-o,v=h*f-p*l,g=c*f-d*l,y=p*c-h*d;if(0!==y){var m=v/y,b=g/y,w=.001,x=0-w,E=1+w;return x<=m&&m<=E&&x<=b&&b<=E?[e+m*c,t+m*d]:u?[e+m*c,t+m*d]:[]}return 0===v||0===g?$n(e,n,a)===a?[a,s]:$n(e,n,i)===i?[i,o]:$n(i,a,n)===n?[n,r]:[]:[]},Jn=function(e,t,n,r,i,o,a,s){var u,l=[],c=new Array(n.length),h=!0;null==o&&(h=!1);var f;if(h){for(var d=0;d<c.length/2;d++)c[2*d]=n[2*d]*o+r,c[2*d+1]=n[2*d+1]*a+i;if(s>0){var p=Wn(c,-s);f=Yn(p)}else f=c}else f=n;for(var v,g,y,m,b=0;b<f.length/2;b++)v=f[2*b],g=f[2*b+1],b<f.length/2-1?(y=f[2*(b+1)],m=f[2*(b+1)+1]):(y=f[0],m=f[1]),u=Qn(e,t,r,i,v,g,y,m),0!==u.length&&l.push(u[0],u[1]);return l},er=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},tr=function(e,t){var n=rr(e,t);return n=nr(n)},nr=function(e){for(var t,n,r=e.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;u<r;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*l,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var f=0;f<r;f++)n=e[2*f+1]=e[2*f+1]+(-1-o);return e},rr=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,o=new Array(2*e),a=0;a<e;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},ir=function(e,t){return Math.min(e/4,t/4,8)},or=function(){return 8},ar=function(e,t,n){return[e-2*t+n,2*(t-e),e]},sr=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},ur=It({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),lr={pageRank:function(e){for(var t=ur(e),n=t.dampingFactor,r=t.precision,i=t.iterations,o=t.weight,a=this._private.cy,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,h=c*c,f=l.length,d=new Array(h),p=new Array(c),v=(1-n)/c,g=0;g<c;g++){for(var y=0;y<c;y++){var m=g*c+y;d[m]=0}p[g]=0}for(var b=0;b<f;b++){var w=l[b],x=w.data("source"),E=w.data("target");if(x!==E){var _=u.indexOfId(x),S=u.indexOfId(E),T=o(w),k=S*c+_;d[k]+=T,p[_]+=T}}for(var C=1/c+v,P=0;P<c;P++)if(0===p[P])for(var A=0;A<c;A++){var O=A*c+P;d[O]=C}else for(var D=0;D<c;D++){var N=D*c+P;d[N]=d[N]/p[P]+v}for(var M,I=new Array(c),L=new Array(c),R=0;R<c;R++)I[R]=1;for(var B=0;B<i;B++){for(var j=0;j<c;j++)L[j]=0;for(var q=0;q<c;q++)for(var F=0;F<c;F++){var z=q*c+F;L[q]+=d[z]*I[F]}xn(L),M=I,I=L,L=M;for(var V=0,U=0;U<c;U++){var X=M[U]-I[U];V+=X*X}if(V<r)break}var H={rank:function(e){return e=a.collection(e)[0],I[u.indexOf(e)]}};return H}},cr=It({root:null,weight:function(e){return 1},directed:!1,alpha:0}),hr={degreeCentralityNormalized:function(e){e=cr(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},o={},a=0,s=0,u=0;u<r;u++){var l=n[u],c=l.id();e.root=l;var h=this.degreeCentrality(e);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(e){return 0==a?0:(we(e)&&(e=t.filter(e)),i[e.id()]/a)},outdegree:function(e){return 0===s?0:(we(e)&&(e=t.filter(e)),o[e.id()]/s)}}}for(var f={},d=0,p=0;p<r;p++){var v=n[p];e.root=v;var g=this.degreeCentrality(e);d<g.degree&&(d=g.degree),f[v.id()]=g.degree}return{degree:function(e){return 0===d?0:(we(e)&&(e=t.filter(e)),f[e.id()]/d)}}},degreeCentrality:function(e){e=cr(e);var t=this.cy(),n=this,r=e,i=r.root,o=r.weight,a=r.directed,s=r.alpha;if(i=t.collection(i)[0],a){for(var u=i.connectedEdges(),l=u.filter(function(e){return e.target().same(i)&&n.has(e)}),c=u.filter(function(e){return e.source().same(i)&&n.has(e)}),h=l.length,f=c.length,d=0,p=0,v=0;v<l.length;v++)d+=o(l[v]);for(var g=0;g<c.length;g++)p+=o(c[g]);return{indegree:Math.pow(h,1-s)*Math.pow(d,s),outdegree:Math.pow(f,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(n),m=y.length,b=0,w=0;w<y.length;w++)b+=o(y[w]);return{degree:Math.pow(m,1-s)*Math.pow(b,s)}}};hr.dc=hr.degreeCentrality,hr.dcn=hr.degreeCentralityNormalised=hr.degreeCentralityNormalized;var fr=It({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),dr={closenessCentralityNormalized:function(e){for(var t=fr(e),n=t.harmonic,r=t.weight,i=t.directed,o=this.cy(),a={},s=0,u=this.nodes(),l=this.floydWarshall({weight:r,directed:i}),c=0;c<u.length;c++){for(var h=0,f=u[c],d=0;d<u.length;d++)if(c!==d){var p=l.distance(f,u[d]);h+=n?1/p:p}n||(h=1/h),s<h&&(s=h),a[f.id()]=h}return{closeness:function(e){return 0==s?0:(e=we(e)?o.filter(e)[0].id():e.id(),a[e]/s)}}},closenessCentrality:function(e){var t=fr(e),n=t.root,r=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++){var c=u[l];if(!c.same(n)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};dr.cc=dr.closenessCentrality,dr.ccn=dr.closenessCentralityNormalised=dr.closenessCentralityNormalized;var pr=It({weight:null,directed:!1}),vr={betweennessCentrality:function(e){for(var t=pr(e),n=t.directed,r=t.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},u={},l=0,c={set:function(e,t){u[e]=t,t>l&&(l=t)},get:function(e){return u[e]}},h=0;h<a.length;h++){var f=a[h],d=f.id();n?s[d]=f.outgoers().nodes():s[d]=f.openNeighborhood().nodes(),c.set(d,0)}for(var p=function(e){for(var t=a[e].id(),n=[],u={},l={},h={},f=new fe(function(e,t){return h[e]-h[t]}),d=0;d<a.length;d++){var p=a[d].id();u[p]=[],l[p]=0,h[p]=1/0}for(l[t]=1,h[t]=0,f.push(t);!f.empty();){var v=f.pop();if(n.push(v),i)for(var g=0;g<s[v].length;g++){var y=s[v][g],m=o.getElementById(v),b=void 0;b=m.edgesTo(y).length>0?m.edgesTo(y)[0]:y.edgesTo(m)[0];var w=r(b);y=y.id(),h[y]>h[v]+w&&(h[y]=h[v]+w,f.nodes.indexOf(y)<0?f.push(y):f.updateItem(y),l[y]=0,u[y]=[]),h[y]==h[v]+w&&(l[y]=l[y]+l[v],u[y].push(v))}else for(var x=0;x<s[v].length;x++){var E=s[v][x].id();h[E]==1/0&&(f.push(E),h[E]=h[v]+1),h[E]==h[v]+1&&(l[E]=l[E]+l[v],u[E].push(v))}}for(var _={},S=0;S<a.length;S++)_[a[S].id()]=0;for(;n.length>0;)for(var T=n.pop(),k=0;k<u[T].length;k++){var C=u[T][k];_[C]=_[C]+l[C]/l[T]*(1+_[T]),T!=a[e].id()&&c.set(T,c.get(T)+_[T])}},v=0;v<a.length;v++)p(v);var g={betweenness:function(e){var t=o.collection(e).id();return c.get(t)},betweennessNormalized:function(e){if(0==l)return 0;var t=o.collection(e).id();return c.get(t)/l}};return g.betweennessNormalised=g.betweennessNormalized,g}};vr.bc=vr.betweennessCentrality;var gr=It({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),yr=function(e){return gr(e)},mr=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},br=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},wr=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var o=0;o<t;o++)e[o*t+r]=e[o*t+r]/n}},xr=function(e,t,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=e[i*n+a]*t[a*n+s]}return r},Er=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=xr(e,r,t);return e},_r=function(e,t,n){for(var r=new Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return wr(r,t),r},Sr=function(e,t,n,r){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r),a=Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r);if(o!==a)return!1}return!0},Tr=function(e,t,n,r){for(var i=[],o=0;o<t;o++){for(var a=[],s=0;s<t;s++)Math.round(1e3*e[o*t+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i},kr=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},Cr=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&kr(e[t],e[n])&&e.splice(n,1);return e},Pr=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=yr(e),o={},a=0;a<t.length;a++)o[t[a].id()]=a;for(var s,u=t.length,l=u*u,c=new Array(l),h=0;h<l;h++)c[h]=0;for(var f=0;f<n.length;f++){var d=n[f],p=o[d.source().id()],v=o[d.target().id()],g=mr(d,i.attributes);c[p*u+v]+=g,c[v*u+p]+=g}br(c,u,i.multFactor),wr(c,u);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,s=Er(c,u,i.expandFactor),c=_r(s,u,i.inflateFactor),Sr(c,s,l,4)||(y=!0),m++;var b=Tr(c,u,t,r);return b=Cr(b)},Ar={markovClustering:Pr,mcl:Pr},Or=function(e){return e},Dr=function(e,t){return Math.abs(t-e)},Nr=function(e,t,n){return e+Dr(t,n)},Mr=function(e,t,n){return e+Math.pow(n-t,2)},Ir=function(e){return Math.sqrt(e)},Lr=function(e,t,n){return Math.max(e,Dr(t,n))},Rr=function(e,t,n,r,i){for(var o,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Or,u=r,l=0;l<e;l++)o=t(l),a=n(l),u=i(u,o,a);return s(u)},Br={euclidean:function(e,t,n){return e>=2?Rr(e,t,n,0,Mr,Ir):Rr(e,t,n,0,Nr)},squaredEuclidean:function(e,t,n){return Rr(e,t,n,0,Mr)},manhattan:function(e,t,n){return Rr(e,t,n,0,Nr)},max:function(e,t,n){return Rr(e,t,n,-(1/0),Lr)}};Br["squared-euclidean"]=Br.squaredEuclidean,Br.squaredeuclidean=Br.squaredEuclidean;var jr=It({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,
testCentroids:null}),qr=function(e){return jr(e)},Fr=function(e,t,n,r,i){var o="kMedoids"===i?function(e){return r[e](n)}:function(e){return n[e]},a=function(e){return r[e](t)};return d(e,r.length,o,a)},zr=function(e,t,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(t),s=null,u=0;u<r;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var l=0;l<t;l++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[l]=s}return a},Vr=function(e,t,n,r,i){for(var o=1/0,a=0,s=0;s<t.length;s++){var u=Fr(n,e,t[s],r,i);u<o&&(o=u,a=s)}return a},Ur=function(e,t,n){for(var r=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&r.push(i);return r},Xr=function(e,t,n){return Math.abs(t-e)<=n},Hr=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var o=Math.abs(e[r][i]-t[r][i]);if(o>n)return!1}return!0},Yr=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},Wr=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];Yr(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Gr=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=Fr("manhattan",t[i],e,n,"kMedoids");return r},Kr=function(e){var t,n=this.cy(),r=this.nodes(),o=null,a=qr(e),s=new Array(a.k),u={};if(a.testMode)if("number"==typeof a.testCentroids){var l=a.testCentroids;t=zr(r,a.k,a.attributes,l)}else t="object"===i(a.testCentroids)?a.testCentroids:zr(r,a.k,a.attributes);else t=zr(r,a.k,a.attributes);for(var c=!0,h=0;c&&h<a.maxIterations;){for(var f=0;f<r.length;f++)o=r[f],u[o.id()]=Vr(o,t,a.distance,a.attributes,"kMeans");c=!1;for(var d=0;d<a.k;d++){var p=Ur(d,r,u);if(0!==p.length){for(var v=a.attributes.length,g=t[d],y=new Array(v),m=new Array(v),b=0;b<v;b++){m[b]=0;for(var w=0;w<p.length;w++)o=p[w],m[b]+=a.attributes[b](o);y[b]=m[b]/p.length,Xr(y[b],g[b],a.sensitivityThreshold)||(c=!0)}t[d]=y,s[d]=n.collection(p)}}h++}return s},Zr=function(e){var t,n,r=this.cy(),o=this.nodes(),a=null,s=qr(e),u=new Array(s.k),l={},c=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(t="object"===i(s.testCentroids)?s.testCentroids:Wr(o,s.k)):t=Wr(o,s.k);for(var h=!0,f=0;h&&f<s.maxIterations;){for(var d=0;d<o.length;d++)a=o[d],l[a.id()]=Vr(a,t,s.distance,s.attributes,"kMedoids");h=!1;for(var p=0;p<t.length;p++){var v=Ur(p,o,l);if(0!==v.length){c[p]=Gr(t[p],v,s.attributes);for(var g=0;g<v.length;g++)n=Gr(v[g],v,s.attributes),n<c[p]&&(c[p]=n,t[p]=v[g],h=!0);u[p]=r.collection(v)}}f++}return u},$r=function(e,t,n,r,i){for(var o,a,s=0;s<t.length;s++)for(var u=0;u<e.length;u++)r[s][u]=Math.pow(n[s][u],i.m);for(var l=0;l<e.length;l++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<t.length;h++)o+=r[h][l]*i.attributes[c](t[h]),a+=r[h][l];e[l][c]=o/a}},Qr=function(e,t,n,r,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var a,s,u,l=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var f=0;f<n.length;f++)s=Fr(i.distance,r[h],n[c],i.attributes,"cmeans"),u=Fr(i.distance,r[h],n[f],i.attributes,"cmeans"),a+=Math.pow(s/u,l);e[h][c]=1/a}},Jr=function(e,t,n,r){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var a,s,u=0;u<t.length;u++){a=-(1/0),s=-1;for(var l=0;l<t[0].length;l++)t[u][l]>a&&(a=t[u][l],s=l);i[s].push(e[u])}for(var c=0;c<i.length;c++)i[c]=r.collection(i[c]);return i},ei=function(e){var t,n,r,i,o,a=this.cy(),s=this.nodes(),u=qr(e);i=new Array(s.length);for(var l=0;l<s.length;l++)i[l]=new Array(u.k);r=new Array(s.length);for(var c=0;c<s.length;c++)r[c]=new Array(u.k);for(var h=0;h<s.length;h++){for(var f=0,d=0;d<u.k;d++)r[h][d]=Math.random(),f+=r[h][d];for(var p=0;p<u.k;p++)r[h][p]=r[h][p]/f}n=new Array(u.k);for(var v=0;v<u.k;v++)n[v]=new Array(u.attributes.length);o=new Array(s.length);for(var g=0;g<s.length;g++)o[g]=new Array(u.k);for(var y=!0,m=0;y&&m<u.maxIterations;)y=!1,$r(n,s,r,o,u),Qr(r,i,n,s,u),Hr(r,i,u.sensitivityThreshold)||(y=!0),m++;return t=Jr(s,r,u,a),{clusters:t,degreeOfMembership:r}},ti={kMeans:Kr,kMedoids:Zr,fuzzyCMeans:ei,fcm:ei},ni=It({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),ri={single:"min",complete:"max"},ii=function(e){var t=ni(e),n=ri[t.linkage];return null!=n&&(t.linkage=n),t},oi=function(e,t,n,r,i){for(var o,a=0,s=1/0,u=i.attributes,l=function(e,t){return d(i.distance,u.length,function(t){return u[t](e)},function(e){return u[e](t)})},c=0;c<e.length;c++){var h=e[c].key,f=n[h][r[h]];f<s&&(a=h,s=f)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var p,v=t[a],g=t[r[a]];p="dendrogram"===i.mode?{left:v,right:g,key:v.key}:{value:v.value.concat(g.value),key:v.key},e[v.index]=p,e.splice(g.index,1),t[v.key]=p;for(var y=0;y<e.length;y++){var m=e[y];v.key===m.key?o=1/0:"min"===i.linkage?(o=n[v.key][m.key],n[v.key][m.key]>n[g.key][m.key]&&(o=n[g.key][m.key])):"max"===i.linkage?(o=n[v.key][m.key],n[v.key][m.key]<n[g.key][m.key]&&(o=n[g.key][m.key])):o="mean"===i.linkage?(n[v.key][m.key]*v.size+n[g.key][m.key]*g.size)/(v.size+g.size):"dendrogram"===i.mode?l(m.value,v.value):l(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=o}for(var b=0;b<e.length;b++){var w=e[b].key;if(r[w]===v.key||r[w]===g.key){for(var x=w,E=0;E<e.length;E++){var _=e[E].key;n[w][_]<n[w][x]&&(x=_)}r[w]=x}e[b].index=b}return v.key=g.key=v.index=g.index=null,!0},ai=function kl(e,t,n){e&&(e.value?t.push(e.value):(e.left&&kl(e.left,t,n),e.right&&kl(e.right,t,n)))},si=function Cl(e,t){if(!e)return"";if(e.left&&e.right){var n=Cl(e.left,t),r=Cl(e.right,t),i=t.add({group:"nodes",data:{id:n+","+r}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:r,target:i.id()}}),i.id()}return e.value?e.value.id():void 0},ui=function Pl(e,t,n){if(!e)return[];var r=[],i=[],o=[];return 0===t?(e.left&&ai(e.left,r,n),e.right&&ai(e.right,i,n),o=r.concat(i),[n.collection(o)]):1===t?e.value?[n.collection(e.value)]:(e.left&&ai(e.left,r,n),e.right&&ai(e.right,i,n),[n.collection(r),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(r=Pl(e.left,t-1,n)),e.right&&(i=Pl(e.right,t-1,n)),r.concat(i))},li=function(e){for(var t=this.cy(),n=this.nodes(),r=ii(e),i=r.attributes,o=function(e,t){return d(r.distance,i.length,function(t){return i[t](e)},function(e){return i[e](t)})},a=[],s=[],u=[],l=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=h,l[c]=h,s[c]=[],u[c]=0}for(var f=0;f<a.length;f++)for(var p=0;p<=f;p++){var v=void 0;v="dendrogram"===r.mode?f===p?1/0:o(a[f].value,a[p].value):f===p?1/0:o(a[f].value[0],a[p].value[0]),s[f][p]=v,s[p][f]=v,v<s[f][u[f]]&&(u[f]=p)}for(var g=oi(a,l,s,u,r);g;)g=oi(a,l,s,u,r);var y;return"dendrogram"===r.mode?(y=ui(a[0],r.dendrogramDepth,t),r.addDendrogram&&si(a[0],t)):(y=new Array(a.length),a.forEach(function(e,n){e.key=e.index=null,y[n]=t.collection(e.value)})),y},ci={hierarchicalClustering:li,hca:li},hi=It({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),fi=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||kt("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(e){return e===n})||Te(n)||kt("Preference must be one of [".concat(r.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),hi(e)},di=function(e,t,n,r){var i=function(e,t){return r[t](e)};return-d(e,r.length,function(e){return i(t,e)},function(e){return i(n,e)},t,n)},pi=function(e,t){var n=null;return n="median"===t?pn(e):"mean"===t?dn(e):"min"===t?hn(e):"max"===t?fn(e):t},vi=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r},gi=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var o=-1,a=-(1/0),s=0;s<n.length;s++){var u=n[s];t[i*e+u]>a&&(o=u,a=t[i*e+u])}o>0&&r.push(o)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},yi=function(e,t,n){for(var r=gi(e,t,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,u=-(1/0),l=0;l<o.length;l++){for(var c=0,h=0;h<o.length;h++)c+=t[o[h]*e+o[l]];c>u&&(s=l,u=c)}n[i]=o[s]}return r=gi(e,t,n)},mi=function(e){for(var t=this.cy(),n=this.nodes(),r=fi(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var a,s,u,l,c,h;a=n.length,s=a*a,u=new Array(s);for(var f=0;f<s;f++)u[f]=-(1/0);for(var d=0;d<a;d++)for(var p=0;p<a;p++)d!==p&&(u[d*a+p]=di(r.distance,n[d],n[p],r.attributes));l=pi(u,r.preference);for(var v=0;v<a;v++)u[v*a+v]=l;c=new Array(s);for(var g=0;g<s;g++)c[g]=0;h=new Array(s);for(var y=0;y<s;y++)h[y]=0;for(var m=new Array(a),b=new Array(a),w=new Array(a),x=0;x<a;x++)m[x]=0,b[x]=0,w[x]=0;for(var E=new Array(a*r.minIterations),_=0;_<E.length;_++)E[_]=0;var S;for(S=0;S<r.maxIterations;S++){for(var T=0;T<a;T++){for(var k=-(1/0),C=-(1/0),P=-1,A=0,O=0;O<a;O++)m[O]=c[T*a+O],A=h[T*a+O]+u[T*a+O],A>=k?(C=k,k=A,P=O):A>C&&(C=A);for(var D=0;D<a;D++)c[T*a+D]=(1-r.damping)*(u[T*a+D]-k)+r.damping*m[D];c[T*a+P]=(1-r.damping)*(u[T*a+P]-C)+r.damping*m[P]}for(var N=0;N<a;N++){for(var M=0,I=0;I<a;I++)m[I]=h[I*a+N],b[I]=Math.max(0,c[I*a+N]),M+=b[I];M-=b[N],b[N]=c[N*a+N],M+=b[N];for(var L=0;L<a;L++)h[L*a+N]=(1-r.damping)*Math.min(0,M-b[L])+r.damping*m[L];h[N*a+N]=(1-r.damping)*(M-b[N])+r.damping*m[N]}for(var R=0,B=0;B<a;B++){var j=h[B*a+B]+c[B*a+B]>0?1:0;E[S%r.minIterations*a+B]=j,R+=j}if(R>0&&(S>=r.minIterations-1||S==r.maxIterations-1)){for(var q=0,F=0;F<a;F++){w[F]=0;for(var z=0;z<r.minIterations;z++)w[F]+=E[z*a+F];0!==w[F]&&w[F]!==r.minIterations||q++}if(q===a)break}}for(var V=vi(a,c,h),U=yi(a,u,V,n,i),X={},H=0;H<V.length;H++)X[V[H]]=[];for(var Y=0;Y<n.length;Y++){var W=i[n[Y].id()],G=U[W];null!=G&&X[G].push(n[Y])}for(var K=new Array(V.length),Z=0;Z<V.length;Z++)K[Z]=t.collection(X[V[Z]]);return K},bi={affinityPropagation:mi,ap:mi},wi={};[Wt,Kt,Zt,Qt,en,nn,sn,lr,hr,dr,vr,Ar,ti,ci,bi].forEach(function(e){Je(wi,e)});var xi=0,Ei=1,_i=2,Si=function Al(e){return this instanceof Al?(this.id="Thenable/1.0.7",this.state=xi,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new Al(e)};Si.prototype={fulfill:function(e){return Ti(this,Ei,"fulfillValue",e)},reject:function(e){return Ti(this,_i,"rejectReason",e)},then:function(e,t){var n=this,r=new Si;return n.onFulfilled.push(Pi(e,r,"fulfill")),n.onRejected.push(Pi(t,r,"reject")),ki(n),r.proxy}};var Ti=function(e,t,n,r){return e.state===xi&&(e.state=t,e[n]=r,ki(e)),e},ki=function(e){e.state===Ei?Ci(e,"onFulfilled",e.fulfillValue):e.state===_i&&Ci(e,"onRejected",e.rejectReason)},Ci=function(e,t,r){if(0!==e[t].length){var i=e[t];e[t]=[];var o=function(){for(var e=0;e<i.length;e++)i[e](r)};"function"==typeof n?n(o):setTimeout(o,0)}},Pi=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(o){return void t.reject(o)}Ai(t,i)}}},Ai=function Ol(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"===i(t)&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var o=!1;try{n.call(t,function(n){o||(o=!0,n===t?e.reject(new TypeError("circular thenable chain")):Ol(e,n))},function(t){o||(o=!0,e.reject(t))})}catch(r){o||e.reject(r)}}};Si.all=function(e){return new Si(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,i++,i===e.length&&t(r)},a=0;a<e.length;a++)!function(t){var r=e[t],i=null!=r&&null!=r.then;if(i)r.then(function(e){o(t,e)},function(e){n(e)});else{var a=r;o(t,a)}}(a)})},Si.resolve=function(e){return new Si(function(t,n){t(e)})},Si.reject=function(e){return new Si(function(t,n){n(e)})};var Oi="undefined"!=typeof Promise?Promise:Si,Di=function(e,t,n){var r=this._private=Je({duration:1e3},t,n);r.target=e,r.style=r.style||r.css,r.started=!1,r.playing=!1,r.hooked=!1,r.applying=!1,r.progress=0,r.completes=[],r.frames=[],r.complete&&xe(r.complete)&&r.completes.push(r.complete),this.length=1,this[0]=this},Ni=Di.prototype;Je(Ni,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;t=e.queue?n.queue:n.current,t.push(this),Pe(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[r]=a}return t&&this.play(),this},promise:function(e){var t,n=this._private;switch(e){case"frame":t=n.frames;break;default:case"complete":case"completed":t=n.completes}return new Oi(function(e,n){t.push(function(){e()})})}}),Ni.complete=Ni.completed,Ni.run=Ni.play,Ni.running=Ni.playing;var Mi={animated:function(){return function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var u=o.style();e=Je({},e,t);var l=0===Object.keys(e).length;if(l)return new Di(i[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=u.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var c=e.renderedPosition,h=o.pan(),f=o.zoom();e.position=ln(c,f,h)}if(a&&null!=e.panBy){var d=e.panBy,p=o.pan();e.pan={x:p.x+d.x,y:p.y+d.y}}var v=e.center||e.centre;if(a&&null!=v){var g=o.getCenterPan(v.eles,e.zoom);null!=g&&(e.pan=g)}if(a&&null!=e.fit){var y=e.fit,m=o.getFitViewport(y.eles||y.boundingBox,y.padding);null!=m&&(e.pan=m.pan,e.zoom=m.zoom)}if(a&&_e(e.zoom)){var b=o.getZoomedViewport(e.zoom);null!=b&&(b.zoomed&&(e.zoom=b.zoom),b.panned&&(e.pan=b.pan))}return new Di(i[0],e)}},animate:function(){return function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;t&&(e=Je({},e,t));for(var a=0;a<i.length;a++){var s=i[a],u=s.animated()&&(void 0===e.queue||e.queue),l=s.animation(e,u?{queue:!0}:void 0);l.play()}return this}},stop:function(){return function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private,l=u.animation.current,c=0;c<l.length;c++){var h=l[c],f=h._private;t&&(f.duration=0)}e&&(u.animation.queue=[]),t||(u.animation.current=[])}return o.notify("draw"),this}}},Ii={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}};return e=Je({},t,e),function(t,n){var r=e,i=this,o=void 0!==i.length,a=o?i:[i],s=o?i[0]:i;if(we(t)){if(r.allowGetting&&void 0===n){var l;return s&&(r.beforeGet(s),l=s._private[r.field][t]),l}if(r.allowSetting&&void 0!==n){var c=!r.immutableKeys[t];if(c){var h=u({},t,n);r.beforeSet(i,h);for(var f=0,d=a.length;f<d;f++){var p=a[f];r.canSet(p)&&(p._private[r.field][t]=n)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&_e(t)){var v,g,y=t,m=Object.keys(y);r.beforeSet(i,y);for(var b=0;b<m.length;b++){v=m[b],g=y[v];var w=!r.immutableKeys[v];if(w)for(var x=0;x<a.length;x++){var E=a[x];r.canSet(E)&&(E._private[r.field][v]=g)}}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&xe(t)){var _=t;i.on(r.bindingEvent,_)}else if(r.allowGetting&&void 0===t){var S;return s&&(r.beforeGet(s),S=s._private[r.field]),S}return i}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Je({},t,e),function(t){var n=e,r=this,i=void 0!==r.length,o=i?r:[r];if(we(t)){for(var a=t.split(/\s+/),s=a.length,u=0;u<s;u++){var l=a[u];if(!Ie(l)){var c=!n.immutableKeys[l];if(c)for(var h=0,f=o.length;h<f;h++)o[h]._private[n.field][l]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===t){for(var d=0,p=o.length;d<p;d++)for(var v=o[d]._private[n.field],g=Object.keys(v),y=0;y<g.length;y++){var m=g[y],b=!n.immutableKeys[m];b&&(v[m]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}},Li={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new Oi(function(e,t){var i=function(t){n.off.apply(n,a),e(t)},o=r.concat([i]),a=o.concat([]);n.on.apply(n,o)})}}},Ri={};[Mi,Ii,Li].forEach(function(e){Je(Ri,e)});var Bi={animate:Ri.animate(),animation:Ri.animation(),animated:Ri.animated(),clearQueue:Ri.clearQueue(),delay:Ri.delay(),delayAnimation:Ri.delayAnimation(),stop:Ri.stop()},ji={classes:function(e){Ee(e)||(e=(e||"").match(/\S+/g)||[]);for(var t=this,n=[],r=new Xt(e),i=0;i<t.length;i++){for(var o=t[i],a=o._private,s=a.classes,u=!1,l=0;l<e.length;l++){var c=e[l],h=s.has(c);if(!h){u=!0;break}}u||(u=s.size!==e.length),u&&(a.classes=r,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){Ee(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=void 0===t,i=[],o=0,a=n.length;o<a;o++)for(var s=n[o],u=s._private.classes,l=!1,c=0;c<e.length;c++){var h=e[c],f=u.has(h),d=!1;t||r&&!f?(u.add(h),d=!0):(!t||r&&f)&&(u["delete"](h),d=!0),!l&&d&&(i.push(s),l=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}},qi={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:Xe,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};qi.variable="(?:[\\w-]|(?:\\\\"+qi.metaChar+"))+",qi.value=qi.string+"|"+qi.number,qi.className=qi.variable,qi.id=qi.variable,function(){var e,t,n;for(e=qi.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],qi.comparatorOp+="|@"+t;for(e=qi.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],t.indexOf("!")>=0||"="!==t&&(qi.comparatorOp+="|\\!"+t)}();var Fi=function(){return{checks:[]}},zi={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Vi=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return Qe(e.selector,t.selector)}),Ui=function(){for(var e,t={},n=0;n<Vi.length;n++)e=Vi[n],t[e.selector]=e.matches;return t}(),Xi=function(e,t){return Ui[e](t)},Hi="("+Vi.map(function(e){return e.selector}).join("|")+")",Yi=function(e){return e.replace(new RegExp("\\\\("+qi.metaChar+")","g"),function(e,t){return t})},Wi=function(e,t,n){e[e.length-1]=n},Gi=[{name:"group",query:!0,regex:"("+qi.group+")",populate:function(e,t,n){var r=l(n,1),i=r[0];t.checks.push({type:zi.GROUP,value:"*"===i?i:i+"s"})}},{name:"state",query:!0,regex:Hi,populate:function(e,t,n){var r=l(n,1),i=r[0];t.checks.push({type:zi.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+qi.id+")",populate:function(e,t,n){var r=l(n,1),i=r[0];t.checks.push({type:zi.ID,value:Yi(i)})}},{name:"className",query:!0,regex:"\\.("+qi.className+")",populate:function(e,t,n){var r=l(n,1),i=r[0];t.checks.push({type:zi.CLASS,value:Yi(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+qi.variable+")\\s*\\]",populate:function(e,t,n){var r=l(n,1),i=r[0];t.checks.push({type:zi.DATA_EXIST,field:Yi(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+qi.variable+")\\s*("+qi.comparatorOp+")\\s*("+qi.value+")\\s*\\]",populate:function(e,t,n){var r=l(n,3),i=r[0],o=r[1],a=r[2],s=null!=new RegExp("^"+qi.string+"$").exec(a);a=s?a.substring(1,a.length-1):parseFloat(a),t.checks.push({type:zi.DATA_COMPARE,field:Yi(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+qi.boolOp+")\\s*("+qi.variable+")\\s*\\]",populate:function(e,t,n){var r=l(n,2),i=r[0],o=r[1];t.checks.push({type:zi.DATA_BOOL,field:Yi(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+qi.meta+")\\s*("+qi.comparatorOp+")\\s*("+qi.number+")\\s*\\]\\]",populate:function(e,t,n){var r=l(n,3),i=r[0],o=r[1],a=r[2];t.checks.push({type:zi.META_COMPARE,field:Yi(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:qi.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,o=e[e.length-1];null!=n&&(o.subject=n,e.currentSubject=null),o.edgeCount=r,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var a=e[e.length++]=Fi();return a}},{name:"directedEdge",separator:!0,regex:qi.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n=Fi(),r=t,i=Fi();return n.checks.push({type:zi.DIRECTED_EDGE,source:r,target:i}),Wi(e,t,n),e.edgeCount++,i}var o=Fi(),a=t,s=Fi();return o.checks.push({type:zi.NODE_SOURCE,source:a,target:s}),Wi(e,t,o),e.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:qi.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n=Fi(),r=t,i=Fi();return n.checks.push({type:zi.UNDIRECTED_EDGE,nodes:[r,i]}),Wi(e,t,n),e.edgeCount++,i}var o=Fi(),a=t,s=Fi();return o.checks.push({type:zi.NODE_NEIGHBOR,node:a,neighbor:s}),Wi(e,t,o),s}},{name:"child",separator:!0,regex:qi.child,populate:function(e,t){if(null==e.currentSubject){var n=Fi(),r=Fi(),i=e[e.length-1];return n.checks.push({type:zi.CHILD,parent:i,child:r}),Wi(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var o=Fi(),a=e[e.length-1],s=Fi(),u=Fi(),l=Fi(),c=Fi();return o.checks.push({type:zi.COMPOUND_SPLIT,left:a,right:s,subject:u}),u.checks=t.checks,t.checks=[{type:zi.TRUE}],c.checks.push({type:zi.TRUE}),s.checks.push({type:zi.PARENT,parent:c,child:l}),Wi(e,a,o),e.currentSubject=u,e.compoundCount++,l}var h=Fi(),f=Fi(),d=[{type:zi.PARENT,parent:h,child:f}];return h.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"descendant",separator:!0,regex:qi.descendant,populate:function(e,t){if(null==e.currentSubject){var n=Fi(),r=Fi(),i=e[e.length-1];return n.checks.push({type:zi.DESCENDANT,ancestor:i,descendant:r}),Wi(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var o=Fi(),a=e[e.length-1],s=Fi(),u=Fi(),l=Fi(),c=Fi();return o.checks.push({type:zi.COMPOUND_SPLIT,left:a,right:s,subject:u}),u.checks=t.checks,t.checks=[{type:zi.TRUE}],c.checks.push({type:zi.TRUE}),s.checks.push({type:zi.ANCESTOR,ancestor:c,descendant:l}),Wi(e,a,o),e.currentSubject=u,e.compoundCount++,l}var h=Fi(),f=Fi(),d=[{type:zi.ANCESTOR,ancestor:h,descendant:f}];return h.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"subject",modifier:!0,regex:qi.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Ct("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],r=n.checks[0],i=null==r?null:r.type;i===zi.DIRECTED_EDGE?r.type=zi.NODE_TARGET:i===zi.UNDIRECTED_EDGE&&(r.type=zi.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];Gi.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var Ki=function(e){for(var t,n,r,i=0;i<Gi.length;i++){var o=Gi[i],a=o.name,s=e.match(o.regexObj);if(null!=s){n=s,t=o,r=a;var u=s[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:r,remaining:e}},Zi=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},$i=function(e){var t=this,n=t.inputText=e,r=t[0]=Fi();for(t.length=1,n=Zi(n);;){var i=Ki(n);if(null==i.expr)return Ct("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),a=i.expr.populate(t,r,o);if(a===!1)return!1;if(null!=a&&(r=a),n=i.remaining,n.match(/^\s*$/))break}var s=t[t.length-1];null!=t.currentSubject&&(s.subject=t.currentSubject),s.edgeCount=t.edgeCount,s.compoundCount=t.compoundCount;for(var u=0;u<t.length;u++){var l=t[u];if(l.compoundCount>0&&l.edgeCount>0)return Ct("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return Ct("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&Ct("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Qi=function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return we(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},r=function(r,o){var a=r.type,s=r.value;switch(a){case zi.GROUP:var u=e(s);return u.substring(0,u.length-1);case zi.DATA_COMPARE:var l=r.field,c=r.operator;return"["+l+n(e(c))+t(s)+"]";case zi.DATA_BOOL:var h=r.operator,f=r.field;return"["+e(h)+f+"]";case zi.DATA_EXIST:var d=r.field;return"["+d+"]";case zi.META_COMPARE:var p=r.operator,v=r.field;return"[["+v+n(e(p))+t(s)+"]]";case zi.STATE:return s;case zi.ID:return"#"+s;case zi.CLASS:return"."+s;case zi.PARENT:case zi.CHILD:return i(r.parent,o)+n(">")+i(r.child,o);case zi.ANCESTOR:case zi.DESCENDANT:return i(r.ancestor,o)+" "+i(r.descendant,o);case zi.COMPOUND_SPLIT:var g=i(r.left,o),y=i(r.subject,o),m=i(r.right,o);return g+(g.length>0?" ":"")+y+m;case zi.TRUE:return""}},i=function(e,t){return e.checks.reduce(function(n,i,o){return n+(t===e&&0===o?"$":"")+r(i,t)},"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Ji={parse:$i,toString:Qi},eo=function(e,t,n){var r,i,o,a=we(e),s=Te(e),u=we(n),l=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),l=!0),(a||u||l)&&(i=a||s?""+e:"",o=""+n),l&&(e=i=i.toLowerCase(),n=o=o.toLowerCase()),t){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1}return!c||null==e&&h||(r=!r),r},to=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},no=function(e){return void 0!==e},ro=function(e,t){return e.data(t)},io=function(e,t){return e[t]()},oo=[],ao=function(e,t){return e.checks.every(function(e){return oo[e.type](e,t)})};oo[zi.GROUP]=function(e,t){var n=e.value;return"*"===n||n===t.group()},oo[zi.STATE]=function(e,t){var n=e.value;return Xi(n,t)},oo[zi.ID]=function(e,t){var n=e.value;return t.id()===n},oo[zi.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)},oo[zi.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return eo(io(t,n),r,i)},oo[zi.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return eo(ro(t,n),r,i)},oo[zi.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return to(ro(t,n),r)},oo[zi.DATA_EXIST]=function(e,t){var n=e.field,r=e.operator;return no(ro(t,n),r)},oo[zi.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),o=t.target();return ao(n,i)&&ao(r,o)||ao(r,i)&&ao(n,o)},oo[zi.NODE_NEIGHBOR]=function(e,t){return ao(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&ao(e.neighbor,t)})},oo[zi.DIRECTED_EDGE]=function(e,t){return ao(e.source,t.source())&&ao(e.target,t.target())},oo[zi.NODE_SOURCE]=function(e,t){return ao(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&ao(e.target,t)})},oo[zi.NODE_TARGET]=function(e,t){return ao(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&ao(e.source,t)})},oo[zi.CHILD]=function(e,t){return ao(e.child,t)&&ao(e.parent,t.parent())},oo[zi.PARENT]=function(e,t){return ao(e.parent,t)&&t.children().some(function(t){
return ao(e.child,t)})},oo[zi.DESCENDANT]=function(e,t){return ao(e.descendant,t)&&t.ancestors().some(function(t){return ao(e.ancestor,t)})},oo[zi.ANCESTOR]=function(e,t){return ao(e.ancestor,t)&&t.descendants().some(function(t){return ao(e.descendant,t)})},oo[zi.COMPOUND_SPLIT]=function(e,t){return ao(e.subject,t)&&ao(e.left,t)&&ao(e.right,t)},oo[zi.TRUE]=function(){return!0},oo[zi.COLLECTION]=function(e,t){var n=e.value;return n.has(t)},oo[zi.FILTER]=function(e,t){var n=e.value;return n(t)};var so=function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===zi.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++){var r=t[n];if(ao(r,e))return!0}return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)},uo=function(e){for(var t=this,n=0;n<t.length;n++){var r=t[n];if(ao(r,e))return!0}return!1},lo={matches:uo,filter:so},co=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||we(e)&&e.match(/^\s*$/)||(Pe(e)?this.addQuery({checks:[{type:zi.COLLECTION,value:e.collection()}]}):xe(e)?this.addQuery({checks:[{type:zi.FILTER,value:e}]}):we(e)?this.parse(e)||(this.invalid=!0):kt("A selector must be created from a string; found ",e))},ho=co.prototype;[Ji,lo].forEach(function(e){return Je(ho,e)}),ho.text=function(){return this.inputText},ho.size=function(){return this.length},ho.eq=function(e){return this[e]},ho.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},ho.addQuery=function(e){this[this.length++]=e},ho.selector=ho.toString;var fo={allAre:function(e){var t=new co(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new co(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t===n&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};fo.allAreNeighbours=fo.allAreNeighbors,fo.has=fo.contains,fo.equal=fo.equals=fo.same;var po=function(e,t){return function(n,r,i,o){var a,s=n,u=this;if(null==s?a="":Pe(s)&&1===s.length&&(a=s.id()),1===u.length&&a){var l=u[0]._private,c=l.traversalCache=l.traversalCache||{},h=c[t]=c[t]||[],f=gt(a),d=h[f];return d?d:h[f]=e.call(u,n,r,i,o)}return e.call(u,n,r,i,o)}},vo={parent:function Dl(e){var t=[];if(1===this.length){var Dl=this[0]._private.parent;if(Dl)return Dl}for(var n=0;n<this.length;n++){var r=this[n],i=r._private.parent;i&&t.push(i)}return this.spawn(t,{unique:!0}).filter(e)},parents:function Nl(e){for(var Nl=[],t=this.parent();t.nonempty();){for(var n=0;n<t.length;n++){var r=t[n];Nl.push(r)}t=t.parent()}return this.spawn(Nl,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:po(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,o=0;o<i.length;o++)t.push(i[o]);return this.spawn(t,{unique:!0}).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];n.push(i),i.children().nonempty()&&t(i.children())}}var n=[];return t(this.children()),this.spawn(n,{unique:!0}).filter(e)}};vo.forEachDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return p(this,e,t,v)},vo.forEachUp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return p(this,e,t,g)},vo.forEachUpAndDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return p(this,e,t,y)},vo.ancestors=vo.parents;var go,yo;go=yo={data:Ri.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ri.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ri.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ri.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ri.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ri.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},go.attr=go.data,go.removeAttr=go.removeData;var mo=yo,bo={};Je(bo,{degree:m(function(e,t){return t.source().same(t.target())?2:1}),indegree:m(function(e,t){return t.target().same(e)?1:0}),outdegree:m(function(e,t){return t.source().same(e)?1:0})}),Je(bo,{minDegree:b("degree",function(e,t){return e<t}),maxDegree:b("degree",function(e,t){return e>t}),minIndegree:b("indegree",function(e,t){return e<t}),maxIndegree:b("indegree",function(e,t){return e>t}),minOutdegree:b("outdegree",function(e,t){return e<t}),maxOutdegree:b("outdegree",function(e,t){return e>t})}),Je(bo,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var wo,xo,Eo=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var o=i._private.position,a={x:null!=t.x?t.x-o.x:0,y:null!=t.y?t.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.shiftCachedBoundingBox(a)}}},_o={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Eo(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};wo=xo={position:Ri.data(_o),silentPosition:Ri.data(Je({},_o,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Eo(e,t,!0)}})),positions:function(e,t){if(_e(e))t?this.silentPosition(e):this.position(e);else if(xe(e)){var n=e,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o=this[i],a=void 0;(a=n(o,i))&&(t?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(_e(e)?(r=e,n=t):we(e)&&Te(t)&&(r={x:0,y:0},r[e]=t),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),u={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(u):a.position(u)}i.endBatch()}return this},silentShift:function(e,t){return _e(e)?this.shift(e,!0):we(e)&&Te(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=_e(e)?e:void 0,s=void 0!==a||void 0!==t&&we(e);if(n&&n.isNode()){if(!s){var u=n.position();return a=un(u,i,o),void 0===e?a:a[e]}for(var l=0;l<this.length;l++){var c=this[l];void 0!==t?c.position(e,(t-o[e])/i):void 0!==a&&c.position(ln(a,i,o))}}else if(!s)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=_e(e)?e:void 0,o=void 0!==i||void 0!==t&&we(e),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),u=a?n.parent():null,l=u&&u.length>0,c=l;l&&(u=u[0]);var h=c?u.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===e?i:i[e]}for(var f=0;f<this.length;f++){var d=this[f],p=a?d.parent():null,v=p&&p.length>0,g=v;v&&(p=p[0]);var y=g?p.position():{x:0,y:0};void 0!==t?d.position(e,t+y[e]):void 0!==i&&d.position({x:i.x+y.x,y:i.y+y.y})}}else if(!o)return;return this}},wo.modelPosition=wo.point=wo.position,wo.modelPositions=wo.points=wo.positions,wo.renderedPoint=wo.renderedPosition,wo.relativePoint=wo.relativePosition;var So,To,ko=xo;So=To={},To.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},To.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){if(e.isParent()){var t=e._private;t.compoundBoundsClean=!1,t.bbCache=null,e.emitAndNotify("bounds")}}),this):this},To.updateCompoundBounds=function(){function e(e){function t(e,t,n){var r=0,i=0,o=t+n;return e>0&&o>0&&(r=t/o*e,i=n/o*e),{biasDiff:r,biasComplementDiff:i}}function n(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}if(e.isParent()){var r=e._private,i=e.children(),o="include"===e.pstyle("compound-sizing-wrt-labels").value,a={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},s=i.boundingBox({includeLabels:o,includeOverlays:!1,useCache:!1}),u=r.position;0!==s.w&&0!==s.h||(s={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue},s.x1=u.x-s.w/2,s.x2=u.x+s.w/2,s.y1=u.y-s.h/2,s.y2=u.y+s.h/2);var l=a.width.left.value;"px"===a.width.left.units&&a.width.val>0&&(l=100*l/a.width.val);var c=a.width.right.value;"px"===a.width.right.units&&a.width.val>0&&(c=100*c/a.width.val);var h=a.height.top.value;"px"===a.height.top.units&&a.height.val>0&&(h=100*h/a.height.val);var f=a.height.bottom.value;"px"===a.height.bottom.units&&a.height.val>0&&(f=100*f/a.height.val);var d=t(a.width.val-s.w,l,c),p=d.biasDiff,v=d.biasComplementDiff,g=t(a.height.val-s.h,h,f),y=g.biasDiff,m=g.biasComplementDiff;r.autoPadding=n(s.w,s.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),r.autoWidth=Math.max(s.w,a.width.val),u.x=(-p+s.x1+s.x2+v)/2,r.autoHeight=Math.max(s.h,a.height.val),u.y=(-y+s.y1+s.y2+m)/2}}var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return this;if(!t&&n.batching())return this;for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(e(i),n.batching()||(o.compoundBoundsClean=!0))}return this};var Co=function(e){return e===1/0||e===-(1/0)?0:e},Po=function(e,t,n,r,i){r-t!==0&&i-n!==0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2)},Ao=function(e,t){return Po(e,t.x1,t.y1,t.x2,t.y2)},Oo=function(e,t,n){return jt(e,t,n)},Do=function(e,t,n){if(!t.cy().headless()){var r,i,o=t._private,a=o.rstyle,s=a.arrowWidth/2,u=t.pstyle(n+"-arrow-shape").value;if("none"!==u){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},c=l[n]=l[n]||{};c.x1=r-s,c.y1=i-s,c.x2=r+s,c.y2=i+s,c.w=c.x2-c.x1,c.h=c.y2-c.y1,On(c,1),Po(e,c.x1,c.y1,c.x2,c.y2)}}},No=function(e,t,n){if(!t.cy().headless()){var r;r=n?n+"-":"";var i=t._private,o=i.rstyle,a=t.pstyle(r+"label").strValue;if(a){var s,u,l,c,h=t.pstyle("text-halign"),f=t.pstyle("text-valign"),d=Oo(o,"labelWidth",n),p=Oo(o,"labelHeight",n),v=Oo(o,"labelX",n),g=Oo(o,"labelY",n),y=t.pstyle(r+"text-margin-x").pfValue,m=t.pstyle(r+"text-margin-y").pfValue,b=t.isEdge(),w=t.pstyle(r+"text-rotation"),x=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue,_=E/2,S=t.pstyle("text-background-padding").pfValue,T=p+2*S,k=d+2*S,C=k/2,P=T/2;if(b)s=v-C,u=v+C,l=g-P,c=g+P;else{switch(h.value){case"left":s=v-k,u=v;break;case"center":s=v-C,u=v+C;break;case"right":s=v,u=v+k}switch(f.value){case"top":l=g-T,c=g;break;case"center":l=g-P,c=g+P;break;case"bottom":l=g,c=g+T}}s+=y-Math.max(x,_),u+=y+Math.max(x,_),l+=m-Math.max(x,_),c+=m+Math.max(x,_);var A=n||"main",O=i.labelBounds,D=O[A]=O[A]||{};D.x1=s,D.y1=l,D.x2=u,D.y2=c,D.w=u-s,D.h=c-l,On(D,1);var N=b&&"autorotate"===w.strValue,M=null!=w.pfValue&&0!==w.pfValue;if(N||M){var I=N?Oo(i.rstyle,"labelAngle",n):w.pfValue,L=Math.cos(I),R=Math.sin(I),B=(s+u)/2,j=(l+c)/2,q=function(e,t){return e-=B,t-=j,{x:e*L-t*R+B,y:e*R+t*L+j}},F=q(s,l),z=q(s,c),V=q(u,l),U=q(u,c);s=Math.min(F.x,z.x,V.x,U.x),u=Math.max(F.x,z.x,V.x,U.x),l=Math.min(F.y,z.y,V.y,U.y),c=Math.max(F.y,z.y,V.y,U.y)}Po(e,s,l,u,c),Po(i.labelBounds.all,s,l,u,c)}return e}},Mo=function(e,t){var n,r,i,o,a,s,u=e._private.cy,l=u.styleEnabled(),c=u.headless(),h=kn(),f=e._private,d=l?e.pstyle("display").value:"element",p=e.isNode(),v=e.isEdge(),g="none"!==d,y=f.rstyle;if(g){var m=0,b=0;l&&t.includeOverlays&&(m=e.pstyle("overlay-opacity").value,0!==m&&(b=e.pstyle("overlay-padding").value));var w=0,x=0;if(l&&(w=e.pstyle("width").pfValue,x=w/2),p&&t.includeNodes){var E=e.position();a=E.x,s=E.y;var _=e.outerWidth(),S=_/2,T=e.outerHeight(),k=T/2;n=a-S,r=a+S,i=s-k,o=s+k,Po(h,n,i,r,o)}else if(v&&t.includeEdges)if(l&&!c&&(n=Math.min(y.srcX,y.midX,y.tgtX),r=Math.max(y.srcX,y.midX,y.tgtX),i=Math.min(y.srcY,y.midY,y.tgtY),o=Math.max(y.srcY,y.midY,y.tgtY),n-=x,r+=x,i-=x,o+=x,Po(h,n,i,r,o)),l&&!c&&"haystack"===e.pstyle("curve-style").strValue){var C=y.haystackPts||[];if(n=C[0].x,i=C[0].y,r=C[1].x,o=C[1].y,n>r){var P=n;n=r,r=P}if(i>o){var A=i;i=o,o=A}Po(h,n-x,i-x,r+x,o+x)}else{for(var O=y.bezierPts||y.linePts||[],D=0;D<O.length;D++){var N=O[D];n=N.x-x,r=N.x+x,i=N.y-x,o=N.y+x,Po(h,n,i,r,o)}if(0===O.length){var M=e.source(),I=M.position(),L=e.target(),R=L.position();if(n=I.x,r=R.x,i=I.y,o=R.y,n>r){var B=n;n=r,r=B}if(i>o){var j=i;i=o,o=j}n-=x,r+=x,i-=x,o+=x,Po(h,n,i,r,o)}}if(l&&t.includeEdges&&v&&(Do(h,e,"mid-source",t),Do(h,e,"mid-target",t),Do(h,e,"source",t),Do(h,e,"target",t)),l){var q="yes"===e.pstyle("ghost").value;if(q){var F=e.pstyle("ghost-offset-x").pfValue,z=e.pstyle("ghost-offset-y").pfValue;Po(h,h.x1+F,h.y1+z,h.x2+F,h.y2+z)}}var V=f.bodyBounds=f.bodyBounds||{};Dn(V,h),On(V,1),l&&(n=h.x1,r=h.x2,i=h.y1,o=h.y2,Po(h,n-b,i-b,r+b,o+b));var U=f.overlayBounds=f.overlayBounds||{};Dn(U,h),On(U,1);var X=f.labelBounds=f.labelBounds||{};if(null!=X.all?Cn(X.all):X.all=kn(),l&&t.includeLabels){No(h,e,null,t),v&&(No(h,e,"source",t),No(h,e,"target",t));var H=X.all;H.w=H.x2-H.x1,H.h=H.y2-H.y1}}return h.x1=Co(h.x1),h.y1=Co(h.y1),h.x2=Co(h.x2),h.y2=Co(h.y2),h.w=Co(h.x2-h.x1),h.h=Co(h.y2-h.y1),On(h,h.w>0&&h.h>0&&g?1:0),h},Io=function(e){var t=0,n=function(e){return(e?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeOverlays)},Lo=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=function(e){return Math.round(e)};return vt([t.x,t.y,n.x,n.y].map(r))}return 0},Ro=function(e,t){var n,r=e._private,i=null==t?jo:Io(t),o=i===jo,a=Lo(e),s=t.useCache&&r.bbCachePosKey===a,u=!s||null==r.bbCache;if(u?(n=Mo(e,Bo),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=a):n=r.bbCache,!u&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var l=Nn,c=r.bbCacheShift,h=function(e,t){null!=e&&l(e,t)};l(n,c);var f=r.bodyBounds,d=r.overlayBounds,p=r.labelBounds,v=r.arrowBounds;h(f,c),h(d,c),null!=v&&(h(v.source,c),h(v.target,c),h(v["mid-source"],c),h(v["mid-target"],c)),null!=p&&(h(p.main,c),h(p.all,c),h(p.source,c),h(p.target,c))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!o){var g=e.isNode();n=kn(),(t.includeNodes&&g||t.includeEdges&&!g)&&(t.includeOverlays?Ao(n,r.overlayBounds):Ao(n,r.bodyBounds)),t.includeLabels&&Ao(n,r.labelBounds.all),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Bo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},jo=Io(Bo),qo=It(Bo);To.boundingBox=function(e){if(1===this.length&&null!=this[0]._private.bbCache&&(void 0===e||void 0===e.useCache||e.useCache===!0))return e=void 0===e?Bo:qo(e),Ro(this[0],e);var t=kn();e=e||Bo;var n=qo(e),r=this,i=r.cy(),o=i.styleEnabled();o&&this.recalculateRenderedStyle(n.useCache),this.updateCompoundBounds();for(var a=0;a<r.length;a++){var s=r[a];Ao(t,Ro(s,n))}return t.x1=Co(t.x1),t.y1=Co(t.y1),t.x2=Co(t.x2),t.y2=Co(t.y2),t.w=Co(t.x2-t.x1),t.h=Co(t.y2-t.y1),t},To.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCacheShift.x=t.bbCacheShift.y=0,t.bbCachePosKey=null}return this.emitAndNotify("bounds"),this},To.shiftCachedBoundingBox=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n._private,i=r.bbCache;null!=i&&(r.bbCacheShift.x+=e.x,r.bbCacheShift.y+=e.y)}return this.emitAndNotify("bounds"),this},To.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(t=t.filter(function(e){return!e.isParent()})),_e(e)){var i=e;e=function(){return i}}var o=function(t,n){return t._private.bbAtOldPos=e(t,n)},a=function(e){return e._private.bbAtOldPos};n.startBatch(),t.forEach(o).silentPositions(e),r&&this.updateCompoundBounds(!0);var s=this.boundingBox({useCache:!1});return t.silentPositions(a),n.endBatch(),s},So.boundingbox=So.bb=So.boundingBox,So.renderedBoundingbox=So.renderedBoundingBox;var Fo,zo,Vo=To;Fo=zo={};var Uo=function(e){e.uppercaseName=Ue(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ue(e.outerName),Fo[e.name]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(!i)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var o=t.pstyle(e.name);switch(o.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return o.pfValue}}},Fo["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(i){var o=t[e.name](),a=t.pstyle("border-width").pfValue,s=2*t.padding();return o+a+s}return 1}},Fo["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},Fo["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};Uo({name:"width"}),Uo({name:"height"}),zo.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};var Xo=zo,Ho=function(e,t){if(e.isEdge())return t(e)},Yo=function(e,t){if(e.isEdge()){var n=e.cy();return un(t(e),n.zoom(),n.pan())}},Wo=function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(e){return un(e,i,r)})}},Go=function(e){return e.renderer().getControlPoints(e)},Ko=function(e){return e.renderer().getSegmentPoints(e)},Zo=function(e){return e.renderer().getSourceEndpoint(e)},$o=function(e){return e.renderer().getTargetEndpoint(e)},Qo=function(e){return e.renderer().getEdgeMidpoint(e)},Jo={controlPoints:{get:Go,mult:!0},segmentPoints:{get:Ko,mult:!0},sourceEndpoint:{get:Zo},targetEndpoint:{get:$o},midpoint:{get:Qo}},ea=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},ta=Object.keys(Jo).reduce(function(e,t){var n=Jo[t],r=ea(t);return e[t]=function(){return Ho(this,n.get)},n.mult?e[r]=function(){return Wo(this,n.get)}:e[r]=function(){return Yo(this,n.get)},e},{}),na=Je({},ko,Vo,Xo,ta),ra=function(e,t){this.recycle(e,t)};ra.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=w,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?x:w):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=x;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=x;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=x,this.stopPropagation()},isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w};var ia=/^([^.]+)(\.(?:[^.]+))?$/,oa=".*",aa={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},sa=Object.keys(aa),ua=E.prototype,la=function(e,t,n,r,i,o,a){xe(r)&&(i=r,r=null),a&&(o=null==o?a:Je({},o,a));for(var s=n.split(/\s+/),u=0;u<s.length;u++){var l=s[u];if(!Ie(l)){var c=l.match(ia);if(c){var h=c[1],f=c[2]?c[2]:null,d=t(e,l,h,f,r,i,o);if(d===!1)break}}}},ca=function(e,t){return e.addEventFields(e.context,t),new ra(t.type,t)},ha=function(e,t,n){if(Me(n))return void t(e,n);if(_e(n))return void t(e,ca(e,n));for(var r=n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!Ie(o)){var a=o.match(ia);if(a){var s=a[1],u=a[2]?a[2]:null,l=ca(e,{type:s,namespace:u,target:e.context});t(e,l)}}}};ua.on=ua.addListener=function(e,t,n,r,i){return la(this,function(e,t,n,r,i,o,a){xe(o)&&e.listeners.push({event:t,callback:o,type:n,namespace:r,qualifier:i,conf:a})},e,t,n,r,i),this},ua.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},ua.removeListener=ua.off=function(e,t,n,r){var i=this;0!==this.emitting&&(this.listeners=Ot(this.listeners));for(var o=this.listeners,a=function(a){var s=o[a];la(i,function(e,t,n,r,i,u){if(s.type===n&&(!r||s.namespace===r)&&(!i||e.qualifierCompare(s.qualifier,i))&&(!u||s.callback===u))return o.splice(a,1),!1},e,t,n,r)},s=o.length-1;s>=0;s--)a(s);return this},ua.emit=ua.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,Ee(t)||(t=[t]),ha(this,function(e,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var a=function(n){var i=r[n];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||i.namespace===oa)&&e.eventMatches(e.context,i,o)){var a=[o];null!=t&&Bt(a,t),e.beforeEmit(e.context,i,o),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==i}));var s=e.callbackContext(e.context,i,o),u=i.callback.apply(s,a);e.afterEmit(e.context,i,o),u===!1&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);e.bubble(e.context)&&!o.isPropagationStopped()&&e.parent(e.context).emit(o,t)},e),this.emitting--,this};var fa={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&Ae(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},da=function(e){return we(e)?new co(e):e},pa={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new E(fa,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().on(e,da(t),n)}return this},removeListener:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().removeListener(e,da(t),n)}return this},one:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().one(e,da(t),n)}return this},once:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().on(e,da(t),n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};Ri.eventAliasesOn(pa);var va={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.merge(r):t.merge(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(we(e)||Pe(e))return new co(e).filter(this);if(xe(e)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a&&n.merge(o)}return n}return this.spawn()},not:function(e){if(e){we(e)&&(e=this.filter(e));for(var t=[],n=e._private.map,r=0;r<this.length;r++){var i=this[r],o=n.has(i.id());o||t.push(i)}return this.spawn(t)}return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(we(e)){var t=e;return this.filter(t)}for(var n=[],r=this,i=e,o=this.length<e.length,a=o?i._private.map:r._private.map,s=o?r:i,u=0;u<s.length;u++){var l=s[u]._private.data.id,c=a.get(l);c&&n.push(c.ele)}return this.spawn(n)},xor:function(e){var t=this._private.cy;we(e)&&(e=t.$(e));var n=[],r=this,i=e,o=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=t.hasElementWithId(o);a||n.push(i)}};return o(r,i),o(i,r),this.spawn(n)},diff:function(e){var t=this._private.cy;we(e)&&(e=t.$(e));var n=[],r=[],i=[],o=this,a=e,s=function(e,t,n){for(var r=0;r<e.length;r++){var o=e[r],a=o._private.data.id,s=t.hasElementWithId(a);s?i.push(o):n.push(o)}};return s(o,a,n),s(a,o,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function Ml(e){var t=this._private.cy;if(!e)return this;if(we(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var o=this._private.map,a=0;a<e.length;a++){var Ml=!o.has(e[a].id());Ml&&r.push(e[a])}return this.spawn(r)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&we(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,o=0;o<e.length;o++){var a=e[o],s=a._private.data.id,u=!i.has(s);if(u){var l=this.length++;this[l]=a,i.set(s,{ele:a,index:l})}else{var c=i.get(s).index;this[c]=a,i.set(s,{ele:a,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),r=this._private,i=r.map;this[e]=void 0,i["delete"](n);var o=e===this.length-1;if(this.length>1&&!o){var a=this.length-1,s=this[a],u=s._private.data.id;this[a]=void 0,this[e]=s,i.set(u,{ele:s,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,i=r.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&we(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=this,i=0;i<r.length;i++)n=e(n,r[i],i,r);return n},max:function Il(e,t){for(var n,Il=-(1/0),r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a>Il&&(Il=a,n=o)}return{value:Il,ele:n}},min:function Ll(e,t){for(var n,Ll=1/0,r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a<Ll&&(Ll=a,n=o)}return{value:Ll,ele:n}}},ga=va;ga.u=ga["|"]=ga["+"]=ga.union=ga.or=ga.add,ga["\\"]=ga["!"]=ga["-"]=ga.difference=ga.relativeComplement=ga.subtract=ga.not,ga.n=ga["&"]=ga["."]=ga.and=ga.intersection=ga.intersect,ga["^"]=ga["(+)"]=ga["(-)"]=ga.symmetricDifference=ga.symdiff=ga.xor,ga.fnFilter=ga.filterFn=ga.stdFilter=ga.filter,ga.complement=ga.abscomp=ga.absoluteComplement;var ya={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},ma=function(e,t){function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?o?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?xt:0}function r(e){var t=e.pstyle("z-index-compare");return"auto"===t.value&&e.isNode()?1:0}var i=e.cy(),o=i.hasCompoundNodes(),a=n(e)-n(t);if(0!==a)return a;var s=r(e)-r(t);if(0!==s)return s;var u=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==u?u:e.poolIndex()-t.poolIndex()},ba={forEach:function(e,t){if(xe(e))for(var n=0;n<this.length;n++){var r=this[n],i=t?e.apply(t,[r,n,this]):e(r,n,this);if(i===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!xe(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(ma)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if("nodes"===n){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:xt-1}var i=t.source,o=t.target,a=i.zDepth(),s=o.zDepth();return Math.max(a,s,0)}}};ba.each=ba.forEach;var wa=It({nodeDimensionsIncludeLabels:!1}),xa={layoutDimensions:function(e){if(e=wa(e),e.nodeDimensionsIncludeLabels){var t=this.boundingBox();return{w:t.w,h:t.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(e,t,n){var r=this.nodes(),i=this.cy(),o=t.eles,a=function(e,t){return e.id()+"$"+t},s=qe(n,a);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(e,t,n){var r={x:t.x1+t.w/2,y:t.y1+t.h/2},i={x:(n.x-r.x)*e,y:(n.y-r.y)*e};return{x:r.x+i.x,y:r.y+i.y}},l=t.spacingFactor&&1!==t.spacingFactor,c=function(){if(!l)return null;for(var e=kn(),t=0;t<r.length;t++){var n=r[t],i=s(n,t);An(e,i.x,i.y)}return e},h=c(),f=qe(function(e,n){var r=s(e,n);if(l){var i=Math.abs(t.spacingFactor);r=u(i,h,r)}return null!=t.transform&&(r=t.transform(e,r)),r},a);if(t.animate){for(var d=0;d<r.length;d++){var p=r[d],v=f(p,d),g=null==t.animateFilter||t.animateFilter(p,d);if(g){var y=p.animation({position:v,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else p.position(v)}if(t.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m);
}else if(void 0!==t.zoom&&void 0!==t.pan){var b=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Oi.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(f),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(Je({},e,{eles:this}))}};xa.createLayout=xa.makeLayout=xa.layout;var Ea={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(e){return e._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(e){t(e),e.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),i=t.style(),o=this;e=!(!e&&void 0!==e),r&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=i.apply(o);return e?a.emitAndNotify("style"):a.emit("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=!(!e&&void 0!==e),!t.styleEnabled())return this;var r=n.updateMappers(this);return e?r.emitAndNotify("style"):r.emit("style"),this},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[e];return null!=i?i:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function Rl(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,Rl=n.style();if(_e(e)){var i=e;Rl.applyBypass(this,i,r),this.emitAndNotify("style")}else if(we(e)){if(void 0===t){var o=this[0];return o?Rl.getStylePropertyValue(o,e):void 0}Rl.applyBypass(this,e,t,r),this.emitAndNotify("style")}else if(void 0===e){var a=this[0];return a?Rl.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var s=0;s<i.length;s++){var u=i[s];r.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}},_a=S("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});Ea.takesUpSpace=T("takesUpSpace",C({ok:_a}));var Sa=S("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&_a(e)}),Ta=S("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&_a(e)});Ea.interactive=T("interactive",C({ok:Sa,parentOk:Ta,edgeOkViaNode:_a})),Ea.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var ka=S("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&_a(e)}),Ca=_a;Ea.visible=T("visible",C({ok:ka,edgeOkViaNode:Ca})),Ea.hidden=function(){var e=this[0];if(e)return!e.visible()},Ea.bypass=Ea.css=Ea.style,Ea.renderedCss=Ea.renderedStyle,Ea.removeBypass=Ea.removeCss=Ea.removeStyle,Ea.pstyle=Ea.parsedStyle;var Pa={};A({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),A({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),A({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),A({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Pa.deselect=Pa.unselect,Pa.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},A({field:"active",on:"activate",off:"unactivate"}),Pa.inactive=function(){var e=this[0];if(e)return!e._private.active};var Aa={},Oa=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),h=l.target();if(e.noIncomingEdges&&h===o&&c!==o||e.noOutgoingEdges&&c===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,{unique:!0}).filter(t)}},Da=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),s=0;s<a.length;s++){var u=a[s],l=u.source(),c=u.target();e.outgoing&&l===o?(r.push(u),r.push(c)):e.incoming&&c===o&&(r.push(u),r.push(l))}}return this.spawn(r,{unique:!0}).filter(t)}},Na=function(e){return function(t){for(var n=this,r=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(t)}};Aa.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},Je(Aa,{roots:Oa({noIncomingEdges:!0}),leaves:Oa({noOutgoingEdges:!0}),outgoers:po(Da({outgoing:!0}),"outgoers"),successors:Na({outgoing:!0}),incomers:po(Da({incoming:!0}),"incomers"),predecessors:Na({incoming:!0})}),Je(Aa,{neighborhood:po(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),Aa.neighbourhood=Aa.neighborhood,Aa.closedNeighbourhood=Aa.closedNeighborhood,Aa.openNeighbourhood=Aa.openNeighborhood,Je(Aa,{source:po(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:po(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:O({attr:"source"}),targets:O({attr:"target"})}),Je(Aa,{edgesWith:po(D(),"edgesWith"),edgesTo:po(D({thisIsSrc:!0}),"edgesTo")}),Je(Aa,{connectedEdges:po(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];t.push(s)}}return this.spawn(t,{unique:!0}).filter(e)},"connectedEdges"),connectedNodes:po(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},"connectedNodes"),parallelEdges:po(N(),"parallelEdges"),codirectedEdges:po(N({codirected:!0}),"codirectedEdges")}),Je(Aa,{components:function Bl(){var e=this,t=e.cy(),n=e.spawn(),r=e.nodes().spawnSelf(),Bl=[],i=function(e,t){n.merge(e),r.unmerge(e),t.merge(e)};if(r.empty())return e.spawn();var o=function(){var n=t.collection();Bl.push(n);var o=r[0];i(o,n),e.bfs({directed:!1,roots:o,visit:function(e,t,r,o,a){i(e,n)}})};do o();while(r.length>0);return Bl.map(function(e){var t=e.connectedEdges().stdFilter(function(t){return e.anySame(t.source())&&e.anySame(t.target())});return e.union(t)})}});var Ma={generate:function(e,t,n){for(var r=null!=n?n:Dt();e.hasElementWithId(r);)r=Dt();return r}},Ia=function(e,t,n){if(void 0===e||!De(e))return void kt("A collection must have a reference to the core");var r=new zt,i=!1;if(t){if(t.length>0&&_e(t[0])&&!Ae(t[0])){i=!0;for(var o=[],a=new Xt,s=0,u=t.length;s<u;s++){var l=t[s];null==l.data&&(l.data={});var c=l.data;if(null==c.id)c.id=Ma.generate(e,l);else if(e.hasElementWithId(c.id)||a.has(c.id))continue;var h=new Ht(e,l,(!1));o.push(h),a.add(c.id)}t=o}}else t=[];this.length=0;for(var f=0,d=t.length;f<d;f++){var p=t[f];if(null!=p){var v=p._private.data.id;(null==n||n.unique&&!r.has(v))&&(r.set(v,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:e,map:r},i&&this.restore()},La=Ht.prototype=Ia.prototype;La.instanceString=function(){return"collection"},La.spawn=function(e,t,n){return De(e)||(n=t,t=e,e=this.cy()),new Ia(e,t,n)},La.spawnSelf=function(){return this.spawn(this)},La.cy=function(){return this._private.cy},La.renderer=function(){return this._private.cy.renderer()},La.element=function(){return this[0]},La.collection=function(){return Oe(this)?this:new Ia(this._private.cy,[this])},La.unique=function(){return new Ia(this._private.cy,this,{unique:!0})},La.hasElementWithId=function(e){return this._private.map.has(e)},La.getElementById=function(e){var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new Ia(t)},La.$id=La.getElementById,La.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index},La.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},La.indexOfId=function(e){return this._private.map.get(e).index},La.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(_e(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var o=!1,a={},s=e.data.source,u=e.data.target;null!=s&&s!==i.source&&(a.source=s,o=!0),null!=u&&u!==i.target&&(a.target=u,o=!0),o&&(t=t.move(a))}else{var l=e.data.parent;null==l&&null==i.parent||l===i.parent||(void 0===l&&(l=null),t=t.move({parent:l}))}}e.position&&t.position(e.position);var c=function(n,i,o){var a=e[n];null!=a&&a!==r[n]&&(a?t[i]():t[o]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var h={data:At(r.data),position:At(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,classes:null};h.classes="";var f=0;return r.classes.forEach(function(e){return h.classes+=0===f++?e:" "+e}),h}}},La.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},La.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new Ht(e,i,(!1));t.push(o)}return new Ia(e,t)},La.copy=La.clone,La.restore=function(e){var t=this,n=t.cy(),r=n._private;void 0===e&&(e=!0);for(var i,o=[],a=[],s=0,u=t.length;s<u;s++){var l=t[s];l.removed()&&(l.isNode()?o.push(l):a.push(l))}i=o.concat(a);var c,h=function(){i.splice(c,1),c--};for(c=0;c<i.length;c++){var f=i[c],d=f._private,p=d.data;if(f.clearTraversalCache(),void 0===p.id)p.id=Ma.generate(n,f);else if(Te(p.id))p.id=""+p.id;else{if(Ie(p.id)||!we(p.id)){kt("Can not create element with invalid string ID `"+p.id+"`"),h();continue}if(n.hasElementWithId(p.id)){kt("Can not create second element with ID `"+p.id+"`"),h();continue}}var v=p.id;if(f.isNode()){var g=d.position;null==g.x&&(g.x=0),null==g.y&&(g.y=0)}if(f.isEdge()){for(var y=f,m=["source","target"],b=m.length,w=!1,x=0;x<b;x++){var E=m[x],_=p[E];Te(_)&&(_=p[E]=""+p[E]),null==_||""===_?(kt("Can not create edge `"+v+"` with unspecified "+E),w=!0):n.hasElementWithId(_)||(kt("Can not create edge `"+v+"` with nonexistant "+E+" `"+_+"`"),w=!0)}if(w){h();continue}var S=n.getElementById(p.source),T=n.getElementById(p.target);S._private.edges.push(y),T._private.edges.push(y),y._private.source=S,y._private.target=T}d.map=new zt,d.map.set(v,{ele:f,index:0}),d.removed=!1,n.addToPool(f)}for(var k=0;k<o.length;k++){var C=o[k],P=C._private.data;Te(P.parent)&&(P.parent=""+P.parent);var A=P.parent,O=null!=A;if(O){var D=n.getElementById(A);if(D.empty())P.parent=void 0;else{for(var N=!1,M=D;!M.empty();){if(C.same(M)){N=!0,P.parent=void 0;break}M=M.parent()}N||(D[0]._private.children.push(C),C._private.parent=D[0],r.hasCompoundNodes=!0)}}}if(i.length>0){for(var I=new Ia(n,i),L=0;L<I.length;L++){var R=I[L];R.isNode()||(R.parallelEdges().clearTraversalCache(),R.source().clearTraversalCache(),R.target().clearTraversalCache())}var B;B=r.hasCompoundNodes?n.collection().merge(I).merge(I.connectedNodes()).merge(I.parent()):I,B.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?I.emitAndNotify("add"):I.emit("add")}return t},La.removed=function(){var e=this[0];return e&&e._private.removed},La.inside=function(){var e=this[0];return e&&!e._private.removed},La.remove=function(e){function t(e){for(var t=e._private.edges,n=0;n<t.length;n++)r(t[n])}function n(e){for(var t=e._private.children,n=0;n<t.length;n++)r(t[n])}function r(e){var r=c[e.id()];e.removed()||r||(c[e.id()]=!0,e.isNode()?(l.push(e),t(e),n(e)):l.unshift(e))}function i(e,t){var n=e._private.edges;Lt(n,t),e.clearTraversalCache()}function o(e){e.parallelEdges().clearTraversalCache()}function a(e,t){t=t[0],e=e[0];var n=e._private.children,r=e.id();Lt(n,t),v.ids[r]||(v.ids[r]=!0,v.push(e))}var s=this,u=[],l=[],c={},h=s._private.cy;void 0===e&&(e=!0);for(var f=0,d=s.length;f<d;f++){var p=s[f];r(p)}var v=[];v.ids={},s.dirtyCompoundBoundsCache(),h.removeFromPool(l);for(var g=0;g<l.length;g++){var y=l[g];if(y._private.removed=!0,u.push(y),y.isEdge()){var m=y.source()[0],b=y.target()[0];i(m,y),i(b,y),o(y)}else{var w=y.parent();0!==w.length&&a(w,y)}}var x=h._private.elements;h._private.hasCompoundNodes=!1;for(var E=0;E<x.length;E++){var _=x[E];if(_.isParent()){h._private.hasCompoundNodes=!0;break}}var S=new Ia(this.cy(),u);S.size()>0&&(e?S.emitAndNotify("remove"):S.emit("remove"));for(var T=0;T<v.length;T++){var k=v[T];k.removed()||k.updateStyle()}return new Ia(h,u)},La.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.hasElementWithId(n),o=t.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],l=this[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r),u.scratch=l._private.scratch)}return t.add(a)}}else if(void 0!==e.parent){var c=e.parent,h=null===c||t.hasElementWithId(c);if(h){var f=this.jsons(),d=this.descendants(),p=d.union(d.union(this).connectedEdges()).jsons();this.remove();for(var v=0;v<f.length;v++){var g=f[v],y=this[v];"nodes"===g.group&&(g.data.parent=null===c?void 0:c,g.scratch=y._private.scratch)}return t.add(f.concat(p))}}return this},[wi,Bi,ji,fo,vo,mo,bo,na,pa,va,ya,ba,xa,Ea,Pa,Aa].forEach(function(e){Je(La,e)});var Ra={add:function(e){var t,n=this;if(Pe(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}t=new Ia(n,i)}}else if(Ee(e)){var s=e;t=new Ia(n,s)}else if(_e(e)&&(Ee(e.nodes)||Ee(e.edges))){for(var u=e,l=[],c=["nodes","edges"],h=0,f=c.length;h<f;h++){var d=c[h],p=u[d];if(Ee(p))for(var v=0,g=p.length;v<g;v++){var y=Je({group:d},p[v]);l.push(y)}}t=new Ia(n,l)}else{var m=e;t=new Ht(n,m).collection()}return t},remove:function(e){if(Pe(e));else if(we(e)){var t=e;e=this.$(t)}return e.remove()}},Ba=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,u.tension=e,u.friction=t,o=null!==i,o?(c=r(e,t),a=c/i*f):a=f;s=n(s||u,a),l.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return o?function(e){return l[e*(l.length-1)|0]}:c}}(),ja=function(e,t,n,r){var i=M(e,t,n,r);return function(e,t,n){return e+(t-e)*i(n)}},qa={linear:function(e,t,n){return e+(t-e)*n},ease:ja(.25,.1,.25,1),"ease-in":ja(.42,0,1,1),"ease-out":ja(0,0,.58,1),"ease-in-out":ja(.42,0,.58,1),"ease-in-sine":ja(.47,0,.745,.715),"ease-out-sine":ja(.39,.575,.565,1),"ease-in-out-sine":ja(.445,.05,.55,.95),"ease-in-quad":ja(.55,.085,.68,.53),"ease-out-quad":ja(.25,.46,.45,.94),"ease-in-out-quad":ja(.455,.03,.515,.955),"ease-in-cubic":ja(.55,.055,.675,.19),"ease-out-cubic":ja(.215,.61,.355,1),"ease-in-out-cubic":ja(.645,.045,.355,1),"ease-in-quart":ja(.895,.03,.685,.22),"ease-out-quart":ja(.165,.84,.44,1),"ease-in-out-quart":ja(.77,0,.175,1),"ease-in-quint":ja(.755,.05,.855,.06),"ease-out-quint":ja(.23,1,.32,1),"ease-in-out-quint":ja(.86,0,.07,1),"ease-in-expo":ja(.95,.05,.795,.035),"ease-out-expo":ja(.19,1,.22,1),"ease-in-out-expo":ja(1,0,0,1),"ease-in-circ":ja(.6,.04,.98,.335),"ease-out-circ":ja(.075,.82,.165,1),"ease-in-out-circ":ja(.785,.135,.15,.86),spring:function jl(e,t,n){if(0===n)return qa.linear;var jl=Ba(e,t,n);return function(e,t,n){return e+(t-e)*jl(n)}},"cubic-bezier":ja},Fa={animate:Ri.animate(),animation:Ri.animation(),animated:Ri.animated(),clearQueue:Ri.clearQueue(),delay:Ri.delay(),delayAnimation:Ri.delayAnimation(),stop:Ri.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function e(){t._private.animationsRunning&&ht(function(n){F(n,t),e()})}var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var n=t.renderer();n&&n.beforeRender?n.beforeRender(function(e,n){F(n,t)},n.beforeRenderPriorities.animations):e()}}},za={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&Ae(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},Va=function(e){return we(e)?new co(e):e},Ua={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new E(za,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Va(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Va(t),n),this},one:function(e,t,n){return this.emitter().one(e,Va(t),n),this},once:function(e,t,n){return this.emitter().one(e,Va(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Ri.eventAliasesOn(Ua);var Xa={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Xa.jpeg=Xa.jpg;var Ha={layout:function ql(e){var t=this;if(null==e)return void kt("Layout options must be specified to make a layout");if(null==e.name)return void kt("A `name` must be specified to make a layout");var n=e.name,r=t.extension("layout",n);if(null==r)return void kt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");var i;i=we(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var ql=new r(Je({},e,{cy:t,eles:i}));return ql}};Ha.createLayout=Ha.makeLayout=Ha.layout;var Ya={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();return void(null!=t&&r.merge(t))}if(n.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i],a=t.getElementById(i);a.data(o)}})}},Wa={renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(null==n)return void kt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));var r={motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1},i=Je({},r,e,{cy:t,wheelSensitivity:Te(e.wheelSensitivity)&&e.wheelSensitivity>0?e.wheelSensitivity:r.wheelSensitivity,pixelRatio:Te(e.pixelRatio)&&e.pixelRatio>0?e.pixelRatio:r.pixelRatio});t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Wa.invalidateDimensions=Wa.resize;var Ga={collection:function(e,t){return we(e)?this.$(e):Pe(e)?e.collection():Ee(e)?new Ia(this,e,t):new Ia(this)},nodes:function Fl(e){var Fl=this.$(function(e){return e.isNode()});return e?Fl.filter(e):Fl},edges:function zl(e){var zl=this.$(function(e){return e.isEdge()});return e?zl.filter(e):zl},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Ga.elements=Ga.filter=Ga.$;var Ka={},Za="t",$a="f";Ka.apply=function(e){var t=this,n=t._private,r=n.cy,i=r.collection();n.newStyle&&(n.contextStyles={},n.propDiffs={},t.cleanElements(e,!0));for(var o=0;o<e.length;o++){var a=e[o],s=t.getContextMeta(a);if(!s.empty){var u=t.getContextStyle(s),l=t.applyContextStyle(s,u,a);n.newStyle||t.updateTransitions(a,l.diffProps);var c=t.updateStyleHints(a);c&&i.merge(a)}}return n.newStyle=!1,i},Ka.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c=e[u]===Za,h=t[u]===Za,f=c!==h,d=l.mappedProperties.length>0;if(f||d){var p=void 0;f&&d?p=l.properties:f?p=l.properties:d&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var w=n[b],x=t[b]===Za;if(x&&(m=null!=w.properties[g.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},Ka.getContextMeta=function(e){var t,n=this,r="",i=e._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o],s=a.selector&&a.selector.matches(e);r+=s?Za:$a}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t,empty:0===t.length}},Ka.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},o=0;o<n.length;o++){var a=n[o],s=t[o]===Za;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return r[t]=i,i},Ka.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=t[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,"delete":!0}}if(l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n.pstyle(s),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},Ka.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(e,t,r){return n.getPropertiesHash(e,t,r)},a=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,u=e._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];t.styleKeys[c]=0}for(var h=function(e,n){return t.styleKeys[n]=pt(e,t.styleKeys[n])},f=0;f<r.length;f++){var d=r[f],p=u[d];if(null!=p){var v=this.properties[d],g=v.type,y=v.groupKey;if(g.number){var m=null!=p.pfValue?p.pfValue:p.value;if(g.multiple)for(var b=0;b<m.length;b++)h(m[b],y);else h(m,y)}else for(var w=p.strValue,x=0;x<w.length;x++)h(w.charCodeAt(x),y)}}for(var E=0,_=0;_<i.length;_++){var S=i[_],T=t.styleKeys[S];E=pt(T,E)}t.styleKey=E;var k=t.labelDimsKey=t.styleKeys.labelDimensions;if(t.labelKey=o(e,["label"],k),t.labelStyleKey=pt(t.styleKeys.commonLabel,t.labelKey),s||(t.sourceLabelKey=o(e,["source-label"],k),t.sourceLabelStyleKey=pt(t.styleKeys.commonLabel,t.sourceLabelKey),t.targetLabelKey=o(e,["target-label"],k),t.targetLabelStyleKey=pt(t.styleKeys.commonLabel,t.targetLabelKey)),s){var C=t.styleKeys,P=C.nodeBody,A=C.nodeBorder,O=C.backgroundImage,D=C.compound,N=C.pie;t.nodeKey=vt([A,O,D,N],P),t.hasPie=0!=N}return a!==t.styleKey},Ka.clearStyleHints=function(e){var t=e._private;t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},Ka.applyParsedProperty=function(e,t){var n,r=this,i=t,o=e._private.style,a=r.types,s=r.properties[i.name].type,u=i.bypass,l=o[i.name],c=l&&l.bypass,h=e._private,f="mapping",d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},p=function(){var t=d(l),n=d(i);r.checkTriggers(e,i.name,t,n)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",u)),i["delete"])return o[i.name]=void 0,p(),!0;if(i.deleteBypassed)return l?!!l.bypass&&(l.bypassed=void 0,p(),!0):(p(),!0);if(i.deleteBypass)return l?!!l.bypass&&(o[i.name]=l.bypassed,p(),!0):(p(),!0);var v=function(){Ct("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var g=i.field.split("."),y=h.data,m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(null==y)return v(),!1;var w;if(!Te(y))return Ct("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+y+"` for `"+e.id()+"` is non-numeric)"),!1;var x=i.fieldMax-i.fieldMin;if(w=0===x?0:(y-i.fieldMin)/x,w<0?w=0:w>1&&(w=1),s.color){var E=i.valueMin[0],_=i.valueMax[0],S=i.valueMin[1],T=i.valueMax[1],k=i.valueMin[2],C=i.valueMax[2],P=null==i.valueMin[3]?1:i.valueMin[3],A=null==i.valueMax[3]?1:i.valueMax[3],O=[Math.round(E+(_-E)*w),Math.round(S+(T-S)*w),Math.round(k+(C-k)*w),Math.round(P+(A-P)*w)];n={bypass:i.bypass,name:i.name,value:O,strValue:"rgb("+O[0]+", "+O[1]+", "+O[2]+")"}}else{if(!s.number)return!1;var D=i.valueMin+(i.valueMax-i.valueMin)*w;n=this.parse(i.name,D,i.bypass,f)}if(!n)return v(),!1;n.mapping=i,i=n;break;case a.data:for(var N=i.field.split("."),M=h.data,I=0;I<N.length&&M;I++){var L=N[I];M=M[L]}if(null!=M&&(n=this.parse(i.name,M,i.bypass,f)),!n)return v(),!1;n.mapping=i,i=n;break;case a.fn:var R=i.value,B=R(e);if(null==B)return Ct("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(n=this.parse(i.name,B,i.bypass,f),!n)return Ct("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=i,i=n;break;case void 0:break;default:return!1}return u?(c?i.bypassed=l.bypassed:i.bypassed=l,o[i.name]=i):c?l.bypassed=i:o[i.name]=i,p(),!0},Ka.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];null!=u&&(u.bypass?u.bypassed=null:i[s]=null)}else r._private.style={}}},Ka.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()},Ka.updateMappers=function(e){for(var t=this._private.cy,n=t.collection(),r=0;r<e.length;r++){for(var i=e[r],o=i._private.style,a=!1,s=Object.keys(o),u=0;u<s.length;u++){var l=s[u],c=o[l];if(null!=c&&c.mapping){var h=c.mapping;this.applyParsedProperty(i,h),a=!0}}if(a){var f=this.updateStyleHints(i);f&&n.merge(i)}}return n},Ka.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,o=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],h=e.pstyle(c),f=t[c];if(f){var d=f.prev,p=d,v=null!=f.next?f.next:h,g=!1,y=void 0,m=1e-6;p&&(Te(p.pfValue)&&Te(v.pfValue)?(g=v.pfValue-p.pfValue,y=p.pfValue+m*g):Te(p.value)&&Te(v.value)?(g=v.value-p.value,y=p.value+m*g):Ee(p.value)&&Ee(v.value)&&(g=p.value[0]!==v.value[0]||p.value[1]!==v.value[1]||p.value[2]!==v.value[2],y=p.strValue),g&&(s[c]=v.strValue,this.applyBypass(e,c,y),u=!0))}}if(!u)return;r.transitioning=!0,new Oi(function(t){a>0?e.delayAnimation(a).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:o,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)},Ka.checkTrigger=function(e,t,n,r,i,o){var a=this.properties[t],s=i(a);null!=s&&s(n,r)&&o()},Ka.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},Ka.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBounds},function(){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},Ka.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var Qa={};Qa.applyBypass=function(e,t,n,r){var i=this,o=[],a=!0;if("*"===t||"**"===t){if(void 0!==n)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,n,!0);c&&o.push(c)}}else if(we(t)){var h=this.parse(t,n,!0);h&&o.push(h)}else{if(!_e(t))return!1;var f=t;r=n;for(var d=Object.keys(f),p=0;p<d.length;p++){var v=d[p],g=f[v];if(void 0===g&&(g=f[ze(v)]),void 0!==g){var y=this.parse(v,g,!0);y&&o.push(y)}}}if(0===o.length)return!1;
for(var m=!1,b=0;b<e.length;b++){for(var w=e[b],x={},E=void 0,_=0;_<o.length;_++){var S=o[_];if(r){var T=w.pstyle(S.name);E=x[S.name]={prev:T}}m=this.applyParsedProperty(w,S)||m,r&&(E.next=w.pstyle(S.name))}m&&this.updateStyleHints(w),r&&this.updateTransitions(w,x,a)}return m},Qa.overrideBypass=function(e,t,n){t=Fe(t);for(var r=0;r<e.length;r++){var i=e[r],o=i._private.style[t],a=this.properties[t].type,s=a.color,u=a.mutiple,l=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),s?o.strValue="rgb("+n.join(",")+")":u?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(i)):this.applyBypass(i,t,n),this.checkTriggers(i,t,l,n)}},Qa.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},Qa.removeBypasses=function(e,t,n){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a={},s=0;s<t.length;s++){var u=t[s],l=this.properties[u],c=o.pstyle(l.name);if(c&&c.bypass){var h="",f=this.parse(u,h,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,f),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}};var Ja={};Ja.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},Ja.containerCss=function(e){var t=this._private.cy,n=t.container();if(de&&n&&de.getComputedStyle)return de.getComputedStyle(n).getPropertyValue(e)};var es={};es.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},es.getRawStyle=function(e,t){var n=this;if(e=e[0]){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(e,o.name,t);null!=a&&(r[o.name]=a,r[ze(o.name)]=a)}return r}},es.getIndexedStyle=function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},es.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0]){var i=r.properties[t];i.alias&&(i=i.pointsTo);var o=i.type,a=e.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(n&&o.number&&null!=s&&Te(s)){var c=e.cy().zoom(),h=function(e){return e*c},f=function(e,t){return h(e)+t},d=Ee(s),p=d?u.every(function(e){return null!=e}):null!=u;return p?d?s.map(function(e,t){return f(e,u[t])}).join(" "):f(s,u):d?s.map(function(e){return we(e)?e:""+h(e)}).join(" "):""+h(s)}if(null!=l)return l}return null}},es.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=i.name,a=e.pstyle(o);void 0!==a&&(a=_e(a)?this.parse(o,a.strValue):this.parse(o,a)),a&&(n[o]=a)}return n},es.getPropsList=function(e){var t=this,n=[],r=e,i=t.properties;if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],u=r[s],l=i[s]||i[Fe(s)],c=this.parse(l.name,u);c&&n.push(c)}return n},es.getNonDefaultPropertiesHash=function(e,t,n){var r,i,o,a,s,u,l=n;for(s=0;s<t.length;s++)if(r=t[s],i=e.pstyle(r,!1),null!=i)if(null!=i.pfValue)l=pt(a,l);else for(o=i.strValue,u=0;u<o.length;u++)a=o.charCodeAt(u),l=pt(a,l);return l},es.getPropertiesHash=es.getNonDefaultPropertiesHash;var ts={};ts.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);t.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];t.css(u,l)}}return t},ts.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},ts.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e};var ns={};ns.appendFromString=function(e){function t(){u=u.length>r.length?u.substr(r.length):""}function n(){i=i.length>o.length?i.substr(o.length):""}var r,i,o,a=this,s=this,u=""+e;for(u=u.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var l=u.match(/^\s*$/);if(l)break;var c=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ct("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}r=c[0];var h=c[1];if("core"!==h){var f=new co(h);if(f.invalid){Ct("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),t();continue}}var d=c[2],p=!1;i=d;for(var v=[];;){var g=i.match(/^\s*$/);if(g)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!y){Ct("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),p=!0;break}o=y[0];var m=y[1],b=y[2],w=a.properties[m];if(w){var x=s.parse(m,b);x?(v.push({name:m,val:b}),n()):(Ct("Skipping property: Invalid property definition in: "+o),n())}else Ct("Skipping property: Invalid property name in: "+o),n()}if(p){t();break}s.selector(h);for(var E=0;E<v.length;E++){var _=v[E];s.css(_.name,_.val)}t()}return s},ns.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var rs={};!function(){var e=Xe,t=Ye,n=Ge,r=Ke,i=Ze,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(o){var a=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+i;return"^"+o+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+a+")\\s*\\,\\s*("+a+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];rs.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","concave-hexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return we(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]}};var u={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t}},l=rs.types,c=[{name:"label",type:l.text,triggersBounds:u.any},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],h=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],f=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any}],v=[{name:"events",type:l.bool},{name:"text-events",type:l.bool}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.nonNegativeInt,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero}],m=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],b=[{name:"height",type:l.nodeSize,triggersBounds:u.any},{name:"width",type:l.nodeSize,triggersBounds:u.any},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any}],w=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle}],x=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH}],E=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],_=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],S=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],T=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],k=[];rs.pieBackgroundN=16,k.push({name:"pie-size",type:l.sizeMaybePercent});for(var C=1;C<=rs.pieBackgroundN;C++)k.push({name:"pie-"+C+"-background-color",type:l.color}),k.push({name:"pie-"+C+"-background-size",type:l.percent}),k.push({name:"pie-"+C+"-background-opacity",type:l.zeroOneNumber});var P=[],A=rs.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(e){A.forEach(function(t){var n=t+"-"+e.name,r=e.type;P.push({name:n,type:r})})},{});var O=rs.properties=v.concat(m,g,y,S,p,d,c,h,f,b,w,x,k,E,_,P,T),D=rs.propertyGroups={behavior:v,transition:m,visibility:g,overlay:y,ghost:S,commonLabel:p,labelDimensions:d,mainLabel:c,sourceLabel:h,targetLabel:f,nodeBody:b,nodeBorder:w,backgroundImage:x,pie:k,compound:E,edgeLine:_,edgeArrow:P,core:T},N=rs.propertyGroupNames={},M=rs.propertyGroupKeys=Object.keys(D);M.forEach(function(e){N[e]=D[e].map(function(e){return e.name}),D[e].forEach(function(t){return t.groupKey=e})});var I=rs.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];rs.propertyNames=O.map(function(e){return e.name});for(var L=0;L<O.length;L++){var R=O[L];O[R.name]=R}for(var B=0;B<I.length;B++){var j=I[B],q=O[j.pointsTo],F={name:j.name,alias:!0,pointsTo:q};O.push(F),O[j.name]=F}}(),rs.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},rs.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=Je({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=rs.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return rs.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=t[o],s=this.parse(o,a);n[o]=s}}return e.defaultProperties=n,e.defaultProperties},rs.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var is={};is.parse=function(e,t,n,r){var i=this;if(xe(t))return i.parseImplWarn(e,t,n,r);var o,a="mapping"===r||r===!0||r===!1||null==r?"dontcare":r,s=n?"t":"f",u=""+t,l=yt(e,u,s,a),c=i.propCache=i.propCache||[];return(o=c[l])||(o=c[l]=i.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(o=At(o),o&&(o.value=At(o.value))),o},is.parseImplWarn=function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return i||null==t||Ct("The style property `".concat(e,": ").concat(t,"` is invalid")),i},is.parseImpl=function(e,t,n,r){var i=this;e=Fe(e);var o=i.properties[e],a=t,s=i.types;if(!o)return null;if(void 0===t)return null;o.alias&&(o=o.pointsTo,e=o.name);var u=we(t);u&&(t=t.trim());var l=o.type;if(!l)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(xe(t))return{name:e,value:t,strValue:"fn",mapped:s.fn,bypass:n};var c,h;if(!u||r||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(c=new RegExp(s.data.regex).exec(t))){if(n)return!1;var f=s.data;return{name:e,value:c,strValue:""+t,mapped:f,field:c[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(h=new RegExp(s.mapData.regex).exec(t))){if(n)return!1;if(l.multiple)return!1;var d=s.mapData;if(!l.color&&!l.number)return!1;var p=this.parse(e,h[4]);if(!p||p.mapped)return!1;var v=this.parse(e,h[5]);if(!v||v.mapped)return!1;if(p.pfValue===v.pfValue||p.strValue===v.strValue)return Ct("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+p.strValue+"`"),this.parse(e,p.strValue);if(l.color){var g=p.value,y=v.value,m=!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3]));if(m)return!1}return{name:e,value:h,strValue:""+t,mapped:d,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:p.value,valueMax:v.value,bypass:n}}}if(l.multiple&&"multiple"!==r){var b;if(b=u?t.split(/\s+/):Ee(t)?t:[t],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],x=[],E=[],_="",S=!1,T=0;T<b.length;T++){var k=i.parse(e,b[T],n,"multiple");S=S||we(k.value),w.push(k.value),E.push(null!=k.pfValue?k.pfValue:k.value),x.push(k.units),_+=(T>0?" ":"")+k.strValue}return l.validate&&!l.validate(w,x)?null:l.singleEnum&&S?1===w.length&&we(w[0])?{name:e,value:w[0],strValue:w[0],bypass:n}:null:{name:e,value:w,pfValue:E,strValue:_,bypass:n,units:x}}var C=function(){for(var r=0;r<l.enums.length;r++){var i=l.enums[r];if(i===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(l.number){var P,A="px";if(l.units&&(P=l.units),l.implicitUnits&&(A=l.implicitUnits),!l.unitless)if(u){var O="px|em"+(l.allowPercent?"|\\%":"");P&&(O=P);var D=t.match("^("+Xe+")("+O+")?$");D&&(t=D[1],P=D[2]||A)}else P&&!l.implicitUnits||(P=A);if(t=parseFloat(t),isNaN(t)&&void 0===l.enums)return null;if(isNaN(t)&&void 0!==l.enums)return t=a,C();if(l.integer&&!ke(t))return null;if(void 0!==l.min&&(t<l.min||l.strictMin&&t===l.min)||void 0!==l.max&&(t>l.max||l.strictMax&&t===l.max))return null;var N={name:e,value:t,strValue:""+t+(P?P:""),units:P,bypass:n};return l.unitless||"px"!==P&&"em"!==P?N.pfValue=t:N.pfValue="px"!==P&&P?this.getEmSizeInPixels()*t:t,"ms"!==P&&"s"!==P||(N.pfValue="ms"===P?t:1e3*t),"deg"!==P&&"rad"!==P||(N.pfValue="rad"===P?t:vn(t)),"%"===P&&(N.pfValue=t/100),N}if(l.propList){var M=[],I=""+t;if("none"===I);else{for(var L=I.split(/\s*,\s*|\s+/),R=0;R<L.length;R++){var B=L[R].trim();i.properties[B]?M.push(B):Ct("`"+B+"` is not a valid property name")}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(" "),bypass:n}}if(l.color){var j=it(t);return j?{name:e,value:j,pfValue:j,strValue:"rgb("+j[0]+","+j[1]+","+j[2]+")",bypass:n}:null}if(l.regex||l.regexes){if(l.enums){var q=C();if(q)return q}for(var F=l.regexes?l.regexes:[l.regex],z=0;z<F.length;z++){var V=new RegExp(F[z]),U=V.exec(t);if(U)return{name:e,value:l.singleRegexMatchValue?U[1]:U,strValue:""+t,bypass:n}}return null}return l.string?{name:e,value:""+t,strValue:""+t,bypass:n}:l.enums?C():null};var os=function Vl(e){return this instanceof Vl?De(e)?(this._private={cy:e,coreStyle:{}},this.length=0,void this.resetToDefault()):void kt("A style must have a core reference"):new Vl(e)},as=os.prototype;as.instanceString=function(){return"style"},as.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;this.length=0;var t=this._private;return t.newStyle=!0,this},as.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},as.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},as.selector=function(e){var t="core"===e?null:new co(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},as.css=function(){var e=this,t=arguments;if(1===t.length)for(var n=t[0],r=0;r<e.properties.length;r++){var i=e.properties[r],o=n[i.name];void 0===o&&(o=n[ze(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},as.style=as.css,as.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this},as.append=function(e){return Ne(e)?e.appendToStyle(this):Ee(e)?this.appendFromJson(e):we(e)&&this.appendFromString(e),this},os.fromJson=function(e,t){var n=new os(e);return n.fromJson(t),n},os.fromString=function(e,t){return new os(e).fromString(t)},[Ka,Qa,Ja,es,ts,ns,rs,is].forEach(function(e){Je(as,e)}),os.types=as.types,os.properties=as.properties,os.propertyGroups=as.propertyGroups,os.propertyGroupNames=as.propertyGroupNames,os.propertyGroupKeys=as.propertyGroupKeys;var ss={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Ne(e)?t.style=e.generateStyle(this):Ee(e)?t.style=os.fromJson(this,e):we(e)?t.style=os.fromString(this,e):t.style=os(this),t.style}},us="single",ls={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType=us),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function Ul(){var e,t,n,r,i,o=arguments,Ul=this._private.pan;switch(o.length){case 0:return Ul;case 1:if(we(o[0]))return e=o[0],Ul[e];if(_e(o[0])){if(!this._private.panningEnabled)return this;n=o[0],r=n.x,i=n.y,Te(r)&&(Ul.x=r),Te(i)&&(Ul.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[0],t=o[1],"x"!==e&&"y"!==e||!Te(t)||(Ul[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:_e(e)&&(i=s[0],o=i.x,a=i.y,Te(o)&&(u.x+=o),Te(a)&&(u.y+=a),this.emit("pan viewport"));break;case 2:n=e,r=t,"x"!==n&&"y"!==n||!Te(r)||(u[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Te(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(we(e)){var r=e;e=this.$(r)}else if(Re(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Pe(e)||(e=this.mutableElements());if(!Pe(e)||!e.empty()){n=n||e.boundingBox();var o,a=this.width(),s=this.height();if(t=Te(t)?t:0,
!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){o=Math.min((a-2*t)/n.w,(s-2*t)/n.h),o=o>this._private.maxZoom?this._private.maxZoom:o,o=o<this._private.minZoom?this._private.minZoom:o;var u={x:(a-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2};return{zoom:o,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return Te(e)&&Te(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Te(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:Te(t)&&void 0===e&&t<=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,i=r.pan,o=r.zoom,a=!1;if(r.zoomingEnabled||(a=!0),Te(e)?n=e:_e(e)&&(n=e.level,null!=e.position?t=un(e.position,o,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(a=!0)),n=n>r.maxZoom?r.maxZoom:n,n=n<r.minZoom?r.minZoom:n,a||!Te(n)||n===o||null!=t&&(!Te(t.x)||!Te(t.y)))return null;if(null!=t){var s=i,u=o,l=n,c={x:-l/u*(t.x-s.x)+t.x,y:-l/u*(t.y-s.y)+t.y};return{zoomed:!0,panned:!0,zoom:l,pan:c}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!e)return this;if(Te(e.zoom)||(n=!1),_e(e.pan)||(r=!1),!n&&!r)return this;if(n){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=s,i.push("zoom"))}if(r&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;Te(u.x)&&(t.pan.x=u.x,a=!1),Te(u.y)&&(t.pan.y=u.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(we(e)){var n=e;e=this.mutableElements().filter(n)}else Pe(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),i=this.width(),o=this.height();t=void 0===t?this._private.zoom:t;var a={x:(i-t*(r.x1+r.x2))/2,y:(o-t*(r.y1+r.y2))/2};return a}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container;return e.sizeCache=e.sizeCache||(t?function(){var e=de.getComputedStyle(t),n=function(t){return parseFloat(e.getPropertyValue(t))};return{width:t.clientWidth-n("padding-left")-n("padding-right"),height:t.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};ls.centre=ls.center,ls.autolockNodes=ls.autolock,ls.autoungrabifyNodes=ls.autoungrabify;var cs=function(e){var t=this;e=Je({},e);var n=e.container;n&&!Ce(n)&&Ce(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var o=void 0!==de&&void 0!==n&&!e.headless,a=e;a.layout=Je({name:o?"grid":"null"},a.layout),a.renderer=Je({name:o?"canvas":"null"},a.renderer);var s=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},u=this._private={container:n,ready:!1,options:a,elements:new Ia(this),listeners:[],aniEles:new Ia(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:Te(a.zoom)?a.zoom:1,pan:{x:_e(a.pan)&&Te(a.pan.x)?a.pan.x:0,y:_e(a.pan)&&Te(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});var l=function(e,t){var n=e.some(Be);return n?Oi.all(e).then(t):void t(e)};u.styleEnabled&&t.setStyle([]),t.initRenderer(a.renderer);var c=function(e,n,r){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(_e(e)||Ee(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var o=Je({},t._private.options.layout);o.eles=t.elements(),t.layout(o).run()};l([a.style,a.elements],function(e){var n=e[0],o=e[1];u.styleEnabled&&t.style().append(n),c(o,function(){t.startAnimationLoop(),u.ready=!0,xe(a.ready)&&t.on("ready",a.ready);for(var e=0;e<i.length;e++){var n=i[e];t.on("ready",n)}r&&(r.readies=[]),t.emit("ready")},a.done)})},hs=cs.prototype;Je(hs,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.isDestroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e,t){if(null!=e){var n=this,r=n._private,i=r.options,o=t?t:{name:"canvas"};return i.renderer=o,!Ce(e)&&Ce(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=e,r.styleEnabled=!0,n.initRenderer(o),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return At(this._private.options)},json:function Xl(e){var t=this,n=t._private,r=t.mutableElements();if(_e(e)){if(t.startBatch(),e.elements){var i={},o=function(e,n){for(var r=[],o=[],a=0;a<e.length;a++){var s=e[a],u=s.data.id,l=t.getElementById(u);i[u]=!0,0!==l.length?o.push({ele:l,json:s}):n?(s.group=n,r.push(s)):r.push(s)}t.add(r);for(var c=0;c<o.length;c++){var h=o[c],f=h.ele,d=h.json;f.json(d)}};if(Ee(e.elements))o(e.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var u=a[s],l=e.elements[u];Ee(l)&&o(l,u)}for(var c=0;c<r.length;c++){var h=r[c],f=!i[h.id()];f&&(h.isParent()?(h.children().move({parent:null}),h.remove()):h.remove())}}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan));for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],p=0;p<d.length;p++){var v=d[p];null!=e[v]&&t[v](e[v])}return t.endBatch(),this}var g=!!e,Xl={};g?Xl.elements=this.elements().map(function(e){return e.json()}):(Xl.elements={},r.forEach(function(e){var t=e.group();Xl.elements[t]||(Xl.elements[t]=[]),Xl.elements[t].push(e.json())})),this._private.styleEnabled&&(Xl.style=t.style().json());var y=n.options;return Xl.zoomingEnabled=n.zoomingEnabled,Xl.userZoomingEnabled=n.userZoomingEnabled,Xl.zoom=n.zoom,Xl.minZoom=n.minZoom,Xl.maxZoom=n.maxZoom,Xl.panningEnabled=n.panningEnabled,Xl.userPanningEnabled=n.userPanningEnabled,Xl.pan=At(n.pan),Xl.boxSelectionEnabled=n.boxSelectionEnabled,Xl.renderer=At(y.renderer),Xl.hideEdgesOnViewport=y.hideEdgesOnViewport,Xl.textureOnViewport=y.textureOnViewport,Xl.wheelSensitivity=y.wheelSensitivity,Xl.motionBlur=y.motionBlur,Xl},scratch:Ri.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:Ri.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),hs.$id=hs.getElementById,[Ra,Fa,Ua,Xa,Ha,Ya,Wa,Ga,ss,ls].forEach(function(e){Je(hs,e)});var fs={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},ds=function(e){return e.scratch("breadthfirst")},ps=function(e,t){return e.scratch("breadthfirst",t)};z.prototype.run=function(){var e,t=this.options,n=t,r=t.cy,i=n.eles,o=i.nodes().filter(function(e){return!e.isParent()}),a=i,s=n.directed,u=n.maximal||n.maximalAdjustments>0,l=kn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(Pe(n.roots))e=n.roots;else if(Ee(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var f=n.roots[h],d=r.getElementById(f);c.push(d)}e=r.collection(c)}else if(we(n.roots))e=r.$(n.roots);else if(s)e=o.roots();else{var p=i.components();e=r.collection();for(var v=function(t){var n=p[t],r=n.maxDegree(!1),i=n.filter(function(e){return e.degree(!1)===r});e=e.add(i)},g=0;g<p.length;g++)v(g)}var y=[],m={},b=function(e,t){null==y[t]&&(y[t]=[]);var n=y[t].length;y[t].push(e),ps(e,{index:n,depth:t})},w=function(e,t){var n=ds(e),r=n.depth,i=n.index;y[r][i]=null,b(e,t)};a.bfs({roots:e,directed:n.directed,visit:function(e,t,n,r,i){var o=e[0],a=o.id();b(o,i),m[a]=!0}});for(var x=[],E=0;E<o.length;E++){var _=o[E];m[_.id()]||x.push(_)}var S=function(e){for(var t=y[e],n=0;n<t.length;n++){var r=t[n];null!=r?ps(r,{depth:e,index:n}):(t.splice(n,1),n--)}},T=function(){for(var e=0;e<y.length;e++)S(e)},k=function(e,t){for(var n=ds(e),r=e.incomers().filter(function(e){return e.isNode()&&i.has(e)}),o=-1,a=e.id(),s=0;s<r.length;s++){var u=r[s],l=ds(u);o=Math.max(o,l.depth)}return n.depth<=o&&(t[a]?null:(w(e,o+1),t[a]=!0,!0))};if(s&&u){var C=[],P={},A=function(e){return C.push(e)},O=function(){return C.shift()};for(o.forEach(function(e){return C.push(e)});C.length>0;){var D=O(),N=k(D,P);if(N)D.outgoers().filter(function(e){return e.isNode()&&i.has(e)}).forEach(A);else if(null===N){Ct("Detected double maximal shift for node `"+D.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}T();var M=0;if(n.avoidOverlap)for(var I=0;I<o.length;I++){var L=o[I],R=L.layoutDimensions(n),B=R.w,j=R.h;M=Math.max(M,B,j)}for(var q={},F=function(e){if(q[e.id()])return q[e.id()];for(var t=ds(e).depth,n=e.neighborhood(),r=0,i=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var u=ds(s),l=u.index,c=u.depth;if(null!=l&&null!=c){var h=y[c].length;c<t&&(r+=l/(h-1),i++)}}}return i=Math.max(1,i),r/=i,0===i&&(r=0),q[e.id()]=r,r},z=function(e,t){var n=F(e),r=F(t),i=n-r;return 0===i?$e(e.id(),t.id()):i},V=0;V<y.length;V++)y[V].sort(z),S(V);for(var U=[],X=0;X<x.length;X++)U.push(x[X]);y.unshift(U),T();for(var H=0,Y=0;Y<y.length;Y++)H=Math.max(y[Y].length,H);var W={x:l.x1+l.w/2,y:l.x1+l.h/2},G=y.reduce(function(e,t){return Math.max(e,t.length)},0),K=function(e){var t=ds(e),r=t.depth,i=t.index,o=y[r].length,a=Math.max(l.w/((n.grid?G:o)+1),M),s=Math.max(l.h/(y.length+1),M),u=Math.min(l.w/2/y.length,l.h/2/y.length);if(u=Math.max(u,M),n.circle){var c=u*r+u-(y.length>0&&y[0].length<=3?u/2:0),h=2*Math.PI/y[r].length*i;return 0===r&&1===y[0].length&&(c=1),{x:W.x+c*Math.cos(h),y:W.y+c*Math.sin(h)}}var f={x:W.x+(i+1-(o+1)/2)*a,y:(r+1)*s};return f};return o.layoutPositions(this,n,K),this};var vs={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};V.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,o=r.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));for(var a,s=kn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=void 0===t.sweep?2*Math.PI-2*Math.PI/o.length:t.sweep,c=l/Math.max(1,o.length-1),h=0,f=0;f<o.length;f++){var d=o[f],p=d.layoutDimensions(t),v=p.w,g=p.h;h=Math.max(h,v,g)}if(a=Te(t.radius)?t.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&t.avoidOverlap){h*=1.75;var y=Math.cos(c)-Math.cos(0),m=Math.sin(c)-Math.sin(0),b=Math.sqrt(h*h/(y*y+m*m));a=Math.max(b,a)}var w=function(e,n){var r=t.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r),l={x:u.x+o,y:u.y+s};return l};return o.layoutPositions(this,t,w),this};var gs={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};U.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,o=i.nodes().not(":parent"),a=kn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var h=o[c],f=void 0;f=t.concentric(h),u.push({value:f,node:h}),h._private.scratch.concentric=f}o.updateStyle();for(var d=0;d<o.length;d++){var p=o[d],v=p.layoutDimensions(t);l=Math.max(l,v.w,v.h)}u.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(o),y=[[]],m=y[0],b=0;b<u.length;b++){var w=u[b];if(m.length>0){var x=Math.abs(m[0].value-w.value);x>=g&&(m=[],y.push(m))}m.push(w)}var E=l+t.minNodeSpacing;if(!t.avoidOverlap){var _=y.length>0&&y[0].length>1,S=Math.min(a.w,a.h)/2-E,T=S/(y.length+_?1:0);E=Math.min(E,T)}for(var k=0,C=0;C<y.length;C++){var P=y[C],A=void 0===t.sweep?2*Math.PI-2*Math.PI/P.length:t.sweep,O=P.dTheta=A/Math.max(1,P.length-1);if(P.length>1&&t.avoidOverlap){var D=Math.cos(O)-Math.cos(0),N=Math.sin(O)-Math.sin(0),M=Math.sqrt(E*E/(D*D+N*N));k=Math.max(M,k)}P.r=k,k+=E}if(t.equidistant){for(var I=0,L=0,R=0;R<y.length;R++){var B=y[R],j=B.r-L;I=Math.max(I,j)}L=0;for(var q=0;q<y.length;q++){var F=y[q];0===q&&(L=F.r),F.r=L,L+=I}}for(var z={},V=0;V<y.length;V++)for(var U=y[V],X=U.dTheta,H=U.r,Y=0;Y<U.length;Y++){var W=U[Y],G=t.startAngle+(n?1:-1)*X*Y,K={x:s.x+H*Math.cos(G),y:s.y+H*Math.sin(G)};z[W.node.id()]=K}return o.layoutPositions(this,t,function(e){var t=e.id();return z[t]}),this};var ys,ms={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};X.prototype.run=function(){function e(e){var t={type:"message",message:e};a.trigger(t)}var t=this.options,n=t.cy,r=this,i=this.thread,o=t.weaver?t.weaver.Thread:null,a={listeners:[],on:function(e,t){return this.listeners.push({event:e,callback:t}),this},trigger:function f(e){we(e)&&(e={type:e});var t=function(t){return t.event===e.type},f=function(t){t.callback(e)};return this.listeners.filter(t).forEach(f),this},pass:function(e){return this.pass=e,this},run:function(e){var t=this.pass;return new Oi(function(n){n(e(t))})},stop:function(){return this},stopped:function(){return!0}};i&&!i.stopped()||(i=this.thread=o?new o:a),r.stopped=!1,t.animate!==!0&&t.animate!==!1||r.emit({type:"layoutstart",layout:r}),ys=!0===t.debug;var s=ws(n,r,t);ys&&bs(s),t.randomize&&_s(s,n);var u=Date.now(),l=!1,c=function(e){e=e||{},l&&!e.next||!e.force&&Date.now()-u<t.animationThreshold||(l=!0,ht(function(){Ss(s,n,t),!0===t.fit&&n.fit(t.padding),l=!1,e.next&&e.next()}))};i.on("message",function(e){var t=e.message;s.layoutNodes=t,c()}),i.pass({layoutInfo:s,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var n,r=t.layoutInfo,i=t.options,o=function(e,t,n){a(e,t),h(e,t),f(e,t),d(e,t),p(e,t)},a=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],s=o+1;s<i;s++){var l=e.layoutNodes[e.idToIndex[r[s]]];u(a,l,e,t)}},s=function(e){return-e+2*e*Math.random()},u=function(e,t,n,r){var i=e.cmptId,o=t.cmptId;if(i===o||n.isCompound){var a=t.positionX-e.positionX,u=t.positionY-e.positionY,h=1;0===a&&0===u&&(a=s(h),u=s(h));var f=l(e,t,a,u);if(f>0)var d=r.nodeOverlap*f,p=Math.sqrt(a*a+u*u),v=d*a/p,g=d*u/p;else var y=c(e,a,u),m=c(t,-1*a,-1*u),b=m.x-y.x,w=m.y-y.y,x=b*b+w*w,p=Math.sqrt(x),d=(e.nodeRepulsion+t.nodeRepulsion)/x,v=d*b/p,g=d*w/p;e.isLocked||(e.offsetX-=v,e.offsetY-=g),t.isLocked||(t.offsetX+=v,t.offsetY+=g)}},l=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},c=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=n/t,u=o/a,l={};return 0===t&&0<n?(l.x=r,l.y=i+o/2,l):0===t&&0>n?(l.x=r,l.y=i+o/2,l):0<t&&-1*u<=s&&s<=u?(l.x=r+a/2,l.y=i+a*n/2/t,l):0>t&&-1*u<=s&&s<=u?(l.x=r-a/2,l.y=i-a*n/2/t,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+o*t/2/n,l.y=i+o/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-o*t/2/n,l.y=i-o/2,l):l},h=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],s=e.layoutNodes[a],u=s.positionX-o.positionX,l=s.positionY-o.positionY;if(0!==u||0!==l){var h=c(o,u,l),f=c(s,-1*u,-1*l),d=f.x-h.x,p=f.y-h.y,v=Math.sqrt(d*d+p*p),g=Math.pow(r.idealLength-v,2)/r.elasticity;if(0!==v)var y=g*d/v,m=g*p/v;else var y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}}},f=function(e,t){for(var n=1,r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],o=i.length;if(0===r)var a=e.clientHeight/2,s=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;c<o;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var f=a-h.positionX,d=s-h.positionY,p=Math.sqrt(f*f+d*d);if(p>n){var v=t.gravity*f/p,g=t.gravity*d/p;h.offsetX+=v,h.offsetY+=g}}}}},d=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var o=n[r++],a=e.idToIndex[o],s=e.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var f=e.layoutNodes[e.idToIndex[u[h]]];f.offsetX+=l,f.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},p=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=v(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,g(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},v=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},g=function x(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?x(r,t):void 0}},y=function(e,t){for(var n=r.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var h=0;h<c.length;h++){var f=c[h];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var d=0,p=0,v=0,g=0,y=Math.sqrt(l)*r.clientWidth/r.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var h=0;h<c.length;h++){var f=c[h];f.isLocked||(f.positionX+=d,f.positionY+=p)}d+=c.w+t.componentSpacing,v+=c.w+t.componentSpacing,g=Math.max(g,c.h),v>y&&(p+=g+t.componentSpacing,d=0,v=0,g=0)}}},m=function(e){return o(r,i,e),r.temperature=r.temperature*i.coolingFactor,!(r.temperature<i.minTemp)},b=0;do{for(var w=0;(w<i.refresh||0===i.refresh)&&b<i.numIter;){var n=m(b);if(!n)break;w++,b++}i.animate===!0&&e(r.layoutNodes)}while(n&&b+1<i.numIter);return y(r,i),r}).then(function(e){s.layoutNodes=e.layoutNodes,i.stop(),h()});var h=function(){t.animate===!0||t.animate===!1?c({force:!0,next:function(){r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r})}}):t.eles.nodes().layoutPositions(r,t,function(e){var t=s.layoutNodes[s.idToIndex[e.data("id")]];return{x:t.positionX,y:t.positionY}})};return this},X.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},X.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var bs,ws=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:kn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},a=n.eles.components(),s={},u=0;u<a.length;u++)for(var l=a[u],c=0;c<l.length;c++){var h=l[c];s[h.id()]=u}for(var u=0;u<o.nodeSize;u++){var f=i[u],d=f.layoutDimensions(n),p={};p.isLocked=f.locked(),p.id=f.data("id"),p.parentId=f.data("parent"),p.cmptId=s[f.id()],p.children=[],p.positionX=f.position("x"),p.positionY=f.position("y"),p.offsetX=0,p.offsetY=0,p.height=d.w,p.width=d.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(f.style("padding")),p.padRight=parseFloat(f.style("padding")),p.padTop=parseFloat(f.style("padding")),p.padBottom=parseFloat(f.style("padding")),p.nodeRepulsion=xe(n.nodeRepulsion)?n.nodeRepulsion(f):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=u}for(var v=[],g=0,y=-1,m=[],u=0;u<o.nodeSize;u++){var f=o.layoutNodes[u],b=f.parentId;null!=b?o.layoutNodes[o.idToIndex[b]].children.push(f.id):(v[++y]=f.id,m.push(f.id))}for(o.graphSet.push(m);g<=y;){var w=v[g++],x=o.idToIndex[w],h=o.layoutNodes[x],E=h.children;if(E.length>0){o.graphSet.push(E);for(var u=0;u<E.length;u++)v[++y]=E[u]}}for(var u=0;u<o.graphSet.length;u++)for(var _=o.graphSet[u],c=0;c<_.length;c++){var S=o.idToIndex[_[c]];o.indexToGraph[S]=u}for(var u=0;u<o.edgeSize;u++){var T=r[u],k={};k.id=T.data("id"),k.sourceId=T.data("source"),k.targetId=T.data("target");var C=xe(n.idealEdgeLength)?n.idealEdgeLength(T):n.idealEdgeLength,P=xe(n.edgeElasticity)?n.edgeElasticity(T):n.edgeElasticity,A=o.idToIndex[k.sourceId],O=o.idToIndex[k.targetId],D=o.indexToGraph[A],N=o.indexToGraph[O];if(D!=N){for(var M=xs(k.sourceId,k.targetId,o),I=o.graphSet[M],L=0,p=o.layoutNodes[A];-1===I.indexOf(p.id);)p=o.layoutNodes[o.idToIndex[p.parentId]],L++;for(p=o.layoutNodes[O];-1===I.indexOf(p.id);)p=o.layoutNodes[o.idToIndex[p.parentId]],L++;C*=L*n.nestingFactor}k.idealLength=C,k.elasticity=P,o.layoutEdges.push(k)}return o},xs=function(e,t,n){var r=Es(e,t,0,n);return 2>r.count?0:r.graph},Es=function Hl(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],u=r.idToIndex[s],l=r.layoutNodes[u].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],h=Hl(e,t,c,r);if(0!==h.count){if(1!==h.count)return h;if(o++,2===o)break}}}return{count:o,graph:n}},_s=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},Ss=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=e.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[t.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Ts={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};H.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var o=kn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)i.layoutPositions(this,t,function(e){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(e){if(null==e)return Math.min(u,l);var t=Math.min(u,l);t==u?u=e:l=e},h=function(e){if(null==e)return Math.max(u,l);var t=Math.max(u,l);t==u?u=e:l=e},f=t.rows,d=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=d)u=f,l=d;else if(null!=f&&null==d)u=f,l=Math.ceil(a/u);else if(null==f&&null!=d)l=d,u=Math.ceil(a/l);else if(l*u>a){var p=c(),v=h();(p-1)*v>=a?c(p-1):(v-1)*p>=a&&h(v-1)}else for(;l*u<a;){var g=c(),y=h();(y+1)*g>=a?h(y+1):c(g+1)}var m=o.w/l,b=o.h/u;if(t.condense&&(m=0,b=0),t.avoidOverlap)for(var w=0;w<i.length;w++){var x=i[w],E=x._private.position;null!=E.x&&null!=E.y||(E.x=0,E.y=0);var _=x.layoutDimensions(t),S=t.avoidOverlapPadding,T=_.w+S,k=_.h+S;m=Math.max(m,T),b=Math.max(b,k)}for(var C={},P=function(e,t){return!!C["c-"+e+"-"+t]},A=function(e,t){C["c-"+e+"-"+t]=!0},O=0,D=0,N=function(){D++,D>=l&&(D=0,O++)},M={},I=0;I<i.length;I++){var L=i[I],R=t.position(L);if(R&&(void 0!==R.row||void 0!==R.col)){var B={row:R.row,col:R.col};if(void 0===B.col)for(B.col=0;P(B.row,B.col);)B.col++;else if(void 0===B.row)for(B.row=0;P(B.row,B.col);)B.row++;M[L.id()]=B,A(B.row,B.col)}}var j=function(e,t){var n,r;if(e.locked()||e.isParent())return!1;var i=M[e.id()];if(i)n=i.col*m+m/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;P(O,D);)N();n=D*m+m/2+o.x1,r=O*b+b/2+o.y1,A(O,D),N()}return{x:n,y:r}};i.layoutPositions(this,t,j)}return this};var ks={ready:function(){},stop:function(){}};Y.prototype.run=function(){var e=this.options,t=e.eles,n=this;e.cy;return n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this},Y.prototype.stop=function(){return this};var Cs={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};W.prototype.run=function(){function e(e){if(null==t.positions)return null;if(i)return t.positions(e);var n=t.positions[e._private.data.id];return null==n?null:n}var t=this.options,n=t.eles,r=n.nodes(),i=xe(t.positions);return r.layoutPositions(this,t,function(t,n){var r=e(t);return!t.locked()&&null!=r&&r}),this};var Ps={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};G.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent"),i=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o=function(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,e,o),this};var As=[{name:"breadthfirst",impl:z},{name:"circle",impl:V},{name:"concentric",impl:U},{name:"cose",impl:X},{name:"grid",impl:H},{name:"null",impl:Y},{name:"preset",impl:W},{name:"random",impl:G}],Os=function(){};K.prototype={recalculateRenderedStyle:Os,notify:function(){this.notifications++},init:Os,isHeadless:function(){return!0}};var Ds={};Ds.arrowShapeWidth=.3,Ds.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,o,a){var s=i.x-n/2-a,u=i.x+n/2+a,l=i.y-n/2-a,c=i.y+n/2+a,h=s<=e&&e<=u&&l<=t&&t<=c;return h},r=function(e,t,n,r,i){var o=e*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r),s=o*n,u=a*n,l=s+i.x,c=u+i.y;return{x:l,y:c}},i=function(e,t,n,i){for(var o=[],a=0;a<e.length;a+=2){var s=e[a],u=e[a+1];o.push(r(s,u,t,n,i))}return o},o=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},a=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(r,s){we(s)&&(s=e[s]),e[r]=Je({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,r,a,s){var u=o(i(this.points,n+2*s,r,a)),l=Xn(e,t,u);return l},roughCollide:n,draw:function(e,n,r,o){var a=i(this.points,n,r,o);t.arrowShapeImpl("polygon")(e,a)},spacing:function(e){return 0},gap:a},s)};s("none",{collide:_t,roughCollide:_t,draw:Tt,spacing:St,gap:St}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,o,a,s){var u=i(this.points,n,o,a),l=this.controlPoint,c=r(l[0],l[1],n,o,a);t.arrowShapeImpl(this.name)(e,u,c)},gap:function(e){return.8*a(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.pointsTee,n+2*u,r,a)),h=Xn(e,t,l)||Xn(e,t,c);return h},draw:function(e,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.pointsTee,n,r,o);t.arrowShapeImpl(this.name)(e,s,u)}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e,i=3,o=5;return n[i]=n[i]-r,n[o]=n[o]-r,n},collide:function(e,t,n,r,a,s,u){var l=o(i(this.points,n+2*u,r,a)),c=o(i(this.crossLinePts(n,s),n+2*u,r,a)),h=Xn(e,t,l)||Xn(e,t,c);
return h},draw:function(e,n,r,o,a){var s=i(this.points,n,r,o),u=i(this.crossLinePts(n,a),n,r,o);t.arrowShapeImpl(this.name)(e,s,u)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*a(e)}}),s("circle",{radius:.15,collide:function(e,t,n,r,i,o,a){var s=i,u=Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((n+2*a)*this.radius,2);return u},draw:function(e,n,r,i,o){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})};var Ns={};Ns.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom(),l=((e-i)/a-s.x)/u,c=((t-o)/a-s.y)/u;return[l,c]},Ns.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=de.getComputedStyle(e),r=function(e){return parseFloat(n.getPropertyValue(e))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=e.clientWidth,s=e.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,h=t.width/(a+c),f=a-u,d=s-l,p=t.left+i.left+o.left,v=t.top+i.top+o.top;return this.containerBB=[p,v,f,d,h]},Ns.invalidateContainerClientCoordsCache=function(){this.containerBB=null},Ns.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},Ns.findNearestElements=function(e,t,n,r){function i(e,t){if(e.isNode()){if(c)return;c=e,p.push(e)}if(e.isEdge()&&(null==t||t<w))if(l){if(l.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&l.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var n=0;n<p.length;n++)if(p[n].isEdge()){p[n]=e,l=e,w=null!=t?t:w;break}}else p.push(e),l=e,w=null!=t?t:w}function o(n){var r=n.outerWidth()+2*m,o=n.outerHeight()+2*m,a=r/2,s=o/2,u=n.position();if(u.x-a<=e&&e<=u.x+a&&u.y-s<=t&&t<=u.y+s){var l=f.nodeShapes[h.getNodeShape(n)];if(l.checkPoint(e,t,0,r,o,u.x,u.y))return i(n,0),!0}}function a(n){var r,a=n._private,s=a.rscratch,u=n.pstyle("width").pfValue,l=n.pstyle("arrow-scale").value,c=u/2+y,d=c*c,v=2*c,m=a.source,b=a.target;if("segments"===s.edgeType||"straight"===s.edgeType||"haystack"===s.edgeType){for(var w=s.allpts,x=0;x+3<w.length;x+=2)if(jn(e,t,w[x],w[x+1],w[x+2],w[x+3],v)&&d>(r=Un(e,t,w[x],w[x+1],w[x+2],w[x+3])))return i(n,r),!0}else if("bezier"===s.edgeType||"multibezier"===s.edgeType||"self"===s.edgeType||"compound"===s.edgeType)for(var w=s.allpts,x=0;x+5<s.allpts.length;x+=4)if(qn(e,t,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5],v)&&d>(r=Vn(e,t,w[x],w[x+1],w[x+2],w[x+3],w[x+4],w[x+5])))return i(n,r),!0;for(var m=m||a.source,b=b||a.target,E=h.getArrowWidth(u,l),_=[{name:"source",x:s.arrowStartX,y:s.arrowStartY,angle:s.srcArrowAngle},{name:"target",x:s.arrowEndX,y:s.arrowEndY,angle:s.tgtArrowAngle},{name:"mid-source",x:s.midX,y:s.midY,angle:s.midsrcArrowAngle},{name:"mid-target",x:s.midX,y:s.midY,angle:s.midtgtArrowAngle}],x=0;x<_.length;x++){var S=_[x],T=f.arrowShapes[n.pstyle(S.name+"-arrow-shape").value],k=n.pstyle("width").pfValue;if(T.roughCollide(e,t,E,S.angle,{x:S.x,y:S.y},k,y)&&T.collide(e,t,E,S.angle,{x:S.x,y:S.y},k,y))return i(n),!0}g&&p.length>0&&(o(m),o(b))}function s(e,t,n){return jt(e,t,n)}function u(n,r){var o,a=n._private,u=b;o=r?r+"-":"";var l=n.pstyle(o+"label").value,c="yes"===n.pstyle("text-events").strValue;if(c&&l){var h=a.rstyle,f=n.pstyle("text-border-width").pfValue,d=n.pstyle("text-background-padding").pfValue,p=s(h,"labelWidth",r)+f+2*u+2*d,v=s(h,"labelHeight",r)+f+2*u+2*d,g=s(h,"labelX",r),y=s(h,"labelY",r),m=s(a.rscratch,"labelAngle",r),w=g-p/2,x=g+p/2,E=y-v/2,_=y+v/2;if(m){var S=Math.cos(m),T=Math.sin(m),k=function(e,t){return e-=g,t-=y,{x:e*S-t*T+g,y:e*T+t*S+y}},C=k(w,E),P=k(w,_),A=k(x,E),O=k(x,_),D=[C.x,C.y,A.x,A.y,O.x,O.y,P.x,P.y];if(Xn(e,t,D))return i(n),!0}else{var N={w:p,h:v,x1:w,x2:x,y1:E,y2:_};if(In(N,e,t))return i(n),!0}}}var l,c,h=this,f=this,d=f.getCachedZSortedEles(),p=[],v=f.cy.zoom(),g=f.cy.hasCompoundNodes(),y=(r?24:8)/v,m=(r?8:2)/v,b=(r?8:2)/v,w=1/0;n&&(d=d.interactive);for(var x=d.length-1;x>=0;x--){var E=d[x];E.isNode()?o(E)||u(E):a(E)||u(E)||u(E,"source")||u(E,"target")}return p},Ns.getAllInBox=function(e,t,n,r){var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(e,n),s=Math.max(e,n),u=Math.min(t,r),l=Math.max(t,r);e=a,n=s,t=u,r=l;for(var c=kn({x1:e,y1:t,x2:n,y2:r}),h=0;h<i.length;h++){var f=i[h];if(f.isNode()){var d=f,p=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Mn(c,p)&&!Rn(p,c)&&o.push(d)}else{var v=f,g=v._private,y=g.rscratch;if(null!=y.startX&&null!=y.startY&&!In(c,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!In(c,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var m=g.rstyle.bezierPts||g.rstyle.linePts||g.rstyle.haystackPts,b=!0,w=0;w<m.length;w++)if(!Ln(c,m[w])){b=!1;break}b&&o.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||o.push(v)}}return o};var Ms={};Ms.calculateArrowAngles=function(e){var t,n,r,i,o,a,s,u,l=e._private.rscratch,c="haystack"===l.edgeType,h="bezier"===l.edgeType,f="multibezier"===l.edgeType,d="segments"===l.edgeType,p="compound"===l.edgeType,v="self"===l.edgeType;if(c?(r=l.haystackPts[0],i=l.haystackPts[1],o=l.haystackPts[2],a=l.haystackPts[3]):(r=l.arrowStartX,i=l.arrowStartY,o=l.arrowEndX,a=l.arrowEndY),s=l.midX,u=l.midY,d)t=r-l.segpts[0],n=i-l.segpts[1];else if(f||p||v||h){var g=l.allpts,y=En(g[0],g[2],g[4],.1),m=En(g[1],g[3],g[5],.1);t=r-y,n=i-m}else t=r-s,n=i-u;l.srcArrowAngle=gn(t,n);var s=l.midX,u=l.midY;if(c&&(s=(r+o)/2,u=(i+a)/2),t=o-r,n=a-i,d){var g=l.allpts;if(g.length/2%2===0){var b=g.length/2,w=b-2;t=g[b]-g[w],n=g[b+1]-g[w+1]}else{var b=g.length/2-1,w=b-2,x=b+2;t=g[b]-g[w],n=g[b+1]-g[w+1]}}else if(f||p||v){var E,_,S,T,g=l.allpts,k=l.ctrlpts;if(k.length/2%2===0){var C=g.length/2-1,P=C+2,A=P+2;E=En(g[C],g[P],g[A],0),_=En(g[C+1],g[P+1],g[A+1],0),S=En(g[C],g[P],g[A],1e-4),T=En(g[C+1],g[P+1],g[A+1],1e-4)}else{var P=g.length/2-1,C=P-2,A=P+2;E=En(g[C],g[P],g[A],.4999),_=En(g[C+1],g[P+1],g[A+1],.4999),S=En(g[C],g[P],g[A],.5),T=En(g[C+1],g[P+1],g[A+1],.5)}t=S-E,n=T-_}if(l.midtgtArrowAngle=gn(t,n),l.midDispX=t,l.midDispY=n,t*=-1,n*=-1,d){var g=l.allpts;if(g.length/2%2===0);else{var b=g.length/2-1,x=b+2;t=-(g[x]-g[b]),n=-(g[x+1]-g[b+1])}}if(l.midsrcArrowAngle=gn(t,n),d)t=o-l.segpts[l.segpts.length-2],n=a-l.segpts[l.segpts.length-1];else if(f||p||v||h){var g=l.allpts,O=g.length,y=En(g[O-6],g[O-4],g[O-2],.9),m=En(g[O-5],g[O-3],g[O-1],.9);t=o-y,n=a-m}else t=o-s,n=a-u;l.tgtArrowAngle=gn(t,n)},Ms.getArrowWidth=Ms.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r?r:(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)};var Is={};Is.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)};var o=2*Math.random()*Math.PI;i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),h=s.width(),f=a.height(),d=s.height(),p=n.pstyle("haystack-radius").value,v=p/2;i.haystackPts=i.allpts=[i.source.x*c*v+u.x,i.source.y*f*v+u.y,i.target.x*h*v+l.x,i.target.y*d*v+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType=i.lastCurveStyle="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Is.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);t.allpts.push(t.endX,t.endY);var r,i;t.ctrlpts.length/2%2===0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,i=.5,t.midX=En(t.allpts[r],t.allpts[r+2],t.allpts[r+4],i),t.midY=En(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],i))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4===0){var o=t.segpts.length/2,a=o-2;t.midX=(t.segpts[a]+t.segpts[o])/2,t.midY=(t.segpts[a+1]+t.segpts[o+1])/2}else{var a=t.segpts.length/2-1;t.midX=t.segpts[a],t.midY=t.segpts[a+1]}},Is.checkForInvalidEdgeWarning=function(e){var t=e._private.rscratch;Te(t.startX)&&Te(t.startY)&&Te(t.endX)&&Te(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Ct("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Is.findEdgeControlPoints=function(e){if(e&&0!==e.length){for(var t,n=this,r=n.cy,i=r.hasCompoundNodes(),o={},a=[],s=[],u=0;u<e.length;u++){var l=e[u],c=l._private,h=c.data,f=l.pstyle("curve-style").value,d="unbundled-bezier"===f||"segments"===f||"straight"===f,p="unbundled-bezier"===f||"bezier"===f;if("none"!==l.pstyle("display").value)if("haystack"!==f){var v=h.source,g=h.target;t=v>g?g+"$-$"+v:v+"$-$"+g,d&&(t="unbundled$-$"+h.id);var y=o[t];null==y&&(y=o[t]=[],a.push(t)),y.push(l),d&&(y.hasUnbundled=!0),p&&(y.hasBezier=!0)}else s.push(l)}for(var m,b,w,x,E,_,S,T,k,C,P,A,O=0;O<a.length;O++){t=a[O];var D=o[t];if(!D.hasUnbundled){var N=D[0].parallelEdges();Rt(D),N.forEach(function(e){return D.push(e)}),D.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}if(m=D[0]._private.source,b=D[0]._private.target,!D.hasUnbundled&&m.id()>b.id()){var M=m;m=b,b=M}w=m.position(),x=b.position(),E=m.outerWidth(),_=m.outerHeight(),S=b.outerWidth(),T=b.outerHeight(),k=n.nodeShapes[this.getNodeShape(m)],C=n.nodeShapes[this.getNodeShape(b)],A=!1;for(var l,I,L,R={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0},B=w.x,j=w.y,q=E,F=_,z=x.x,V=x.y,U=S,X=T,H=D.length,u=0;u<D.length;u++){l=D[u],I=l._private,L=I.rscratch;var Y=L.lastEdgeIndex,W=u,G=L.lastNumEdges,f=l.pstyle("curve-style").value,d="unbundled-bezier"===f||"segments"===f,K=m.id()!==l.source().id(),Z=l.pstyle("control-point-distances"),$=l.pstyle("loop-direction").pfValue,Q=l.pstyle("loop-sweep").pfValue,J=l.pstyle("control-point-weights"),ee=Z&&J?Math.min(Z.value.length,J.value.length):1,te=l.pstyle("control-point-step-size").pfValue,ne=Z?Z.pfValue[0]:void 0,re=J.value[0],ie=l.pstyle("edge-distances").value,oe=l.pstyle("source-distance-from-node").pfValue,ae=l.pstyle("target-distance-from-node").pfValue,se=l.pstyle("segment-weights"),ue=l.pstyle("segment-distances"),le=Math.min(se.pfValue.length,ue.pfValue.length),ce=l.pstyle("source-endpoint").value,he=l.pstyle("target-endpoint").value,fe=l.pstyle("source-arrow-shape").value,de=l.pstyle("target-arrow-shape").value,pe=l.pstyle("arrow-scale").value,ve=l.pstyle("width").pfValue,ge=L.lastSrcCtlPtX,ye=L.lastSrcCtlPtY,me=L.lastSrcCtlPtW,be=L.lastSrcCtlPtH,we=L.lastTgtCtlPtX,xe=L.lastTgtCtlPtY,Ee=L.lastTgtCtlPtW,_e=L.lastTgtCtlPtH,Se=L.lastCurveStyle,ke=f,Ce=L.lastCtrlptDists,Pe=Z?Z.strValue:null,Ae=L.lastCtrlptWs,Oe=J.strValue,De=L.lastSegmentWs,Ne=se.strValue,Me=L.lastSegmentDs,Ie=ue.strValue,Le=L.lastStepSize,Re=te,Be=L.lastLoopDir,je=$,qe=L.lastLoopSwp,Fe=Q,ze=L.lastEdgeDistances,Ve=ie,Ue=L.lastSrcDistFNode,Xe=oe,He=L.lastTgtDistFNode,Ye=ae,We=L.lastSrcEndpt,Ge=ce,Ke=L.lastTgtEndpt,Ze=he,$e=L.lastSrcArr,Qe=fe,Je=L.lastTgtArr,et=de,tt=L.lastLineW,nt=ve,rt=L.lastArrScl,it=pe;A?L.badBezier=!0:L.badBezier=!1;var ot;if(ge===B&&ye===j&&me===q&&be===F&&we===z&&xe===V&&Ee===U&&_e===X&&Se===ke&&Ce===Pe&&Ae===Oe&&De===Ne&&Me===Ie&&Le===Re&&Be===je&&qe===Fe&&ze===Ve&&Ue===Xe&&He===Ye&&We===Ge&&Ke===Ze&&$e===Qe&&Je===et&&tt===nt&&rt===it&&(Y===W&&G===H||d)?ot=!0:(ot=!1,L.lastSrcCtlPtX=B,L.lastSrcCtlPtY=j,L.lastSrcCtlPtW=q,L.lastSrcCtlPtH=F,L.lastTgtCtlPtX=z,L.lastTgtCtlPtY=V,L.lastTgtCtlPtW=U,L.lastTgtCtlPtH=X,L.lastEdgeIndex=W,L.lastNumEdges=H,L.lastCurveStyle=ke,L.lastCtrlptDists=Pe,L.lastCtrlptWs=Oe,L.lastSegmentDs=Ie,L.lastSegmentWs=Ne,L.lastStepSize=Re,L.lastLoopDir=je,L.lastLoopSwp=Fe,L.lastEdgeDistances=Ve,L.lastSrcDistFNode=Xe,L.lastTgtDistFNode=Ye,L.lastSrcEndpt=Ge,L.lastTgtEndpt=Ze,L.lastSrcArr=Qe,L.lastTgtArr=et,L.lastLineW=nt,L.lastArrScl=it),!ot){if(!D.calculatedIntersection&&m!==b&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var at=k.intersectLine(w.x,w.y,E,_,x.x,x.y,0);D.srcIntn=at;var st=C.intersectLine(x.x,x.y,S,T,w.x,w.y,0);D.tgtIntn=st;var ut={x1:at[0],x2:st[0],y1:at[1],y2:st[1]},lt={x1:w.x,x2:x.x,y1:w.y,y2:x.y},ct=st[1]-at[1],ht=st[0]-at[0],ft=Math.sqrt(ht*ht+ct*ct),dt={x:ht,y:ct},pt={x:dt.x/ft,y:dt.y/ft};P={x:-pt.y,y:pt.x},C.checkPoint(at[0],at[1],0,S,T,x.x,x.y)&&k.checkPoint(st[0],st[1],0,E,_,w.x,w.y)&&(P={},A=!0)}if(K?(L.srcIntn=D.tgtIntn,L.tgtIntn=D.srcIntn):(L.srcIntn=D.srcIntn,L.tgtIntn=D.tgtIntn),m===b){L.edgeType="self";var vt=u,gt=te;d&&(vt=0,gt=ne);var yt=$-Math.PI/2,mt=yt-Q/2,bt=yt+Q/2,wt=String($+"_"+Q);vt=void 0===R[wt]?R[wt]=0:++R[wt],L.ctrlpts=[w.x+1.4*Math.cos(mt)*gt*(vt/3+1),w.y+1.4*Math.sin(mt)*gt*(vt/3+1),w.x+1.4*Math.cos(bt)*gt*(vt/3+1),w.y+1.4*Math.sin(bt)*gt*(vt/3+1)]}else if(i&&(m.isParent()||m.isChild()||b.isParent()||b.isChild())&&(m.parents().anySame(b)||b.parents().anySame(m))){L.edgeType="compound",L.badBezier=!1;var vt=u,gt=te;d&&(vt=0,gt=ne);var xt=50,Et={x:w.x-E/2,y:w.y-_/2},_t={x:x.x-S/2,y:x.y-T/2},St={x:Math.min(Et.x,_t.x),y:Math.min(Et.y,_t.y)},Tt=.5,kt=Math.max(Tt,Math.log(.01*E)),Ct=Math.max(Tt,Math.log(.01*S));L.ctrlpts=[St.x,St.y-(1+Math.pow(xt,1.12)/100)*gt*(vt/3+1)*kt,St.x-(1+Math.pow(xt,1.12)/100)*gt*(vt/3+1)*Ct,St.y]}else if("segments"===f){L.edgeType="segments",L.segpts=[];for(var Pt=0;Pt<le;Pt++){var At=se.pfValue[Pt],Ot=ue.pfValue[Pt],Dt=1-At,Nt=At,Mt="node-position"===ie?lt:ut,It={x:Mt.x1*Dt+Mt.x2*Nt,y:Mt.y1*Dt+Mt.y2*Nt};L.segpts.push(It.x+P.x*Ot,It.y+P.y*Ot)}}else if(D.length%2!==1||u!==Math.floor(D.length/2)||d){var Lt=d;L.edgeType=Lt?"multibezier":"bezier",L.ctrlpts=[];for(var Bt=0;Bt<ee;Bt++){var jt,qt=(.5-D.length/2+u)*te,Ft=mn(qt);Lt&&(ne=Z?Z.pfValue[Bt]:te,re=J.value[Bt]),jt=d?ne:void 0!==ne?Ft*ne:void 0;var zt=void 0!==jt?jt:qt,Dt=1-re,Nt=re;if(K){var M=Dt;Dt=Nt,Nt=M}var Mt="node-position"===ie?lt:ut,It={x:Mt.x1*Dt+Mt.x2*Nt,y:Mt.y1*Dt+Mt.y2*Nt};L.ctrlpts.push(It.x+P.x*zt,It.y+P.y*zt)}}else L.edgeType="straight";this.findEndpoints(l);var Vt=!Te(L.startX)||!Te(L.startY),Ut=!Te(L.arrowStartX)||!Te(L.arrowStartY),Xt=!Te(L.endX)||!Te(L.endY),Ht=!Te(L.arrowEndX)||!Te(L.arrowEndY),Yt=3,Wt=this.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.arrowShapeWidth,Gt=Yt*Wt;if("bezier"===L.edgeType){var Kt=bn({x:L.ctrlpts[0],y:L.ctrlpts[1]},{x:L.startX,y:L.startY}),Zt=Kt<Gt,$t=bn({x:L.ctrlpts[0],y:L.ctrlpts[1]},{x:L.endX,y:L.endY}),Qt=$t<Gt,Jt=!1;if(Vt||Ut||Zt){Jt=!0;var en={x:L.ctrlpts[0]-w.x,y:L.ctrlpts[1]-w.y},tn=Math.sqrt(en.x*en.x+en.y*en.y),nn={x:en.x/tn,y:en.y/tn},rn=Math.max(E,_),on={x:L.ctrlpts[0]+2*nn.x*rn,y:L.ctrlpts[1]+2*nn.y*rn},an=k.intersectLine(w.x,w.y,E,_,on.x,on.y,0);Zt?(L.ctrlpts[0]=L.ctrlpts[0]+nn.x*(Gt-Kt),L.ctrlpts[1]=L.ctrlpts[1]+nn.y*(Gt-Kt)):(L.ctrlpts[0]=an[0]+nn.x*Gt,L.ctrlpts[1]=an[1]+nn.y*Gt)}if(Xt||Ht||Qt){Jt=!0;var en={x:L.ctrlpts[0]-x.x,y:L.ctrlpts[1]-x.y},tn=Math.sqrt(en.x*en.x+en.y*en.y),nn={x:en.x/tn,y:en.y/tn},rn=Math.max(E,_),on={x:L.ctrlpts[0]+2*nn.x*rn,y:L.ctrlpts[1]+2*nn.y*rn},sn=C.intersectLine(x.x,x.y,S,T,on.x,on.y,0);Qt?(L.ctrlpts[0]=L.ctrlpts[0]+nn.x*(Gt-$t),L.ctrlpts[1]=L.ctrlpts[1]+nn.y*(Gt-$t)):(L.ctrlpts[0]=sn[0]+nn.x*Gt,L.ctrlpts[1]=sn[1]+nn.y*Gt)}Jt&&this.findEndpoints(l)}this.checkForInvalidEdgeWarning(l),this.storeAllpts(l),this.storeEdgeProjections(l),this.calculateArrowAngles(l)}this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}}this.findHaystackPoints(s)}},Is.getSegmentPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("segments"===n)return Z(t.segpts)},Is.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return Z(t.ctrlpts)},Is.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return{x:t.midX,y:t.midY}};var Ls={};Ls.manualEndptToPx=function(e,t){var n=this,r=e.position(),i=e.outerWidth(),o=e.outerHeight();if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*i),"%"===t.units[1]&&(a[1]=a[1]*o),a[0]+=r.x,a[1]+=r.y,a}var s=t.pfValue[0];s=-Math.PI/2+s;var u=2*Math.max(i,o),l=[r.x+Math.cos(s)*u,r.y+Math.sin(s)*u];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,i,o,l[0],l[1],0)},Ls.findEndpoints=function(e){var t,n=this,r=e.source()[0],i=e.target()[0],o=r.position(),a=i.position(),s=e.pstyle("target-arrow-shape").value,u=e.pstyle("source-arrow-shape").value,l=e.pstyle("target-distance-from-node").pfValue,c=e.pstyle("source-distance-from-node").pfValue,h=e._private.rscratch,f=h.edgeType,d="self"===f||"compound"===f,p="bezier"===f||"multibezier"===f||d,v="bezier"!==f,g="straight"===f||"segments"===f,y="segments"===f,m=p||v||g,b=e.pstyle("source-endpoint"),w=d?"outside-to-node":b.value,x=e.pstyle("target-endpoint"),E=d?"outside-to-node":x.value;h.srcManEndpt=b,h.tgtManEndpt=x;var _,S,T,k;if(p){var C=[h.ctrlpts[0],h.ctrlpts[1]],P=v?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:C;_=P,S=C}else if(g){var A=y?h.segpts.slice(0,2):[a.x,a.y],O=y?h.segpts.slice(h.segpts.length-2):[o.x,o.y];_=O,S=A}if("inside-to-node"===E)t=[a.x,a.y];else if(x.units)t=this.manualEndptToPx(i,x);else if("outside-to-line"===E)t=h.tgtIntn;else if("outside-to-node"===E||"outside-to-node-or-label"===E?T=_:"outside-to-line"!==E&&"outside-to-line-or-label"!==E||(T=[o.x,o.y]),t=n.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),T[0],T[1],0),"outside-to-node-or-label"===E||"outside-to-line-or-label"===E){var D=i._private.rscratch,N=D.labelWidth,M=D.labelHeight,I=D.labelX,L=D.labelY,R=i.pstyle("text-valign").value;"top"===R?L-=M/2:"bottom"===R&&(L+=M/2);var B=i.pstyle("text-halign").value;"left"===B?I-=N/2:"right"===B&&(I+=N/2);var j=n.nodeShapes.rectangle.intersectLine(I,L,N,M,T[0],T[1],0),q=o,F=wn(q,cn(t)),z=wn(q,cn(j));z<F&&(t=j)}var V=er(t,_,n.arrowShapes[s].spacing(e)+l),U=er(t,_,n.arrowShapes[s].gap(e)+l);if(h.endX=U[0],h.endY=U[1],h.arrowEndX=V[0],h.arrowEndY=V[1],"inside-to-node"===w)t=[o.x,o.y];else if(b.units)t=this.manualEndptToPx(r,b);else if("outside-to-line"===w)t=h.srcIntn;else if("outside-to-node"===w||"outside-to-node-or-label"===w?k=S:"outside-to-line"!==w&&"outside-to-line-or-label"!==w||(k=[a.x,a.y]),t=n.nodeShapes[this.getNodeShape(r)].intersectLine(o.x,o.y,r.outerWidth(),r.outerHeight(),k[0],k[1],0),"outside-to-node-or-label"===w||"outside-to-line-or-label"===w){var X=r._private.rscratch,H=X.labelWidth,Y=X.labelHeight,W=X.labelX,G=X.labelY,K=r.pstyle("text-valign").value;"top"===K?G-=Y/2:"bottom"===K&&(G+=Y/2);var Z=r.pstyle("text-halign").value;"left"===Z?W-=H/2:"right"===Z&&(W+=H/2);var $=n.nodeShapes.rectangle.intersectLine(W,G,H,Y,k[0],k[1],0),Q=a,J=wn(Q,cn(t)),ee=wn(Q,cn($));ee<J&&(t=$)}var te=er(t,S,n.arrowShapes[u].spacing(e)+c),ne=er(t,S,n.arrowShapes[u].gap(e)+c);h.startX=ne[0],h.startY=ne[1],h.arrowStartX=te[0],h.arrowStartY=te[1],m&&(Te(h.startX)&&Te(h.startY)&&Te(h.endX)&&Te(h.endY)?h.badLine=!1:h.badLine=!0)},Ls.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},Ls.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var Rs={};Rs.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)$(this,e,n.allpts.slice(i,i+6))}else if("segments"===r)for(var o=t.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]});else if("haystack"===r){var a=n.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Rs.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Bs={};Bs.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Ie(t)){var n,r,i=e._private,o=e.width(),a=e.height(),s=e.padding(),u=e.position(),l=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,f=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}h.labelX=n,h.labelY=r,f.labelX=n,f.labelY=r,this.applyLabelDimensions(e)}};var js=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},qs=function(e,t){var n=t.x-e.x,r=t.y-e.y;return js(n,r)},Fs=function(e,t,n,r){var i=Tn(0,r-.001,1),o=Tn(0,r+.001,1),a=_n(e,t,n,i),s=_n(e,t,n,o);return qs(a,s)};Bs.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,o={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(o.mid||o.source||o.target){t={x:r.midX,y:r.midY};var a=function(e,t,r){qt(n.rscratch,e,t,r),qt(n.rstyle,e,t,r)};a("labelX",null,t.x),a("labelY",null,t.y);var s=js(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function c(){function e(e,t,n,r,i){var o=bn(t,n),a=e.segments[e.segments.length-1],s={p0:t,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o};e.segments.push(s),e.length+=o}if(c.cache)return c.cache;for(var t=[],o=0;o+5<r.allpts.length;o+=4){var a={x:r.allpts[o],y:r.allpts[o+1]},s={x:r.allpts[o+2],y:r.allpts[o+3]},u={x:r.allpts[o+4],y:r.allpts[o+5]};t.push({p0:a,p1:s,p2:u,startDist:0,length:0,segments:[]})}for(var l=n.rstyle.bezierPts,h=i.bezierProjPcts.length,o=0;o<t.length;o++){var f=t[o],d=t[o-1];d&&(f.startDist=d.startDist+d.length),e(f,f.p0,l[o*h],0,i.bezierProjPcts[0]);for(var p=0;p<h-1;p++)e(f,l[o*h+p],l[o*h+p+1],i.bezierProjPcts[p],i.bezierProjPcts[p+1]);e(f,l[o*h+h-1],f.p2,i.bezierProjPcts[h-1],1)}return c.cache=t},l=function(n){var i,s="source"===n;if(o[n]){var l=e.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=u(),f=0,d=0,p=0;p<h.length;p++){for(var v=h[s?p:h.length-1-p],g=0;g<v.segments.length;g++){var y=v.segments[s?g:v.segments.length-1-g],m=p===h.length-1&&g===v.segments.length-1;if(f=d,d+=y.length,d>=l||m){c={cp:v,segment:y};break}}if(c)break}var v=c.cp,y=c.segment,b=(l-f)/y.length,w=y.t1-y.t0,x=s?y.t0+w*b:y.t1-w*b;x=Tn(0,x,1),t=_n(v.p0,v.p1,v.p2,x),i=Fs(v.p0,v.p1,v.p2,x,t);break;case"straight":case"segments":case"haystack":for(var E,_,S,T,k=0,C=r.allpts.length,p=0;p+3<C&&(s?(S={x:r.allpts[p],y:r.allpts[p+1]},T={x:r.allpts[p+2],y:r.allpts[p+3]}):(S={x:r.allpts[C-2-p],y:r.allpts[C-1-p]},T={x:r.allpts[C-4-p],y:r.allpts[C-3-p]}),E=bn(S,T),_=k,k+=E,!(k>=l));p+=2);var P=l-_,x=P/E;x=Tn(0,x,1),t=Sn(S,T,x),i=qs(S,T)}a("labelX",n,t.x),a("labelY",n,t.y),a("labelAutoAngle",n,i)}};l("source"),l("target"),this.applyLabelDimensions(e)}},Bs.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},Bs.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r);qt(n.rstyle,"labelWidth",t,i.width),qt(n.rscratch,"labelWidth",t,i.width),qt(n.rstyle,"labelHeight",t,i.height),qt(n.rscratch,"labelHeight",t,i.height)},Bs.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,o=e.pstyle("text-transform").value,a=function(e,r){return r?(qt(n.rscratch,e,t,r),r):jt(n.rscratch,e,t)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var u=a("labelKey");if(null!=u&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l=i.split("\n"),c=e.pstyle("text-max-width").pfValue,h=[],f=0;f<l.length;f++){var d=l[f],p=this.calculateLabelDimensions(e,d),v=p.width;if(v>c){for(var g=d.split(/\s+/),y="",m=0;m<g.length;m++){var b=g[m],w=0===y.length?b:y+" "+b,x=this.calculateLabelDimensions(e,w),E=x.width;E<=c?y+=b+" ":(h.push(y),y=b+" ")}y.match(/^\s+$/)||h.push(y)}else h.push(d)}a("labelWrapCachedLines",h),i=a("labelWrapCachedText",h.join("\n")),a("labelWrapKey",u)}else if("ellipsis"===s){for(var c=e.pstyle("text-max-width").pfValue,_="",S="",T=!1,k=0;k<i.length;k++){var C=this.calculateLabelDimensions(e,_+i[k]+S).width;if(C>c)break;_+=i[k],k===i.length-1&&(T=!0)}return T||(_+=S),_}return i},Bs.calculateLabelDimensions=function(e,t){var n=this,r=gt(t,e._private.labelDimsKey),i=n.labelDimCache||(n.labelDimCache=[]),o=i[r];if(null!=o)return o;var a=1,s=e.pstyle("font-style").strValue,u=a*e.pstyle("font-size").pfValue+"px",l=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var f=h.style;return f.fontFamily=l,f.fontStyle=s,f.fontSize=u,f.fontWeight=c,f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none",f.padding="0",f.lineHeight="1","wrap"===e.pstyle("text-wrap").value?f.whiteSpace="pre":f.whiteSpace="normal",h.textContent=t,i[r]={width:Math.ceil(h.clientWidth/a),height:Math.ceil(h.clientHeight/a)}},Bs.calculateLabelAngles=function(e){var t=e._private,n=t.rscratch,r=e.isEdge(),i=e.pstyle("text-rotation"),o=i.strValue;"none"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:r&&"autorotate"===o?(n.labelAngle=n.labelAutoAngle,n.sourceLabelAngle=n.sourceLabelAutoAngle,n.targetLabelAngle=n.targetLabelAutoAngle):"autorotate"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=i.pfValue};var zs={},Vs=28,Us=!1;zs.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if("cutrectangle"===n&&(e.width()<Vs||e.height()<Vs))return Us||(Ct("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Us=!0),"rectangle";if(e.isParent())return"rectangle"===n||"roundrectangle"===n||"cutrectangle"===n||"barrel"===n?n:"rectangle";if("polygon"===n){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n};var Xs={};Xs.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),n)for(var r=0;r<e.length;r++){var i=e[r],o=i._private,a=o.rstyle;a.clean=!1}};n.binder(e).on("bounds.* dirty.*",function(e){var t=e.target;r(t)}).on("style.* background.*",function(e){var t=e.target;r(t,!1)});var i=function(i){if(i){for(var o=n.onUpdateEleCalcsFns,a=0;a<t.length;a++)r(t[a].connectedEdges());if(o)for(var a=0;a<o.length;a++){var s=o[a];s(i,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},Xs.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)},Xs.recalculateRenderedStyle=function(e,t){var n=[],r=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.rstyle;t&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===a.group?r.push(o):n.push(o),s.clean=!0)}for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=a.rstyle,u=o.position();this.recalculateNodeLabelProjection(o),s.nodeX=u.x,s.nodeY=u.y,s.nodeW=o.pstyle("width").pfValue,s.nodeH=o.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var i=0;i<n.length;i++){var o=n[i],a=o._private,s=a.rstyle,l=a.rscratch;this.recalculateEdgeLabelProjections(o),s.srcX=l.arrowStartX,s.srcY=l.arrowStartY,s.tgtX=l.arrowEndX,s.tgtY=l.arrowEndY,s.midX=l.midX,s.midY=l.midY,s.labelAngle=l.labelAngle,s.sourceLabelAngle=l.sourceLabelAngle,s.targetLabelAngle=l.targetLabelAngle}}};var Hs={};Hs.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):i.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}},Hs.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},Hs.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(ma),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var Ys={};[Ns,Ms,Is,Ls,Rs,Bs,zs,Xs,Hs].forEach(function(e){Je(Ys,e)});var Ws={};Ws.getCachedImage=function(e,t,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[e];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[e]=i[e]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var s="data:",u=e.substring(0,s.length).toLowerCase()===s;return u||(a.crossOrigin=t),a.src=e,a};var Gs={};Gs.registerBinding=function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,i)},Gs.binder=function(e){var t=this,n=e===window||e===document||e===document.body||Le(e);if(null==t.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(o){}t.supportsPassiveEvents=r}var a=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),t.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},Gs.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},Gs.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},Gs.load=function(){var e=this,t=function(e){return e.selected()},n=function(t,n,r,i){null==t&&(t=e.cy);for(var o=0;o<n.length;o++){var a=n[o];t.emit({originalEvent:r,type:a,position:i})}},r=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},i=function(t,n){var r=!0;if(e.cy.hasCompoundNodes()&&t&&t.isEdge())for(var i=0;n&&i<n.length;i++){var t=n[i];if(t.isNode()&&t.isParent()){r=!1;break}}else r=!0;return r},o=function(e){e[0]._private.grabbed=!0},a=function(e){e[0]._private.grabbed=!1},s=function(e){e[0]._private.rscratch.inDragLayer=!0},u=function(e){e[0]._private.rscratch.inDragLayer=!1},l=function(e){e[0]._private.rscratch.isGrabTarget=!0},c=function(e){e[0]._private.rscratch.isGrabTarget=!1},h=function(e,t){var n=t.addToList,r=n.has(e);
r||(n.merge(e),o(e))},f=function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(s),n.connectedEdges().forEach(s)),t.addToList&&t.addToList.unmerge(n)}},d=function(t,n){n=n||{};var r=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(s),t.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(s)),n.addToList&&t.forEach(function(e){h(e,n)}),f(t,n),g(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},p=d,v=function(t){t&&(e.getCachedZSortedEles().forEach(function(e){a(e),u(e),c(e)}),e.updateCachedGrabbedEles())},g=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(s),r.forEach(s)),t.addToList&&r.forEach(function(e){h(e,t)})}}},y=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},m="undefined"!=typeof MutationObserver;m?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var b=he(function(){e.cy.resize()},100);m&&(e.styleObserver=new MutationObserver(b),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",b);var w=function(e,t){for(;null!=e;)t(e),e=e.parentNode},x=function(){e.invalidateContainerClientCoordsCache()};w(e.container,function(t){e.registerBinding(t,"transitionend",x),e.registerBinding(t,"animationend",x),e.registerBinding(t,"scroll",x)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var E=function(){return 0!==e.selection[4]},_=function(t){for(var n=e.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=t.touches?t.touches:[t],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=e.container,f=t.target,d=f.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};e.registerBinding(e.container,"mousedown",function(t){if(_(t)){t.preventDefault(),y(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,i=[t.clientX,t.clientY],o=e.projectIntoViewport(i[0],i[1]),a=e.selection,s=e.findNearestElements(o[0],o[1],!0,!1),u=s[0],c=e.dragData.possibleDragElements;e.hoverData.mdownPos=o,e.hoverData.mdownGPos=i;var h=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:o[0],y:o[1]}})}},e.tapholdDuration)};if(3==t.which){e.hoverData.cxtStarted=!0;var f={originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}};u?(u.activate(),u.emit(f),e.hoverData.down=u):r.emit(f),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var v=function(e){return{originalEvent:t,type:e,position:{x:o[0],y:o[1]}}},g=function(e){e.emit(v("grab"))};if(l(u),u.selected()){c=e.dragData.possibleDragElements=r.collection();var m=r.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});d(m,{addToList:c}),u.emit(v("grabon")),m.forEach(g)}else c=e.dragData.possibleDragElements=r.collection(),p(u,{addToList:c}),u.emit(v("grabon")).emit(v("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=s,e.hoverData.downTime=(new Date).getTime(),n(u,["mousedown","tapstart","vmousedown"],t,{x:o[0],y:o[1]}),null==u?(a[4]=1,e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()):u.isEdge()&&(a[4]=1),h()}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1),e.registerBinding(window,"mousemove",function(t){var o=e.hoverData.capture;if(o||_(t)){var a=!1,s=e.cy,u=s.zoom(),l=[t.clientX,t.clientY],c=e.projectIntoViewport(l[0],l[1]),h=e.hoverData.mdownPos,f=e.hoverData.mdownGPos,p=e.selection,g=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(g=e.findNearestElement(c[0],c[1],!0,!1));var y,m=e.hoverData.last,b=e.hoverData.down,w=[c[0]-p[2],c[1]-p[3]],x=e.dragData.possibleDragElements;if(f){var E=l[0]-f[0],S=E*E,T=l[1]-f[1],k=T*T,C=S+k;e.hoverData.isOverThresholdDrag=y=C>=e.desktopTapThreshold2}var P=r(t);y&&(e.hoverData.tapholdCancelled=!0);var A=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(w[0]),t.push(w[1])):(t[0]+=w[0],t[1]+=w[1])};a=!0,n(g,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var O=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||s.emit({originalEvent:t,type:"boxstart",position:{x:c[0],y:c[1]}}),p[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(y){var D={originalEvent:t,type:"cxtdrag",position:{x:c[0],y:c[1]}};b?b.emit(D):s.emit(D),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&g===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:c[0],y:c[1]}}),e.hoverData.cxtOver=g,g&&g.emit({originalEvent:t,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(e.hoverData.dragging){if(a=!0,s.panningEnabled()&&s.userPanningEnabled()){var N;if(e.hoverData.justStartedPan){var M=e.hoverData.mdownPos;N={x:(c[0]-M[0])*u,y:(c[1]-M[1])*u},e.hoverData.justStartedPan=!1}else N={x:w[0]*u,y:w[1]*u};s.panBy(N),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=p[4]||null!=b&&!b.isEdge()){if(b&&b.isEdge()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==m||(m&&n(m,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),g&&n(g,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=g),b)if(y){if(s.boxSelectionEnabled()&&P)b&&b.grabbed()&&(v(x),b.emit("freeon"),x.emit("free"),e.dragData.didDrag&&(b.emit("dragfreeon"),x.emit("dragfree"))),O();else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var I=!e.dragData.didDrag;I&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var L=s.collection();e.hoverData.draggingEles||d(x,{inDragLayer:!0});var R={x:0,y:0};if(Te(w[0])&&Te(w[1])&&(R.x+=w[0],R.y+=w[1],I)){var B=e.hoverData.dragDelta;B&&Te(B[0])&&Te(B[1])&&(R.x+=B[0],R.y+=B[1])}for(var j=0;j<x.length;j++){var q=x[j];e.nodeIsDraggable(q)&&q.grabbed()&&L.merge(q)}e.hoverData.draggingEles=!0,L.silentShift(R).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else A();a=!0}else if(y){if(e.hoverData.dragging||!s.boxSelectionEnabled()||!P&&s.panningEnabled()&&s.userPanningEnabled()){if(!e.hoverData.selecting&&s.panningEnabled()&&s.userPanningEnabled()){var F=i(b,e.hoverData.downs);F&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,p[4]=0,e.data.bgActivePosistion=cn(h),e.redrawHint("select",!0),e.redraw())}}else O();b&&b.isEdge()&&b.active()&&b.unactivate()}return p[2]=c[0],p[3]=c[1],a?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}},!1),e.registerBinding(window,"mouseup",function(i){var o=e.hoverData.capture;if(o){e.hoverData.capture=!1;var a=e.cy,s=e.projectIntoViewport(i.clientX,i.clientY),u=e.selection,l=e.findNearestElement(s[0],s[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,f=r(i);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,h&&h.unactivate(),3===e.hoverData.which){var d={originalEvent:i,type:"cxttapend",position:{x:s[0],y:s[1]}};if(h?h.emit(d):a.emit(d),!e.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:s[0],y:s[1]}};h?h.emit(p):a.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(null!=h||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||r(i)||(a.$(t).unselect(),c.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=c=a.collection()),n(l,["mouseup","tapend","vmouseup"],i,{x:s[0],y:s[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||n(h,["click","tap","vclick"],i,{x:s[0],y:s[1]}),l!=h||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===a.selectionType()||f?l.selected()?l.unselect():l.select():f||(a.$(t).unmerge(l).unselect(),l.select())),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=a.collection(e.getAllInBox(u[0],u[1],u[2],u[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:i,position:{x:s[0],y:s[1]}});var y=function(e){return e.selectable()&&!e.selected()};"additive"===a.selectionType()?g.emit("box").stdFilter(y).select().emit("boxselect"):(f||a.$(t).unmerge(g).unselect(),g.emit("box").stdFilter(y).select().emit("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!u[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var m=h&&h.grabbed();v(c),m&&(h.emit("freeon"),c.emit("free"),e.dragData.didDrag&&(h.emit("dragfreeon"),c.emit("dragfree")))}}u[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var S=function(t){if(!e.scrollingPage){var n=e.cy,r=e.projectIntoViewport(t.clientX,t.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||E())return void t.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var o;o=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,o*=e.wheelSensitivity;var a=1===t.deltaMode;a&&(o*=33),n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:i[0],y:i[1]}})}}};e.registerBinding(e.container,"wheel",S,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var T,k,C,P,A,O,D,N,M,I,L,R,B,j,q=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},F=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};e.registerBinding(e.container,"touchstart",j=function(t){if(_(t)){y(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.touchData.now,o=e.touchData.earlier;if(t.touches[0]){var a=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(t.touches[1]){var a=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);i[2]=a[0],i[3]=a[1]}if(t.touches[2]){var a=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);i[4]=a[0],i[5]=a[1]}if(t.touches[1]){v(e.dragData.touchDragEles);var s=e.findContainerClientCoords();M=s[0],I=s[1],L=s[2],R=s[3],T=t.touches[0].clientX-M,k=t.touches[0].clientY-I,C=t.touches[1].clientX-M,P=t.touches[1].clientY-I,B=0<=T&&T<=L&&0<=C&&C<=L&&0<=k&&k<=R&&0<=P&&P<=R;var u=r.pan(),c=r.zoom();A=q(T,k,C,P),O=F(T,k,C,P),D=[(T+C)/2,(k+P)/2],N=[(D[0]-u.x)/c,(D[1]-u.y)/c];var h=200,f=h*h;if(O<f&&!t.touches[2]){var g=e.findNearestElement(i[0],i[1],!0,!0),m=e.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=g):m&&m.isNode()?(m.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=m):r.emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2]);else if(t.touches[1]);else if(t.touches[0]){var b=e.findNearestElements(i[0],i[1],!0,!0),w=b[0];if(null!=w&&(w.activate(),e.touchData.start=w,e.touchData.starts=b,e.nodeIsGrabbable(w))){var x=e.dragData.touchDragEles=r.collection(),E=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),w.selected()?(E=r.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),d(E,{addToList:x})):p(w,{addToList:x}),l(w);var S=function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}};w.emit(S("grabon")),E?E.forEach(function(e){e.emit(S("grab"))}):w.emit(S("grab"))}n(w,["touchstart","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==w&&(e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||e.touchData.selecting||n(e.touchData.start,["taphold"],t,{x:i[0],y:i[1]})},e.tapholdDuration)}if(t.touches.length>=1){for(var j=e.touchData.startPosition=[],z=0;z<i.length;z++)j[z]=o[z]=i[z];var V=t.touches[0];e.touchData.startGPosition=[V.clientX,V.clientY]}}},!1);var z;e.registerBinding(window,"touchmove",z=function(t){var r=e.touchData.capture;if(r||_(t)){var o=e.selection,a=e.cy,s=e.touchData.now,u=e.touchData.earlier,l=a.zoom();if(t.touches[0]){var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){var c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){var c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}var h,f=e.touchData.startGPosition;if(r&&t.touches[0]&&f){for(var p=[],g=0;g<s.length;g++)p[g]=s[g]-u[g];var y=t.touches[0].clientX-f[0],m=y*y,b=t.touches[0].clientY-f[1],w=b*b,x=m+w;h=x>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var E=t.touches[0].clientX-M,S=t.touches[0].clientY-I,D=t.touches[1].clientX-M,L=t.touches[1].clientY-I,R=F(E,S,D,L),j=R/O,z=150,V=z*z,U=1.5,X=U*U;if(j>=X||R>=V){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var H={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(H),e.touchData.start=null):a.emit(H)}}if(r&&e.touchData.cxt){var H={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(H):a.emit(H),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Y=e.findNearestElement(s[0],s[1],!0,!0);e.touchData.cxtOver&&Y===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=Y,Y&&Y.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&t.touches[2]&&a.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.redrawHint("select",!0),o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),o[4]=1,e.touchData.selecting=!0,e.redraw();else if(r&&t.touches[1]&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var W=e.dragData.touchDragEles;if(W){e.redrawHint("drag",!0);for(var G=0;G<W.length;G++){var K=W[G]._private;K.grabbed=!1,K.rscratch.inDragLayer=!1}}var Z=e.touchData.start,E=t.touches[0].clientX-M,S=t.touches[0].clientY-I,D=t.touches[1].clientX-M,L=t.touches[1].clientY-I,$=q(E,S,D,L),Q=$/A;if(B){var J=E-T,ee=S-k,te=D-C,ne=L-P,re=(J+te)/2,ie=(ee+ne)/2,oe=a.zoom(),ae=oe*Q,se=a.pan(),ue=N[0]*oe+se.x,le=N[1]*oe+se.y,ce={x:-ae/oe*(ue-se.x-re)+ue,y:-ae/oe*(le-se.y-ie)+le};if(Z&&Z.active()){var W=e.dragData.touchDragEles;v(W),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Z.unactivate().emit("freeon"),W.emit("free"),e.dragData.didDrag&&(Z.emit("dragfreeon"),W.emit("dragfree"))}a.viewport({zoom:ae,pan:ce,cancelOnFailedZoom:!0}),A=$,T=E,k=S,C=D,P=L,e.pinching=!0}if(t.touches[0]){var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){var c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){var c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}}else if(t.touches[0]){var Y,he=e.touchData.start,fe=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(Y=e.findNearestElement(s[0],s[1],!0,!0)),r&&null!=he&&t.preventDefault(),r&&null!=he&&e.nodeIsDraggable(he))if(h){var W=e.dragData.touchDragEles,de=!e.dragData.didDrag;de&&d(W,{inDragLayer:!0}),e.dragData.didDrag=!0;var pe={x:0,y:0};if(Te(p[0])&&Te(p[1])&&(pe.x+=p[0],pe.y+=p[1],de)){e.redrawHint("eles",!0);var ve=e.touchData.dragDelta;ve&&Te(ve[0])&&Te(ve[1])&&(pe.x+=ve[0],pe.y+=ve[1])}e.hoverData.draggingEles=!0,W.silentShift(pe).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==u[0]&&e.touchData.startPosition[1]==u[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ve=e.touchData.dragDelta=e.touchData.dragDelta||[];0===ve.length?(ve.push(p[0]),ve.push(p[1])):(ve[0]+=p[0],ve[1]+=p[1])}if(n(he||Y,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),he&&he.grabbed()||Y==fe||(fe&&fe.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),Y&&Y.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=Y,r)for(var G=0;G<s.length;G++)s[G]&&e.touchData.startPosition[G]&&h&&(e.touchData.singleTouchMoved=!0);if(r&&(null==he||he.isEdge())&&a.panningEnabled()&&a.userPanningEnabled()){var ge=i(he,e.touchData.starts);ge&&(t.preventDefault(),e.swipePanning?a.panBy({x:p[0]*l,y:p[1]*l}):h&&(e.swipePanning=!0,a.panBy({x:y*l,y:b*l}),he&&(he.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion=cn(e.touchData.startPosition)),e.redrawHint("select",!0),e.touchData.start=null)));var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}}for(var g=0;g<s.length;g++)u[g]=s[g];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var V;e.registerBinding(window,"touchcancel",V=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()});var U;if(e.registerBinding(window,"touchend",U=function(r){var i=e.touchData.start,o=e.touchData.capture;if(o){0===r.touches.length&&(e.touchData.capture=!1),r.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var s=e.cy,u=s.zoom(),l=e.touchData.now,c=e.touchData.earlier;if(r.touches[0]){var h=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=h[0],l[1]=h[1]}if(r.touches[1]){var h=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);l[2]=h[0],l[3]=h[1]}if(r.touches[2]){var h=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);l[4]=h[0],l[5]=h[1]}i&&i.unactivate();var f;if(e.touchData.cxt){if(f={originalEvent:r,type:"cxttapend",position:{x:l[0],y:l[1]}},i?i.emit(f):s.emit(f),!e.touchData.cxtDragged){var d={originalEvent:r,type:"cxttap",position:{x:l[0],y:l[1]}};i?i.emit(d):s.emit(d)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=s.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:l[0],y:l[1]}});var g=function(e){return e.selectable()&&!e.selected()};p.emit("box").stdFilter(g).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=i&&i.unactivate(),r.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var y=e.dragData.touchDragEles;if(null!=i){var m=i._private.grabbed;v(y),e.redrawHint("drag",!0),e.redrawHint("eles",!0),m&&(i.emit("freeon"),y.emit("free"),e.dragData.didDrag&&(i.emit("dragfreeon"),y.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]}),i.unactivate(),e.touchData.start=null}else{var b=e.findNearestElement(l[0],l[1],!0,!0);n(b,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]})}var w=e.touchData.startPosition[0]-l[0],x=w*w,E=e.touchData.startPosition[1]-l[1],_=E*E,S=x+_,T=S*u*u;null!=i&&!e.dragData.didDrag&&i._private.selectable&&T<e.touchTapThreshold2&&!e.pinching&&("single"===s.selectionType()?(s.$(t).unmerge(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved||(n(i,["tap","vclick"],r,{x:l[0],y:l[1]}),i||s.$(":selected").unselect()),e.touchData.singleTouchMoved=!0}for(var k=0;k<l.length;k++)c[k]=l[k];e.dragData.didDrag=!1,0===r.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null),r.touches.length<2&&(e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var X=[],H=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},Y=function(e){return{event:e,touch:H(e)}},W=function(e){X.push(Y(e))},G=function(e){for(var t=0;t<X.length;t++){var n=X[t];if(n.event.pointerId===e.pointerId)return void X.splice(t,1)}},K=function(e){var t=X.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=H(e)},Z=function(e){e.touches=X.map(function(e){return e.touch})},$=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){$(e)||(e.preventDefault(),W(e),Z(e),j(e))}),e.registerBinding(e.container,"pointerup",function(e){$(e)||(G(e),Z(e),U(e))}),e.registerBinding(e.container,"pointercancel",function(e){$(e)||(G(e),Z(e),V(e))}),e.registerBinding(e.container,"pointermove",function(e){$(e)||(e.preventDefault(),K(e),Z(e),z(e))})}};var Ks={};Ks.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,o,a){return Jn(i,o,this.points,e,t,n/2,r/2,a)},checkPoint:function(e,t,n,r,i,o,a){return Hn(e,t,this.points,o,a,r,i,[0,-1],n)}}},Ks.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a){return Gn(i,o,e,t,n/2+a,r/2+a)},checkPoint:function(e,t,n,r,i,o,a){return Kn(e,t,r,i,o,a,n)}}},Ks.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:tr(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a){return Bn(i,o,e,t,n,r,a)},checkPoint:function(e,t,n,r,i,o,a){var s=ir(r,i),u=2*s;return!!Hn(e,t,this.points,o,a,r,i-u,[0,-1],n)||(!!Hn(e,t,this.points,o,a,r-u,i,[0,-1],n)||(!!Kn(e,t,u,u,o-r/2+s,a-i/2+s,n)||(!!Kn(e,t,u,u,o+r/2-s,a-i/2+s,n)||(!!Kn(e,t,u,u,o+r/2-s,a+i/2-s,n)||!!Kn(e,t,u,u,o-r/2+s,a+i/2-s,n)))))}}},Ks.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:or(),points:tr(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},generateCutTrianglePts:function(e,t,n,r){var i=this.cornerLength,o=t/2,a=e/2,s=n-a,u=n+a,l=r-o,c=r+o;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,n,r,i,o,a){var s=this.generateCutTrianglePts(n+2*a,r+2*a,e,t),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return Jn(i,o,u,e,t)},checkPoint:function(e,t,n,r,i,o,a){if(Hn(e,t,this.points,o,a,r,i-2*this.cornerLength,[0,-1],n))return!0;if(Hn(e,t,this.points,o,a,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,o,a);return Xn(e,t,s.topLeft)||Xn(e,t,s.topRight)||Xn(e,t,s.bottomRight)||Xn(e,t,s.bottomLeft)}}},Ks.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:tr(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a){var s=.15,u=.5,l=.85,c=this.generateBarrelBezierPts(n+2*a,r+2*a,e,t),h=function(e){var t=_n({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},s),n=_n({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},u),r=_n({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},l);return[e[0],e[1],t.x,t.y,n.x,n.y,r.x,r.y,e[4],e[5]]},f=[].concat(h(c.topLeft),h(c.topRight),h(c.bottomRight),h(c.bottomLeft));return Jn(i,o,f,e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,o=e/2,a=n-o,s=n+o,u=r-i,l=r+i,c=sr(e,t),h=c.heightOffset,f=c.widthOffset,d=c.ctrlPtOffsetPct*e,p={topLeft:[a,u+h,a+d,u,a+f,u],topRight:[s-f,u,s-d,u,s,u+h],bottomRight:[s,l-h,s-d,l,s-f,l],bottomLeft:[a+f,l,a+d,l,a,l-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,r,i,o,a){var s=sr(r,i),u=s.heightOffset,l=s.widthOffset;if(Hn(e,t,this.points,o,a,r,i-2*u,[0,-1],n))return!0;if(Hn(e,t,this.points,o,a,r-2*l,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,i,o,a),h=function(e,t,n){var r=n[4],i=n[2],o=n[0],a=n[5],s=n[1],u=Math.min(r,o),l=Math.max(r,o),c=Math.min(a,s),h=Math.max(a,s);if(u<=e&&e<=l&&c<=t&&t<=h){var f=ar(r,i,o),d=Fn(f[0],f[1],f[2],e),p=d.filter(function(e){return 0<=e&&e<=1});if(p.length>0)return p[0]}return null},f=Object.keys(c),d=0;d<f.length;d++){var p=f[d],v=c[p],g=h(e,t,v);if(null!=g){var y=v[5],m=v[3],b=v[1],w=En(y,m,b,g);if(v.isTop&&w<=t)return!0;if(v.isBottom&&t<=w)return!0}}return!1}}},Ks.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:tr(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a){var s=e-(n/2+a),u=t-(r/2+a),l=u,c=e+(n/2+a),h=Qn(i,o,e,t,s,u,c,l,!1);return h.length>0?h:Bn(i,o,e,t,n,r,a)},checkPoint:function(e,t,n,r,i,o,a){var s=ir(r,i),u=2*s;if(Hn(e,t,this.points,o,a,r,i-u,[0,-1],n))return!0;if(Hn(e,t,this.points,o,a,r-u,i,[0,-1],n))return!0;var l=r/2+2*n,c=i/2+2*n,h=[o-l,a-c,o-l,a,o+l,a,o+l,a-c];return!!Xn(e,t,h)||(!!Kn(e,t,u,u,o+r/2-s,a+i/2-s,n)||!!Kn(e,t,u,u,o-r/2+s,a+i/2-s,n))}}},Ks.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",tr(3,0)),this.generatePolygon("rectangle",tr(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",tr(5,0)),this.generatePolygon("hexagon",tr(6,0)),this.generatePolygon("heptagon",tr(7,0)),this.generatePolygon("octagon",tr(8,0));var n=new Array(20),r=rr(5,0),i=rr(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var a=0;a<i.length/2;a++)i[2*a]*=o,i[2*a+1]*=o;for(var a=0;a<5;a++)n[4*a]=r[2*a],n[4*a+1]=r[2*a+1],n[4*a+2]=i[2*a],n[4*a+3]=i[2*a+1];n=nr(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),e.makePolygon=function(e){var n,r=e.join("$"),i="polygon-"+r;return(n=this[i])?n:t.generatePolygon(i,e)}};var Zs={};Zs.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},Zs.redraw=function(e){e=e||Mt();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},Zs.beforeRender=function(e,t){if(!this.destroyed){t=t||0;var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}};var $s=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};Zs.startRenderLoop=function(){var e=this;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var t=function n(t){if(!e.destroyed){if(e.requestedFrame&&!e.skipFrame){$s(e,!0,t);var r=ft();e.render(e.renderOptions);var i=e.lastDrawTime=ft();void 0===e.averageRedrawTime&&(e.averageRedrawTime=i-r),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=i-r;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else $s(e,!1,t);e.skipFrame=!1,ht(n)}};ht(t)}};var Qs=function(e){this.init(e)},Js=Qs,eu=Js.prototype;eu.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],eu.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(de){var r=de.document,i=r.head,o="__________cytoscape_stylesheet",a="__________cytoscape_container",s=null!=r.getElementById(o);if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!s){var u=r.createElement("style");u.id=o,u.innerHTML="."+a+" { position: relative; }",i.insertBefore(u,i.children[0])}var l=de.getComputedStyle(n),c=l.getPropertyValue("position");"static"===c&&Ct("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=e.pixelRatio,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],
t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},eu.notify=function(e,t){var n=this;if(!this.destroyed){if("init"===e)return void n.load();if("destroy"===e)return void n.destroy();"add"!==e&&"remove"!==e&&"load"!==e&&"zorder"!==e&&"mount"!==e||n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},eu.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(o){}},eu.isHeadless=function(){return!1},[Ds,Ys,Ws,Gs,Ks,Zs].forEach(function(e){Je(eu,e)});var tu=1e3/60,nu={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=he(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=function(i,o){for(var a=ft(),s=n.averageRedrawTime,u=n.lastRedrawTime,l=[],c=n.cy.extent(),h=n.getPixelRatio();;){var f=ft(),d=f-a,p=f-o;if(u<tu){var v=tu-(i?s:0);if(p>=e.deqFastCost*v)break}else if(i){if(d>=e.deqCost*u||d>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*tu)break;var g=e.deq(t,h,c);if(!(g.length>0))break;for(var y=0;y<g.length;y++)l.push(g[y])}l.length>0&&(e.onDeqd(t,l),!i&&e.shouldRedraw(t,l,h,c)&&r())},o=e.priority||Tt;n.beforeRender(i,o(t))}}}},ru=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;o(this,e),this.idsByKey=new zt,this.keyForId=new zt,this.cachesByLvl=new zt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return s(e,[{key:"getIdsFor",value:function(e){null==e&&kt("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new Xt,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e)["delete"](t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(r,t),this.keyForId.set(t,r)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId["delete"](t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);return n!==r}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,r=t.get(e);return r||(r=new zt,t.set(e,r),n.push(e)),r}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),r=this.getCache(n,t);return null!=r&&this.updateKeyMappingFor(e),r}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id()),r=this.getCache(n,t);return r}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var r=this.getKey(e);this.setCache(r,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t)["delete"](e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var r=this.doesEleInvalidateKey(e);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),e}(),iu=25,ou=50,au=-4,su=3,uu=7.99,lu=8,cu=1024,hu=1024,fu=1024,du=.2,pu=.8,vu=10,gu=.15,yu=.1,mu=.9,bu=.9,wu=100,xu=1,Eu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},_u=It({getKey:null,doesEleInvalidateKey:_t,drawElement:null,getBoundingBox:null,isVisible:Et,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Su=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=_u(t);Je(n,r),n.lookup=new ru(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},Tu=Su.prototype;Tu.reasons=Eu,Tu.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},Tu.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r},Tu.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new fe(function(e,t){return t.reqs-e.reqs});return t},Tu.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t},Tu.getElement=function(e,t,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible())return null;if(!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(yn(s*n))),r<au)r=au;else if(s>=uu||r>su)return null;var l=Math.pow(2,r),c=t.h*l,h=t.w*l,f=a.eleTextBiggerThanMin(e,l);if(!this.isVisible(e,f))return null;var d=u.get(e,r);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var p;if(p=c<=iu?iu:c<=ou?ou:Math.ceil(c/ou)*ou,c>fu||h>hu)return null;var v=o.getTextureQueue(p),g=v[v.length-2],y=function(){return o.recycleTexture(p,h)||o.addTexture(p,h)};g||(g=v[v.length-1]),g||(g=y()),g.width-g.usedWidth<h&&(g=y());for(var m,b=function(e){return e&&e.scaledLabelShown===f},w=i&&i===Eu.dequeue,x=i&&i===Eu.highQuality,E=i&&i===Eu.downscale,_=r+1;_<=su;_++){var S=u.get(e,_);if(S){m=S;break}}var T=m&&m.level===r+1?m:null,k=function(){g.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,g.usedWidth,0,h,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,h,p),b(T))k();else if(b(m)){if(!x)return o.queueElement(e,m.level-1),m;for(var C=m.level;C>r;C--)T=o.getElement(e,t,n,C,Eu.downscale);k()}else{var P;if(!w&&!x&&!E)for(var A=r-1;A>=au;A--){var O=u.get(e,A);if(O){P=O;break}}if(b(P))return o.queueElement(e,r),P;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,e,t,f,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return d={x:g.usedWidth,texture:g,level:r,scale:l,width:h,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(h+lu),g.eleCaches.push(d),u.set(e,r,d),o.checkTextureFullness(g),d},Tu.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},Tu.invalidateElement=function(e){var t=this,n=t.lookup,r=[],i=n.isInvalid(e);if(i){for(var o=au;o<=su;o++){var a=n.getForCachedKey(e,o);a&&r.push(a)}var s=n.invalidate(e);if(s)for(var u=0;u<r.length;u++){var l=r[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,t.checkTextureUtility(c)}t.removeFromQueue(e)}},Tu.checkTextureUtility=function(e){e.invalidatedWidth>=du*e.width&&this.retireTexture(e)},Tu.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>pu&&e.fullnessChecks>=vu?Lt(n,e):e.fullnessChecks++},Tu.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n),i=this.lookup;Lt(r,e),e.retired=!0;for(var o=e.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}Rt(o);var u=t.getRetiredTextureQueue(n);u.push(e)},Tu.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),i={};return r.push(i),i.eleCaches=[],i.height=e,i.width=Math.max(cu,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},Tu.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),i=n.getRetiredTextureQueue(e),o=0;o<i.length;o++){var a=i[o];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Rt(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Lt(i,a),r.push(a),a}},Tu.queueElement=function(e,t){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(e),a=i[o];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var s={eles:e.spawn().merge(e),level:t,reqs:1,key:o};r.push(s),i[o]=s}},Tu.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),i=[],o=t.lookup,a=0;a<xu&&n.size()>0;a++){var s=n.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(r[u]=null,!c){i.push(s);var h=t.getBoundingBox(l);t.getElement(l,h,e,s.level,Eu.dequeue)}}return i},Tu.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),i=this.getKey(e),o=r[i];null!=o&&(1===o.eles.length?(o.reqs=xt,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(e))},Tu.onDequeue=function(e){this.onDequeues.push(e)},Tu.offDequeue=function(e){Lt(this.onDequeues,e)},Tu.setupDequeueing=nu.setupDequeueing({deqRedrawThreshold:wu,deqCost:gu,deqAvgCost:yu,deqNoDrawCost:mu,deqFastCost:bu,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var o=t[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(Mn(s,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var ku=1,Cu=-4,Pu=2,Au=3.99,Ou=50,Du=50,Nu=.15,Mu=.1,Iu=.9,Lu=.9,Ru=1,Bu=250,ju=16e6,qu=!0,Fu=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ft()-2*Bu,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=he(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},Du),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=Bu?t.skipping=!0:t.skipping=!1});var i=function(e,t){return t.reqs-e.reqs};t.layersQueue=new fe(i),t.setupDequeueing()},zu=Fu.prototype,Vu=0,Uu=Math.pow(2,53)-1;zu.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:Vu=++Vu%Uu,bb:e,level:t,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a},zu.getLayers=function(e,t,n){var r=this,i=r.renderer,o=i.cy,a=o.zoom(),s=r.firstGet;if(r.firstGet=!1,null==n)if(n=Math.ceil(yn(a*t)),n<Cu)n=Cu;else if(a>=Au||n>Pu)return null;r.validateLayersElesOrdering(n,e);var u,l,c=r.layersByLevel,h=Math.pow(2,n),f=c[n]=c[n]||[],d=r.levelIsComplete(n,e),p=function(){var t=function(t){if(r.validateLayersElesOrdering(t,e),r.levelIsComplete(t,e))return l=c[t],!0},i=function(e){if(!l)for(var r=n+e;Cu<=r&&r<=Pu&&!t(r);r+=e);};i(1),i(-1);for(var o=f.length-1;o>=0;o--){var a=f[o];a.invalid&&Lt(f,a)}};if(d)return f;p();var v=function(){if(!u){u=kn();for(var t=0;t<e.length;t++)Pn(u,e[t].boundingBox())}return u},g=function(e){e=e||{};var t=e.after;v();var i=u.w*h*(u.h*h);if(i>ju)return null;var o=r.makeLayer(u,n);if(null!=t){var a=f.indexOf(t)+1;f.splice(a,0,o)}else(void 0===e.insert||e.insert)&&f.unshift(o);return o};if(r.skipping&&!s)return null;for(var y=null,m=e.length/ku,b=!s,w=0;w<e.length;w++){var x=e[w],E=x._private.rscratch,_=E.imgLayerCaches=E.imgLayerCaches||{},S=_[n];if(S)y=S;else{if((!y||y.eles.length>=m||!Rn(y.bb,x.boundingBox()))&&(y=g({insert:!0,after:y}),!y))return null;l||b?r.queueLayer(y,x):r.drawEleInLayer(y,x,n,t),y.eles.push(x),_[n]=y}}return l?l:b?null:f},zu.getEleLevelForLayerLevel=function(e,t){return e},zu.drawEleInLayer=function(e,t,n,r){var i=this,o=this.renderer,a=e.context,s=t.boundingBox();0!==s.w&&0!==s.h&&t.visible()&&(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,t,null,null,n,qu),o.setImgSmoothing(a,!0))},zu.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||0===r.length)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0)return!1;if(a.invalid)return!1;i+=a.eles.length}return i===t.length},zu.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0)this.invalidateLayer(i);else for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==t[s+a]){this.invalidateLayer(i);break}}},zu.updateElementsInLayers=function(e,t){for(var n=this,r=Ae(e[0]),i=0;i<e.length;i++)for(var o=r?null:e[i],a=r?e[i]:e[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Cu;l<=Pu;l++){var c=u[l];c&&(o&&n.getEleLevelForLayerLevel(c.level)!==o.level||t(c,a,o))}},zu.haveLayers=function(){for(var e=this,t=!1,n=Cu;n<=Pu;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t},zu.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ft(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)}))},zu.invalidateLayer=function(e){if(this.lastInvalidationTime=ft(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];Lt(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[t]=null)}}},zu.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||(i=e.replacement=t.makeLayer(e.bb,e.level),i.replaces=e,i.eles=e.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})},zu.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},zu.queueLayer=function(e,t){var n=this,r=n.layersQueue,i=e.elesQueue,o=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;i.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},zu.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],i=0;i<Ru&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(t.drawEleInLayer(o,a,o.level,e),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&t.applyLayerReplacement(o),t.requestRedraw())}}return r},zu.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=e;for(var o=0;o<e.eles.length;o++){var a=e.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[e.level]=e)}t.requestRedraw()}},zu.requestRedraw=he(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),zu.setupDequeueing=nu.setupDequeueing({deqRedrawThreshold:Ou,deqCost:Nu,deqAvgCost:Mu,deqNoDrawCost:Iu,deqFastCost:Lu,deq:function(e,t){return e.dequeue(t)},onDeqd:Tt,shouldRedraw:Et,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Xu,Hu={};Hu.arrowShapeImpl=function(e){return(Xu||(Xu={polygon:Q,"triangle-backcurve":J,"triangle-tee":ee,"triangle-cross":ee,circle:te}))[e]};var Yu={};Yu.drawElement=function(e,t,n,r,i,o){var a=this;t.isNode()?a.drawNode(e,t,n,r,i,o):a.drawEdge(e,t,n,r,i,o)},Yu.drawElementOverlay=function(e,t){var n=this;t.isNode()?n.drawNodeOverlay(e,t):n.drawEdgeOverlay(e,t)},Yu.drawCachedElementPortion=function(e,t,n,r,i,o,a){var s=this,u=n.getBoundingBox(t);if(0!==u.w&&0!==u.h){var l=n.getElement(t,u,r,i,o);if(null!=l){var c=t.pstyle("opacity").pfValue;if(0===c)return;var h,f,d,p,v,g=a(s,t),y=u.x1,m=u.y1,b=u.w,w=u.h;if(0!==g){var x=b/2,E=w/2;d=y+x,p=m+E,e.translate(d,p),e.rotate(g),v=s.getImgSmoothing(e),v||s.setImgSmoothing(e,!0),h=-x,f=-E}else h=y,f=m;var _;1!==c&&(_=e.globalAlpha,e.globalAlpha=_*c),e.drawImage(l.texture.canvas,l.x,0,l.width,l.height,h,f,u.w,u.h),1!==c&&(e.globalAlpha=_),0!==g&&(e.rotate(-g),e.translate(-d,-p),v||s.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var Wu=function(){return 0},Gu=function(e,t){return e.getTextAngle(t,null)},Ku=function(e,t){return e.getTextAngle(t,"source")},Zu=function(e,t){return e.getTextAngle(t,"target")};Yu.drawCachedElement=function(e,t,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,f=t.boundingBox(),d=o===!0?u.reasons.highQuality:null;0!==f.w&&0!==f.h&&(r&&!Mn(f,r)||(a.drawCachedElementPortion(e,t,u,n,i,d,Wu),a.drawCachedElementPortion(e,t,l,n,i,d,Gu),t.isEdge()&&(a.drawCachedElementPortion(e,t,c,n,i,d,Ku),a.drawCachedElementPortion(e,t,h,n,i,d,Zu)),a.drawElementOverlay(e,t)))},Yu.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var i=t[r];n.drawElement(e,i)}},Yu.drawCachedElements=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];i.drawCachedElement(e,a,n,r)}},Yu.drawCachedNodes=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];a.isNode()&&i.drawCachedElement(e,a,n,r)}},Yu.drawLayeredElements=function(e,t,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(t,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;0!==u.w&&0!==u.h&&e.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(e,t,n,r)};var $u={};$u.drawEdge=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=t._private.rscratch;if(t.visible()&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var u;n&&(u=n,e.translate(-u.x1,-u.y1));var l=o?t.pstyle("opacity").value:1,c=t.pstyle("line-style").value,h=t.pstyle("width").pfValue,f=t.pstyle("line-cap").value,d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;e.lineWidth=h,e.lineCap=f,a.eleStrokeStyle(e,t,n),a.drawEdgePath(t,e,s.allpts,c),e.lineCap="butt"},p=function(){i&&a.drawEdgeOverlay(e,t)},v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;a.drawArrowheads(e,t,n)},g=function(){a.drawElementText(e,t,null,r)};e.lineJoin="round";var y="yes"===t.pstyle("ghost").value;if(y){var m=t.pstyle("ghost-offset-x").pfValue,b=t.pstyle("ghost-offset-y").pfValue,w=t.pstyle("ghost-opacity").value,x=l*w;e.translate(m,b),d(x),v(x),e.translate(-m,-b)}d(),v(),p(),g(),n&&e.translate(u.x1,u.y1)}},$u.drawEdgeOverlay=function(e,t){if(t.visible()){var n=t.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),o=t._private.rscratch,a=t.pstyle("overlay-padding").pfValue,s=2*a,u=t.pstyle("overlay-color").value;e.lineWidth=s,"self"!==o.edgeType||i?e.lineCap="round":e.lineCap="butt",r.colorStrokeStyle(e,u[0],u[1],u[2],n),r.drawEdgePath(t,e,o.allpts,"solid")}}},$u.drawEdgePath=function(e,t,n,r){var i,o=e._private.rscratch,a=t,s=!1,u=this.usePaths(),l=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(u){var h=n.join("$"),f=o.pathCacheKey&&o.pathCacheKey===h;f?(i=t=o.pathCache,s=!0):(i=t=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)t.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<n.length;p+=2)t.lineTo(n[p],n[p+1])}t=a,u?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},$u.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},$u.drawArrowhead=function(e,t,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=this,u=t.pstyle(n+"-arrow-shape").value;if("none"!==u){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,f=t.pstyle("opacity").value;void 0===a&&(a=f);var d=e.globalCompositeOperation;1===a&&"hollow"!==c||(e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,1),s.colorStrokeStyle(e,255,255,255,1),s.drawArrowShape(t,e,l,h,u,r,i,o),e.globalCompositeOperation=d);var p=t.pstyle(n+"-arrow-color").value;s.colorFillStyle(e,p[0],p[1],p[2],a),s.colorStrokeStyle(e,p[0],p[1],p[2],a),s.drawArrowShape(t,e,c,h,u,r,i,o)}}},$u.drawArrowShape=function(e,t,n,r,i,o,a,s){var u,l=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,f=t,d={x:o,y:a},p=e.pstyle("arrow-scale").value,v=this.getArrowWidth(r,p),g=l.arrowShapes[i];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],m=gt(i),b=y[m];null!=b?(u=t=b,h=!0):(u=t=new Path2D,y[m]=u)}t.beginPath&&t.beginPath(),h||(c?g.draw(t,1,0,{x:0,y:0},1):g.draw(t,v,s,d,r)),t.closePath&&t.closePath(),t=f,c&&(t.translate(o,a),t.rotate(s),t.scale(v,v)),"filled"!==n&&"both"!==n||(c?t.fill(u):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=(g.matchEdgeWidth?r:1)/(c?v:1),t.lineJoin="miter",c?t.stroke(u):t.stroke()),c&&(t.scale(1/v,1/v),t.rotate(-s),t.translate(-o,-a))};var Qu={};Qu.safeDrawImage=function(e,t,n,r,i,o,a,s,u,l){i<=0||o<=0||u<=0||l<=0||e.drawImage(t,n,r,i,o,a,s,u,l)},Qu.drawInscribedImage=function(e,t,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),h=c(n,"background-fit","value",r),f=c(n,"background-repeat","value",r),d=n.width(),p=n.height(),v=2*n.padding(),g=d+("inner"===c(n,"background-width-relative-to","value",r)?0:v),y=p+("inner"===c(n,"background-height-relative-to","value",r)?0:v),m=n._private.rscratch,b=n.pstyle("background-clip").value,w="node"===b,x=c(n,"background-image-opacity","value",r)*i,E=t.width||t.cachedW,_=t.height||t.cachedH;null!=E&&null!=_||(document.body.appendChild(t),E=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var S=E,T=_;if("auto"!==c(n,"background-width","value",r)&&(S="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*g:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(T="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*y:c(n,"background-height","pfValue",r)),0!==S&&0!==T){if("contain"===h){var k=Math.min(g/S,y/T);S*=k,T*=k}else if("cover"===h){var k=Math.max(g/S,y/T);S*=k,T*=k}var C=s-g/2;C+="%"===c(n,"background-position-x","units",r)?(g-S)*c(n,"background-position-x","pfValue",r):c(n,"background-position-x","pfValue",r);var P=u-y/2;P+="%"===c(n,"background-position-y","units",r)?(y-T)*c(n,"background-position-y","pfValue",r):c(n,"background-position-y","pfValue",r),m.pathCache&&(C-=s,P-=u,s=0,u=0);var A=e.globalAlpha;if(e.globalAlpha=x,"no-repeat"===f)w&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,s,u,g,y),e.clip())),o.safeDrawImage(e,t,0,0,E,_,C,P,S,T),w&&e.restore();else{var O=e.createPattern(t,f);e.fillStyle=O,o.nodeShapes[o.getNodeShape(n)].draw(e,s,u,g,y),e.translate(C,P),e.fill(),e.translate(-C,-P)}e.globalAlpha=A}};var Ju={};Ju.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(yn(n*r));t=Math.pow(2,i)}var o=e.pstyle("font-size").pfValue*t,a=e.pstyle("min-zoomed-font-size").pfValue;return!(o<a)},Ju.drawElementText=function(e,t,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(!a.eleTextBiggerThanMin(t))return}else if(r===!1)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var u=t.pstyle("text-halign").strValue;switch(u){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}e.textBaseline="bottom"}else{var s=t.pstyle("label"),l=t.pstyle("source-label"),c=t.pstyle("target-label");if(!(s&&s.value||l&&l.value||c&&c.value))return;e.textAlign="center",e.textBaseline="bottom"}var h,f=!n;n&&(h=n,e.translate(-h.x1,-h.y1)),null==i?(a.drawText(e,t,null,f,o),t.isEdge()&&(a.drawText(e,t,"source",f,o),a.drawText(e,t,"target",f,o))):a.drawText(e,t,i,f,o),n&&e.translate(h.x1,h.y1)},Ju.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},Ju.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=t.pstyle("text-opacity").value*(n?t.effectiveOpacity():1),u=t.pstyle("text-outline-opacity").value*s,l=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+a+" "+i+" "+o,e.lineJoin="round",this.colorFillStyle(e,l[0],l[1],l[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],u)},Ju.getTextAngle=function(e,t){var n,r=e._private,i=r.rscratch,o=t?t+"-":"",a=e.pstyle(o+"text-rotation"),s=jt(i,"labelAngle",t);return n="autorotate"===a.strValue?e.isEdge()?s:0:"none"===a.strValue?0:a.pfValue},Ju.drawText=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=t._private,a=o.rscratch,s=i?t.effectiveOpacity():1;if(0!==s&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var u=jt(a,"labelX",n),l=jt(a,"labelY",n),c=this.getLabelText(t,n);if(null!=c&&""!==c&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(e,t,i);var h=n?n+"-":"",f=jt(a,"labelWidth",n),d=jt(a,"labelHeight",n),p=t.pstyle(h+"text-margin-x").pfValue,v=t.pstyle(h+"text-margin-y").pfValue,g=t.isEdge(),y=t.pstyle("text-halign").value,m=t.pstyle("text-valign").value;g&&(y="center",m="center"),u+=p,l+=v;var b;if(b=r?this.getTextAngle(t,n):0,0!==b){var w=u,x=l;e.translate(w,x),e.rotate(b),u=0,l=0}switch(m){case"top":break;case"center":l+=d/2;break;case"bottom":l+=d}var E=t.pstyle("text-background-opacity").value,_=t.pstyle("text-border-opacity").value,S=t.pstyle("text-border-width").pfValue,T=t.pstyle("text-background-padding").pfValue;if(E>0||S>0&&_>0){var k=u-T;switch(y){case"left":k-=f;break;case"center":k-=f/2;break;case"right":}var C=l-d-T,P=f+2*T,A=d+2*T;if(E>0){var O=e.fillStyle,D=t.pstyle("text-background-color").value;e.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+E*s+")";var N=t.pstyle("text-background-shape").strValue;"roundrectangle"==N?ne(e,k,C,P,A,2):e.fillRect(k,C,P,A),e.fillStyle=O}if(S>0&&_>0){var M=e.strokeStyle,I=e.lineWidth,L=t.pstyle("text-border-color").value,R=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+_*s+")",e.lineWidth=S,e.setLineDash)switch(R){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=S/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(k,C,P,A),"double"===R){var B=S/2;e.strokeRect(k+B,C+B,P-2*B,A-2*B)}e.setLineDash&&e.setLineDash([]),e.lineWidth=I,e.strokeStyle=M}}var j=2*t.pstyle("text-outline-width").pfValue;if(j>0&&(e.lineWidth=j),"wrap"===t.pstyle("text-wrap").value){var q=jt(a,"labelWrapCachedLines",n),F=d/q.length;switch(m){case"top":l-=(q.length-1)*F;break;case"center":case"bottom":l-=(q.length-1)*F}for(var z=0;z<q.length;z++)j>0&&e.strokeText(q[z],u,l),e.fillText(q[z],u,l),l+=F}else j>0&&e.strokeText(c,u,l),e.fillText(c,u,l);0!==b&&(e.rotate(-b),e.translate(-w,-x))}}};var el={};el.drawNode=function(e,t,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,l=t._private,c=l.rscratch,h=t.position();if(Te(h.x)&&Te(h.y)&&t.visible()){var f,d=s?t.effectiveOpacity():1,p=u.usePaths(),v=!1,g=t.padding();r=t.width()+2*g,i=t.height()+2*g;var y;n&&(y=n,e.translate(-y.x1,-y.y1));for(var m=t.pstyle("background-image"),b=m.value,w=new Array(b.length),x=new Array(b.length),E=0,_=0;_<b.length;_++){var S=b[_],T=w[_]=null!=S&&"none"!==S;if(T){var k=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",_);E++,x[_]=u.getCachedImage(S,k,function(){l.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var C=t.pstyle("background-blacken").value,P=t.pstyle("border-width").pfValue,A=t.pstyle("background-opacity").value*d,O=t.pstyle("border-color").value,D=t.pstyle("border-style").value,N=t.pstyle("border-opacity").value*d;e.lineJoin="miter";var M=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;u.eleFillStyle(e,t,n)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;u.colorStrokeStyle(e,O[0],O[1],O[2],t)},L=t.pstyle("shape").strValue,R=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(h.x,h.y);var B=u.nodePathCache=u.nodePathCache||[],j=yt("polygon"===L?L+","+R.join(","):L,""+i,""+r),q=B[j];null!=q?(f=q,v=!0,c.pathCache=f):(f=new Path2D,B[j]=c.pathCache=f)}var F=function(){if(!v){var n=h;p&&(n={x:0,y:0}),u.nodeShapes[u.getNodeShape(t)].draw(f||e,n.x,n.y,r,i)}p?e.fill(f):e.fill()},z=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=l.backgrounding,i=0,o=0;o<x.length;o++)w[o]&&x[o].complete&&!x[o].error&&(i++,u.drawInscribedImage(e,x[o],t,o,n));l.backgrounding=!(i===E),r!==l.backgrounding&&t.updateStyle(!1)},V=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;u.hasPie(t)&&(u.drawPie(e,t,o),n&&(p||u.nodeShapes[u.getNodeShape(t)].draw(e,h.x,h.y,r,i)))},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=(C>0?C:-C)*t,r=C>0?0:255;0!==C&&(u.colorFillStyle(e,r,r,r,n),p?e.fill(f):e.fill())},X=function(){if(P>0){if(e.lineWidth=P,e.lineCap="butt",e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(p?e.stroke(f):e.stroke(),"double"===D){e.lineWidth=P/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(f):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}},H=function(){a&&u.drawNodeOverlay(e,t,h,r,i)},Y=function(){u.drawElementText(e,t,null,o)},W="yes"===t.pstyle("ghost").value;if(W){var G=t.pstyle("ghost-offset-x").pfValue,K=t.pstyle("ghost-offset-y").pfValue,Z=t.pstyle("ghost-opacity").value,$=Z*d;e.translate(G,K),M(Z*A),F(),z($),V(0!==C||0!==P),U($),I(Z*N),X(),e.translate(-G,-K)}M(),F(),z(),V(0!==C||0!==P),U(),I(),X(),p&&e.translate(-h.x,-h.y),Y(),H(),n&&e.translate(y.x1,y.y1)}},el.drawNodeOverlay=function(e,t,n,r,i){var o=this;if(t.visible()){var a=t.pstyle("overlay-padding").pfValue,s=t.pstyle("overlay-opacity").value,u=t.pstyle("overlay-color").value;if(s>0){if(n=n||t.position(),null==r||null==i){var l=t.padding();r=t.width()+2*l,i=t.height()+2*l}o.colorFillStyle(e,u[0],u[1],u[2],s),o.nodeShapes.roundrectangle.draw(e,n.x,n.y,r+2*a,i+2*a),e.fill()}}},el.hasPie=function(e){return e=e[0],e._private.hasPie},el.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),o=t.pstyle("pie-size"),a=r.x,s=r.y,u=t.width(),l=t.height(),c=Math.min(u,l)/2,h=0,f=this.usePaths();f&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,v=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*n,y=p/100;y+h>1&&(y=1-h);var m=1.5*Math.PI+2*Math.PI*h,b=2*Math.PI*y,w=m+b;0===p||h>=1||h+y>1||(e.beginPath(),e.moveTo(a,s),
e.arc(a,s,c,m,w),e.closePath(),this.colorFillStyle(e,v[0],v[1],v[2],g),e.fill(),h+=y)}};var tl={},nl=100;tl.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},tl.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},tl.createGradientStyleFor=function(e,t,n,r,i){var o,a=this.usePaths(),s=n.pstyle(t+"-gradient-stop-colors").value,u=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),f=bn(l,h),d=bn(c,h);o=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(f,d))}else{var p=a?{x:0,y:0}:n.position(),v=n.width(),g=n.height();o=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,g))}else if(n.isEdge()){var y=n.sourceEndpoint(),m=n.targetEndpoint();o=e.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=a?{x:0,y:0}:n.position(),w=n.width(),x=n.height(),E=w/2,_=x/2,S=n.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":o=e.createLinearGradient(b.x,b.y-_,b.x,b.y+_);break;case"to-top":o=e.createLinearGradient(b.x,b.y+_,b.x,b.y-_);break;case"to-left":o=e.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-right":o=e.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-bottom-right":case"to-right-bottom":o=e.createLinearGradient(b.x-E,b.y-_,b.x+E,b.y+_);break;case"to-top-right":case"to-right-top":o=e.createLinearGradient(b.x-E,b.y+_,b.x+E,b.y-_);break;case"to-bottom-left":case"to-left-bottom":o=e.createLinearGradient(b.x+E,b.y-_,b.x-E,b.y+_);break;case"to-top-left":case"to-left-top":o=e.createLinearGradient(b.x+E,b.y+_,b.x-E,b.y-_)}}if(!o)return null;for(var T=u.length===s.length,k=s.length,C=0;C<k;C++)o.addColorStop(T?u[C]:C/(k-1),"rgba("+s[C][0]+","+s[C][1]+","+s[C][2]+","+i+")");return o},tl.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);return i?void(e.fillStyle=i):null},tl.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},tl.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}},tl.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);return i?void(e.strokeStyle=i):null},tl.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},tl.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}},tl.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],o=r[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var u,l=i*a,c=o*a;if(l!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)u=n.canvases[f],u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";for(var f=0;f<t.BUFFER_COUNT;f++)u=n.bufferCanvases[f],u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";t.textureMult=1,a<=1&&(u=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,u.width=l*t.textureMult,u.height=c*t.textureMult),t.canvasWidth=l,t.canvasHeight=c}},tl.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},tl.render=function(e){function t(e,t,n,r,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",u.colorFillStyle(e,255,255,255,u.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=o}function n(e,n){var o,l,c,f;u.clearingMotionBlur||e!==h.bufferContexts[u.MOTIONBLUR_BUFFER_NODE]&&e!==h.bufferContexts[u.MOTIONBLUR_BUFFER_DRAG]?(o=S,l=E,c=u.canvasWidth,f=u.canvasHeight):(o={x:_.x*v,y:_.y*v},l=x*v,c=u.canvasWidth*v,f=u.canvasHeight*v),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?t(e,0,0,c,f):r||void 0!==n&&!n||e.clearRect(0,0,c,f),i||(e.translate(o.x,o.y),e.scale(l,l)),s&&e.translate(s.x,s.y),a&&e.scale(a,a)}e=e||Mt();var r=e.forcedContext,i=e.drawAllLayers,o=e.drawOnlyNodeLayer,a=e.forcedZoom,s=e.forcedPan,u=this,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,c=u.cy,h=u.data,f=h.canvasNeedsRedraw,d=u.textureOnViewport&&!r&&(u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming),p=void 0!==e.motionBlur?e.motionBlur:u.motionBlur,v=u.motionBlurPxRatio,g=c.hasCompoundNodes(),y=u.hoverData.draggingEles,m=!(!u.hoverData.selecting&&!u.touchData.selecting);p=p&&!r&&u.motionBlurEnabled&&!m;var b=p;r||(u.prevPxRatio!==l&&(u.invalidateContainerClientCoordsCache(),u.matchCanvasSize(u.container),u.redrawHint("eles",!0),u.redrawHint("drag",!0)),u.prevPxRatio=l),!r&&u.motionBlurTimeout&&clearTimeout(u.motionBlurTimeout),p&&(null==u.mbFrames&&(u.mbFrames=0),u.mbFrames++,u.mbFrames<3&&(b=!1),u.mbFrames>u.minMbLowQualFrames&&(u.motionBlurPxRatio=u.mbPxRBlurry)),u.clearingMotionBlur&&(u.motionBlurPxRatio=1),u.textureDrawLastFrame&&!d&&(f[u.NODE]=!0,f[u.SELECT_BOX]=!0);var w=c.style(),x=c.zoom(),E=void 0!==a?a:x,_=c.pan(),S={x:_.x,y:_.y},T={zoom:x,pan:{x:_.x,y:_.y}},k=u.prevViewport,C=void 0===k||T.zoom!==k.zoom||T.pan.x!==k.pan.x||T.pan.y!==k.pan.y;C||y&&!g||(u.motionBlurPxRatio=1),s&&(S=s),E*=l,S.x*=l,S.y*=l;var P=u.getCachedZSortedEles();if(d||(u.textureDrawLastFrame=!1),d){if(u.textureDrawLastFrame=!0,!u.textureCache){u.textureCache={},u.textureCache.bb=c.mutableElements().boundingBox(),u.textureCache.texture=u.data.bufferCanvases[u.TEXTURE_BUFFER];var A=u.data.bufferContexts[u.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,u.canvasWidth*u.textureMult,u.canvasHeight*u.textureMult),u.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:l*u.textureMult});var T=u.textureCache.viewport={zoom:c.zoom(),pan:c.pan(),width:u.canvasWidth,height:u.canvasHeight};T.mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}f[u.DRAG]=!1,f[u.NODE]=!1;var O=h.contexts[u.NODE],D=u.textureCache.texture,T=u.textureCache.viewport;O.setTransform(1,0,0,1,0,0),p?t(O,0,0,T.width,T.height):O.clearRect(0,0,T.width,T.height);var N=w.core("outside-texture-bg-color").value,M=w.core("outside-texture-bg-opacity").value;u.colorFillStyle(O,N[0],N[1],N[2],M),O.fillRect(0,0,T.width,T.height);var x=c.zoom();n(O,!1),O.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/l,T.height/T.zoom/l),O.drawImage(D,T.mpan.x,T.mpan.y,T.width/T.zoom/l,T.height/T.zoom/l)}else u.textureOnViewport&&!r&&(u.textureCache=null);var I=c.extent(),L=u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming||u.hoverData.draggingEles,R=u.hideEdgesOnViewport&&L,B=[];if(B[u.NODE]=!f[u.NODE]&&p&&!u.clearedForMotionBlur[u.NODE]||u.clearingMotionBlur,B[u.NODE]&&(u.clearedForMotionBlur[u.NODE]=!0),B[u.DRAG]=!f[u.DRAG]&&p&&!u.clearedForMotionBlur[u.DRAG]||u.clearingMotionBlur,B[u.DRAG]&&(u.clearedForMotionBlur[u.DRAG]=!0),f[u.NODE]||i||o||B[u.NODE]){var j=p&&!B[u.NODE]&&1!==v,O=r||(j?u.data.bufferContexts[u.MOTIONBLUR_BUFFER_NODE]:h.contexts[u.NODE]),q=p&&!j?"motionBlur":void 0;n(O,q),R?u.drawCachedNodes(O,P.nondrag,l,I):u.drawLayeredElements(O,P.nondrag,l,I),u.debug&&u.drawDebugPoints(O,P.nondrag),i||p||(f[u.NODE]=!1)}if(!o&&(f[u.DRAG]||i||B[u.DRAG])){var j=p&&!B[u.DRAG]&&1!==v,O=r||(j?u.data.bufferContexts[u.MOTIONBLUR_BUFFER_DRAG]:h.contexts[u.DRAG]);n(O,p&&!j?"motionBlur":void 0),R?u.drawCachedNodes(O,P.drag,l,I):u.drawCachedElements(O,P.drag,l,I),u.debug&&u.drawDebugPoints(O,P.drag),i||p||(f[u.DRAG]=!1)}if(u.showFps||!o&&f[u.SELECT_BOX]&&!i){var O=r||h.contexts[u.SELECT_BOX];if(n(O),1==u.selection[4]&&(u.hoverData.selecting||u.touchData.selecting)){var x=u.cy.zoom(),F=w.core("selection-box-border-width").value/x;O.lineWidth=F,O.fillStyle="rgba("+w.core("selection-box-color").value[0]+","+w.core("selection-box-color").value[1]+","+w.core("selection-box-color").value[2]+","+w.core("selection-box-opacity").value+")",O.fillRect(u.selection[0],u.selection[1],u.selection[2]-u.selection[0],u.selection[3]-u.selection[1]),F>0&&(O.strokeStyle="rgba("+w.core("selection-box-border-color").value[0]+","+w.core("selection-box-border-color").value[1]+","+w.core("selection-box-border-color").value[2]+","+w.core("selection-box-opacity").value+")",O.strokeRect(u.selection[0],u.selection[1],u.selection[2]-u.selection[0],u.selection[3]-u.selection[1]))}if(h.bgActivePosistion&&!u.hoverData.selecting){var x=u.cy.zoom(),z=h.bgActivePosistion;O.fillStyle="rgba("+w.core("active-bg-color").value[0]+","+w.core("active-bg-color").value[1]+","+w.core("active-bg-color").value[2]+","+w.core("active-bg-opacity").value+")",O.beginPath(),O.arc(z.x,z.y,w.core("active-bg-size").pfValue/x,0,2*Math.PI),O.fill()}var V=u.lastRedrawTime;if(u.showFps&&V){V=Math.round(V);var U=Math.round(1e3/V);O.setTransform(1,0,0,1,0,0),O.fillStyle="rgba(255, 0, 0, 0.75)",O.strokeStyle="rgba(255, 0, 0, 0.75)",O.lineWidth=1,O.fillText("1 frame = "+V+" ms = "+U+" fps",0,20);var X=60;O.strokeRect(0,30,250,20),O.fillRect(0,30,250*Math.min(U/X,1),20)}i||(f[u.SELECT_BOX]=!1)}if(p&&1!==v){var H=h.contexts[u.NODE],Y=u.data.bufferCanvases[u.MOTIONBLUR_BUFFER_NODE],W=h.contexts[u.DRAG],G=u.data.bufferCanvases[u.MOTIONBLUR_BUFFER_DRAG],K=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!b?e.clearRect(0,0,u.canvasWidth,u.canvasHeight):t(e,0,0,u.canvasWidth,u.canvasHeight);var i=v;e.drawImage(n,0,0,u.canvasWidth*i,u.canvasHeight*i,0,0,u.canvasWidth,u.canvasHeight)};(f[u.NODE]||B[u.NODE])&&(K(H,Y,B[u.NODE]),f[u.NODE]=!1),(f[u.DRAG]||B[u.DRAG])&&(K(W,G,B[u.DRAG]),f[u.DRAG]=!1)}u.prevViewport=T,u.clearingMotionBlur&&(u.clearingMotionBlur=!1,u.motionBlurCleared=!0,u.motionBlur=!0),p&&(u.motionBlurTimeout=setTimeout(function(){u.motionBlurTimeout=null,u.clearedForMotionBlur[u.NODE]=!1,u.clearedForMotionBlur[u.DRAG]=!1,u.motionBlur=!1,u.clearingMotionBlur=!d,u.mbFrames=0,f[u.NODE]=!0,f[u.DRAG]=!0,u.redraw()},nl)),r||c.emit("render")};var rl={};rl.drawPolygonPath=function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)e.lineTo(t+a*o[2*u],n+s*o[2*u+1]);e.closePath()},rl.drawRoundRectanglePath=function(e,t,n,r,i){var o=r/2,a=i/2,s=ir(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-a),e.arcTo(t+o,n-a,t+o,n,s),e.arcTo(t+o,n+a,t,n+a,s),e.arcTo(t-o,n+a,t-o,n,s),e.arcTo(t-o,n-a,t,n-a,s),e.lineTo(t,n-a),e.closePath()},rl.drawBottomRoundRectanglePath=function(e,t,n,r,i){var o=r/2,a=i/2,s=ir(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-a),e.lineTo(t+o,n-a),e.lineTo(t+o,n),e.arcTo(t+o,n+a,t,n+a,s),e.arcTo(t-o,n+a,t-o,n,s),e.lineTo(t-o,n-a),e.lineTo(t,n-a),e.closePath()},rl.drawCutRectanglePath=function(e,t,n,r,i){var o=r/2,a=i/2,s=or();e.beginPath&&e.beginPath(),e.moveTo(t-o+s,n-a),e.lineTo(t+o-s,n-a),e.lineTo(t+o,n-a+s),e.lineTo(t+o,n+a-s),e.lineTo(t+o-s,n+a),e.lineTo(t-o+s,n+a),e.lineTo(t-o,n+a-s),e.lineTo(t-o,n-a+s),e.closePath()},rl.drawBarrelPath=function(e,t,n,r,i){var o=r/2,a=i/2,s=t-o,u=t+o,l=n-a,c=n+a,h=sr(r,i),f=h.widthOffset,d=h.heightOffset,p=h.ctrlPtOffsetPct*f;e.beginPath&&e.beginPath(),e.moveTo(s,l+d),e.lineTo(s,c-d),e.quadraticCurveTo(s+p,c,s+f,c),e.lineTo(u-f,c),e.quadraticCurveTo(u-p,c,u,c-d),e.lineTo(u,l+d),e.quadraticCurveTo(u-p,l,u-f,l),e.lineTo(s+f,l),e.quadraticCurveTo(s+p,l,s,l+d),e.closePath()};for(var il=Math.sin(0),ol=Math.cos(0),al={},sl={},ul=Math.PI/40,ll=0*Math.PI;ll<2*Math.PI;ll+=ul)al[ll]=Math.sin(ll),sl[ll]=Math.cos(ll);rl.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=ul)o=t-s*al[l]*il+s*sl[l]*ol,a=n+u*sl[l]*il+u*al[l]*ol,0===l?e.moveTo(o,a):e.lineTo(o,a);e.closePath()};var cl={};cl.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},cl.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=e.full?Math.ceil(r.w):i[2],a=e.full?Math.ceil(r.h):i[3],s=Te(e.maxWidth)||Te(e.maxHeight),u=this.getPixelRatio(),l=1;if(void 0!==e.scale)o*=e.scale,a*=e.scale,l=e.scale;else if(s){var c=1/0,h=1/0;Te(e.maxWidth)&&(c=l*e.maxWidth/o),Te(e.maxHeight)&&(h=l*e.maxHeight/a),l=Math.min(c,h),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var f=document.createElement("canvas");f.width=o,f.height=a,f.style.width=o+"px",f.style.height=a+"px";var d=f.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*l,-r.y1*l),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(r.x1*l,r.y1*l);else{var v=t.pan(),g={x:v.x*l,y:v.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,o,a),d.fill())}return f},cl.png=function(e){return oe(e,this.bufferCanvasImage(e),"image/png")},cl.jpg=function(e){return oe(e,this.bufferCanvasImage(e),"image/jpeg")};var hl={};hl.nodeShapeImpl=function(e,t,n,r,i,o,a){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,o);case"polygon":return this.drawPolygonPath(t,n,r,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,o);case"barrel":return this.drawBarrelPath(t,n,r,i,o)}};var fl=ae,dl=ae.prototype;dl.CANVAS_LAYERS=3,dl.SELECT_BOX=0,dl.DRAG=1,dl.NODE=2,dl.BUFFER_COUNT=3,dl.TEXTURE_BUFFER=0,dl.MOTIONBLUR_BUFFER_NODE=1,dl.MOTIONBLUR_BUFFER_DRAG=2,dl.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[dl.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[dl.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[dl.SELECT_BOX]=t}};var pl="undefined"!=typeof Path2D;dl.path2dEnabled=function(e){return void 0===e?this.pathsEnabled:void(this.pathsEnabled=!!e)},dl.usePaths=function(){return pl&&this.pathsEnabled},dl.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},dl.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},dl.makeOffscreenCanvas=function(e,t){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":i(OffscreenCanvas))?n=new OffscreenCanvas(e,t):(n=document.createElement("canvas"),n.width=e,n.height=t),n},[Hu,Yu,$u,Qu,Ju,el,tl,rl,cl,hl].forEach(function(e){Je(dl,e)});var vl=[{name:"null",impl:K},{name:"base",impl:Js},{name:"canvas",impl:fl}],gl=[{type:"layout",extensions:As},{type:"renderer",extensions:vl}],yl={},ml={},bl=function(){return 2===arguments.length?ue.apply(null,arguments):3===arguments.length?se.apply(null,arguments):4===arguments.length?ce.apply(null,arguments):5===arguments.length?le.apply(null,arguments):void kt("Invalid extension access syntax")};cs.prototype.extension=bl,gl.forEach(function(e){e.extensions.forEach(function(t){se(e.type,t.name,t.impl)})});var wl=function Yl(){return this instanceof Yl?void(this.length=0):new Yl},xl=wl.prototype;xl.instanceString=function(){return"stylesheet"},xl.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},xl.css=function(e,t){var n=this.length-1;if(we(e))this[n].properties.push({name:e,value:t});else if(_e(e))for(var r=e,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var u=os.properties[a]||os.properties[ze(a)];if(null!=u){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this},xl.style=xl.css,xl.generateStyle=function(e){var t=new os(e);return this.appendToStyle(t)},xl.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e};var El="3.3.0",_l=function(e){return void 0===e&&(e={}),_e(e)?new cs(e):we(e)?bl.apply(bl,arguments):void 0};_l.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(_l),e.apply(null,t),this},_l.version=El,_l.stylesheet=_l.Stylesheet=wl,t.exports=_l}).call(this,e("timers").setImmediate)},{heap:24,"lodash.debounce":47,timers:76}],22:[function(t,n,r){(function(i,o){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ES6Promise=i()}(this,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}function r(e){Y=e}function a(e){W=e}function s(){return function(){return i.nextTick(f)}}function u(){return"undefined"!=typeof H?function(){H(f)}:h()}function l(){var e=0,t=new Z(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<X;e+=2){var t=J[e],n=J[e+1];t(n),J[e]=void 0,J[e+1]=void 0}X=0}function d(){try{var e=Function("return this")().require("vertx");return H=e.runOnLoop||e.runOnContext,u()}catch(t){return h()}}function p(e,t){var n=this,r=new this.constructor(g);void 0===r[te]&&I(r);var i=n._state;if(i){var o=arguments[i-1];W(function(){return D(i,r,o,n._result)})}else P(n,r,e,t);return r}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return S(n,e),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return oe.error=t,oe}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function x(e,t,n){W(function(e){var r=!1,i=w(n,t,function(n){r||(r=!0,t!==n?S(e,n):k(e,n))},function(t){r||(r=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,C(e,i))},e)}function E(e,t){t._state===re?k(e,t._result):t._state===ie?C(e,t._result):P(t,void 0,function(t){return S(e,t)},function(t){return C(e,t)})}function _(e,t,r){t.constructor===e.constructor&&r===p&&t.constructor.resolve===v?E(e,t):r===oe?(C(e,oe.error),oe.error=null):void 0===r?k(e,t):n(r)?x(e,t,r):k(e,t)}function S(t,n){t===n?C(t,y()):e(n)?_(t,n,b(n)):k(t,n)}function T(e){e._onerror&&e._onerror(e._result),A(e)}function k(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&W(A,e))}function C(e,t){e._state===ne&&(e._state=ie,e._result=t,W(T,e))}function P(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=n,i[o+ie]=r,0===o&&e._state&&W(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?D(n,r,i,o):i(o);e._subscribers.length=0}}function O(e,t){try{return e(t)}catch(n){return oe.error=n,oe}}function D(e,t,r,i){var o=n(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=O(r,i),a===oe?(l=!0,s=a.error,a.error=null):u=!0,t===a)return void C(t,m())}else a=i,u=!0;t._state!==ne||(o&&u?S(t,a):l?C(t,s):e===re?k(t,a):e===ie&&C(t,a))}function N(e,t){try{t(function(t){S(e,t)},function(t){C(e,t)})}catch(n){C(e,n)}}function M(){return ae++}function I(e){e[te]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(){return new Error("Array Methods must be provided an Array")}function R(e){return new se(this,e).promise}function B(e){var t=this;return new t(U(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(g);return C(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=ue}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var U=V,X=0,H=void 0,Y=void 0,W=function(e,t){J[X]=e,J[X+1]=t,X+=2,2===X&&(Y?Y(f):ee())},G="undefined"!=typeof window?window:void 0,K=G||{},Z=K.MutationObserver||K.WebKitMutationObserver,$="undefined"==typeof self&&"undefined"!=typeof i&&"[object process]"==={}.toString.call(i),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),ee=void 0;ee=$?s():Z?l():Q?c():void 0===G&&"function"==typeof t?d():h();var te=Math.random().toString(36).substring(2),ne=void 0,re=1,ie=2,oe={error:null},ae=0,se=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[te]||I(this.promise),U(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&k(this.promise,this._result))):C(this.promise,L())}return e.prototype._enumerate=function(e){for(var t=0;this._state===ne&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var i=b(e);if(i===p&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ue){var o=new n(g);_(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ne&&(this._remaining--,e===ie?C(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(re,t,e)},function(e){return n._settledAt(ie,t,e)})},e}(),ue=function(){function e(t){this[te]=M(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&q(),this instanceof e?N(this,t):F())}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype["finally"]=function(e){var t=this,r=t.constructor;return n(e)?t.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):t.then(e,e)},e}();return ue.prototype.then=p,ue.all=R,ue.race=B,ue.resolve=v,ue.reject=j,ue._setScheduler=r,ue._setAsap=a,ue._asap=W,ue.polyfill=z,ue.Promise=ue,ue})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:49}],23:[function(e,t,n){function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=x(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function o(e,t,n){if(t)e.call(n);else for(var r=e.length,i=g(e,r),o=0;o<r;++o)i[o].call(n)}function a(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].call(n,r)}function s(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=g(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function u(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=g(e,a),u=0;u<a;++u)s[u].call(n,r,i,o)}function l(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].apply(n,r)}function c(e,t,n,r){var o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=x(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=i(e),o&&o>0&&s.length>o)){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else s=a[t]=n,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=_.call(h,r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?y(i):g(i,i.length):[]}function p(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e){var t=function(){};return t.prototype=e,new t}function b(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function w(e){var t=this;return function(){return t.apply(e,arguments)}}var x=Object.create||m,E=Object.keys||b,_=Function.prototype.bind||w;t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var S,T=10;try{var k={};Object.defineProperty&&Object.defineProperty(k,"x",{value:0}),S=0===k.x}catch(C){S=!1}S?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');T=e}}):r.defaultMaxListeners=T,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return i(this)},r.prototype.emit=function(e){var t,n,r,i,c,h,f="error"===e;if(h=this._events)f=f&&null==h.error;else if(!f)return!1;if(f){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var d=new Error('Unhandled "error" event. ('+t+")");throw d.context=t,d}if(n=h[e],!n)return!1;var p="function"==typeof n;switch(r=arguments.length){case 1:o(n,p,this);break;case 2:a(n,p,this,arguments[1]);break;case 3:s(n,p,this,arguments[1],arguments[2]);break;case 4:u(n,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),c=1;c<r;c++)i[c-1]=arguments[c];l(n,p,this,i)}return!0},r.prototype.addListener=function(e,t){return c(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return c(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=x(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():v(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=x(null),this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events=x(null):delete n[e]),this;if(0===arguments.length){var i,o=E(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=x(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],24:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":25}],25:[function(t,n,r){(function(){var t,i,o,a,s,u,l,c,h,f,d,p,v,g,y;o=Math.floor,f=Math.min,i=function(e,t){return e<t?-1:e>t?1:0},h=function(e,t,n,r,a){var s;if(null==n&&(n=0),null==a&&(a=i),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)s=o((n+r)/2),a(t,e[s])<0?r=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},u=function(e,t,n){return null==n&&(n=i),e.push(t),g(e,0,e.length-1,n)},s=function(e,t){var n,r;return null==t&&(t=i),n=e.pop(),e.length?(r=e[0],e[0]=n,y(e,0,t)):r=n,r},c=function(e,t,n){var r;return null==n&&(n=i),r=e[0],e[0]=t,y(e,0,n),r},l=function(e,t,n){var r;return null==n&&(n=i),e.length&&n(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],y(e,0,n)),t},a=function(e,t){var n,r,a,s,u,l;for(null==t&&(t=i),s=function(){l=[];for(var t=0,n=o(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],r=0,a=s.length;r<a;r++)n=s[r],u.push(y(e,n,t));return u},v=function(e,t,n){var r;if(null==n&&(n=i),r=e.indexOf(t),r!==-1)return g(e,0,r,n),y(e,r,n)},d=function(e,t,n){var r,o,s,u,c;if(null==n&&(n=i),o=e.slice(0,t),!o.length)return o;for(a(o,n),c=e.slice(t),s=0,u=c.length;s<u;s++)r=c[s],l(o,r,n);return o.sort(n).reverse()},p=function(e,t,n){var r,o,u,l,c,d,p,v,g,y;if(null==n&&(n=i),10*t<=e.length){if(l=e.slice(0,t).sort(n),!l.length)return l;for(u=l[l.length-1],v=e.slice(t),c=0,p=v.length;c<p;c++)r=v[c],n(r,u)<0&&(h(l,r,0,null,n),l.pop(),u=l[l.length-1]);return l}for(a(e,n),y=[],o=d=0,g=f(t,e.length);0<=g?d<g:d>g;o=0<=g?++d:--d)y.push(s(e,n));return y},g=function(e,t,n,r){var o,a,s;for(null==r&&(r=i),o=e[n];n>t&&(s=n-1>>1,a=e[s],r(o,a)<0);)e[n]=a,n=s;return e[n]=o},y=function(e,t,n){var r,o,a,s,u;for(null==n&&(n=i),o=e.length,u=t,a=e[t],r=2*t+1;r<o;)s=r+1,s<o&&!(n(e[r],e[s])<0)&&(r=s),e[t]=e[r],t=r,r=2*t+1;return e[t]=a,g(e,u,t,n)},t=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=u,e.pop=s,e.replace=c,e.pushpop=l,e.heapify=a,e.updateItem=v,e.nlargest=d,e.nsmallest=p,e.prototype.push=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pop=function(){return s(this.nodes,this.cmp);
},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1},e.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(t,i){return"function"==typeof e&&e.amd?e([],i):"object"==typeof r?n.exports=i():t.Heap=i()}(this,function(){return t})}).call(this)},{}],26:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*v}},{}],27:[function(e,t,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],28:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,w;o=e("url"),r=e("JSONStream"),d=e("http"),t=e("./constants").ACCEPT_HEADER,u=e("./version").VERSION,w=b=e("./util"),h=w.error,c=w.defer,v=w.merge,p=w.invoke,s="node-http/imjs-"+u,i=/,\s*$/,a="application/x-www-form-urlencoded",n.supports=function(){return!0},m=function(e,t,n){return function(e){var i,o;return null==e.pipe?n(new Error("response is not a stream")):(e.on("error",n),null!=e.statusCode&&200!==e.statusCode?(i=r.parse("error"),i.pause(),e.pipe(i),n([e.statusCode,i])):(o=r.parse("results.*"),o.pause(),e.pipe(o),t(o)))}},f=function(e,t,n,r){var i,o;return i=e.type,o=e.url,"Could not parse response to "+i+" "+o+': "'+t+'" ('+r+": "+n+")"},l=function(e,t,n){return function(r){var i;return i="",r.on("data",function(e){return i+=e}),r.on("error",n),r.on("end",function(){var o,a,s,u,l,c,h;if(null!=(null!=r?r.headers:void 0)&&(o=r.headers["content-type"]),"application/json"!==o&&!/json/.test(e.dataType)&&!/json/.test(e.data.format))return(l=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(l[2])):(u=200<=(h=r.statusCode)&&h<400?t:n)(i);if(""===i&&200===r.statusCode)return t();try{return c=JSON.parse(i),(s=c.error)?n(new Error(s)):t(c)}catch(d){return a=d,n(r.statusCode>=400?new Error(r.statusCode):new Error(f(e,i,a,r.statusCode)))}})}},n.iterReq=function(e,t,n){return function(r,i,o,a,s){var u,l,c,f,d;return null==i&&(i={}),null==o&&(o=function(){}),null==a&&(a=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(d=[{},i,o,a],i=d[0],o=d[1],a=d[2],s=d[3]),f=v({format:n},i,{query:r.toXML()}),u=function(e){return e.on("data",o),e.on("error",a),e.on("end",s),setTimeout(function(){if(null!=e.resume)return e.resume()},3),e},c=function(e){var t,n;return n=e[0],t=e[1],t.on("data",a),t.on("error",a),t.on("end",s),null!=t.resume&&t.resume(),h(n)},l=this.makeRequest(e,t,f,null,!0),l.then(u,c),l}},y=function(e,t,n){var r;return r=setTimeout(function(){return t("Request timed out.")},e),n.then(function(){return cancelTimeout(r)})},g=function(e){var n,r,i,u,l,c,h,f;if(!e.url)throw new Error("No url provided in "+JSON.stringify(e));if("string"==typeof e.data){if(i=e.data,"GET"===(c=e.type)||"DELETE"===c)throw new Error("Invalid request. "+e.type+" requests must not have bodies")}else i=b.querystring(e.data);if(r=o.parse(e.url,!0),r.withCredentials=!1,r.method=e.type||"GET",null!=e.port&&(r.port=e.port),r.headers={"User-Agent":s,Accept:t[e.dataType]},("GET"===(h=r.method)||"DELETE"===h)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(e.contentType||a)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=e.headers){f=e.headers;for(n in f)l=f[n],r.headers[n]=l}return null!=e.auth&&(r.auth=e.auth),[r,i]},n.doReq=function(e,t){var n,r,i,o,a,s,u,h,f,p,v;p=c(),o=p.promise,u=p.resolve,a=p.reject,o.then(null,e.error);try{v=g(e),f=v[0],i=v[1],r=(t?m:l)(e,u,a),s=d.request(f,r),s.on("error",function(t){return a(new Error("Error: "+f.method+" "+e.url+": "+t))}),null!=i&&s.write(i),s.end(),h=e.timeout,h>0&&y(h,a,o)}catch(b){n=b,a(n)}return o}}).call(this)},{"./constants":27,"./util":39,"./version":40,JSONStream:42,http:70,url:79}],29:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){return function(){return e.apply(t,arguments)}};c=e("./util"),d=n,p=c.uniqBy,u=c.difference,s=c.defer,v=c.withCB,f=c.id,h=c.get,l=c.fold,a=c.concatMap,o=6e4,t=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t;return e.prototype.getStats=function(e){return null!=e?this.stats[e]:this.stats},t=a(h("matches")),e.prototype.getMatches=function(e){var n;return"MATCH"===e?this.matches[e]:null!=(n=t(this.matches[e]))?n:[]},e.prototype.getMatchIds=function(e){return null!=e?this.getMatches(e).map(h("id")):this.allMatchIds()},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){var e;return(e=l(function(e){return function(t,n){return t.concat(e.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},e}(),i=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t,n,r,i;return i=p(f),t=a(f),n=function(e){var n,r;return t(function(){var t,i;t=e.identifiers,i=[];for(n in t)r=t[n],i.push(r);return i}())},r=function(e,t){return null==t||y.call(n(e),t)>=0},e.prototype.getStats=function(e){switch(e){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},e.prototype.getIdentifierStats=function(){var e,n,r,o,a,s;return s=function(e){var n,r;return i(t(function(){var t,i,o;for(o=[],t=0,i=e.length;t<i;t++)r=e[t],o.push(function(){var e;e=[];for(n in null!=r?r.identifiers:void 0)e.push(n);return e}());return o}()))},o=s(this.getMatches("MATCH")),n=s(this.getMatches()),a=o.length,e=n.length,r=u(n,o).length,{matches:a,all:e,issues:r}},e.prototype.getObjectStats=function(){var e,t,r,i;return i=this.goodMatchIds().length,e=this.allMatchIds().length,t=function(){var e;e=[];for(f in this)g.call(this,f)&&(r=this[f],y.call(n(r),"MATCH")<0&&e.push(f));return e}.call(this).length,{matches:i,all:e,issues:t}},e.prototype.getMatches=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(t));return n},e.prototype.getMatchIds=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(f));return n},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){return this.getMatchIds()},e}(),r=function(){function e(e,t){this.uid=e,this.service=t,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return e.prototype.fetchStatus=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("status")))},e.prototype.fetchErrorMessage=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("message")))},e.prototype.fetchResults=function(e){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(h("results")),r=this.service.fetchVersion(),r.then(function(e){return n.then(function(n){return e>=16?new t(n):new i(n)})})},e.prototype.del=function(e){return v(e,this.service.makeRequest("DELETE","ids/"+this.uid))},e.prototype.decay=50,e.prototype.poll=function(e,t,n){var r,i,a,u,l,c,h;return h=s(),a=h.promise,l=h.resolve,u=h.reject,a.then(e,t),i=null!=n?n:function(){},c=this.fetchStatus(),c.then(null,u),r=this.decay,this.decay=Math.min(o,1.25*r),c.then(function(e){return function(t){switch(i(t),t){case"SUCCESS":return e.fetchResults().then(l,u);case"ERROR":return e.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return e.poll(l,u,i)},r)}}}(this)),a},e}(),r.prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},d.IDResolutionJob=r,d.CategoryResults=t,d.IdResults=i}).call(this)},{"./util":39}],30:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y=function(e,t){return function(){return e.apply(t,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};v=e("./util"),c=n,d=v.merge,g=v.withCB,u=v.get,h=v.invoke,i=v.REQUIRES_VERSION,p=v.set,s=v.dejoin,a="list/tags",o="lists/shares",t="lists/invitations",f=function(e){return"__folder__"===e.substr(0,e.indexOf(":"))},l=function(e){return e.substr(e.indexOf(":")+1)},r=function(){function e(e,t){var n,r;this.service=t,this._updateTags=y(this._updateTags,this),this.hasTag=y(this.hasTag,this);for(n in e)m.call(e,n)&&(r=e[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(f).map(l)}var n;return e.prototype.hasTag=function(e){return b.call(this.tags,e)>=0},e.prototype.query=function(e){return null==e&&(e=["*"]),this.service.query({select:e,from:this.type,where:[[this.type,"IN",this.name]]})},e.prototype.del=function(e){return this.service.makeRequest("DELETE","lists",{name:this.name},e)},n=function(e){var t;return t=e.tags},e.prototype._updateTags=function(e,t){if(null==e)return this.tags=t.slice(),this.folders=this.tags.filter(f).map(l)},e.prototype.fetchTags=function(e){return g(this._updateTags,e,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},e.prototype.addTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("POST","list/tags",r).then(n))},e.prototype.removeTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("DELETE","list/tags",r).then(n))},e.prototype.contents=function(e){return g(e,this.query().then(s).then(h("records")))},e.prototype.rename=function(e,t){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:e}).then(u("listName")).then(function(e){return function(t){return e.name=t}}(this)).then(this.service.fetchList),g(t,n)},e.prototype.copy=function(e,t){var n,r,i,o,a,s,l;return null==e&&(e={}),null==t&&(t=function(){}),1===arguments.length&&v.isFunction(e)&&(a=[{},e],e=a[0],t=a[1]),"string"==typeof e&&(e={name:e}),r=n=null!=(s=e.name)?s:""+this.name+"_copy",o=this.tags.concat(null!=(l=e.tags)?l:[]),i=this.query(["id"]),g(t,this.service.fetchLists().then(h("map",u("name"))).then(function(e){return function(t){var a;for(a=1;b.call(t,r)>=0;)r=""+n+"-"+a++;return i.then(h("saveAsList",{name:r,tags:o,description:e.description}))}}(this)))},e.prototype.enrichment=function(e,t){return this.service.enrichment(d({list:this.name},e),t)},e.prototype.shareWithUser=function(e,t){return g(t,this.service.post(o,{list:this.name,"with":e}))},e.prototype.inviteUserToShare=function(e,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),g(r,this.service.post(t,{list:this.name,to:e,notify:!!n}))},e}(),c.List=r}).call(this)},{"./util":39}],31:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f=function(e,t){return function(){return e.apply(t,arguments)}},d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=e("./table").Table,i=e("./path").PathInfo,h=e("./util"),u=h.flatten,s=h.find,a=h.error,c=h.omap,l=n,t=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function e(e){var n,r;this.name=e.name,n=e.classes,this.findCommonType=f(this.findCommonType,this),this.findSharedAncestor=f(this.findSharedAncestor,this),this.getAncestorsOf=f(this.getAncestorsOf,this),this.getSubclassesOf=f(this.getSubclassesOf,this),this.getPathInfo=f(this.getPathInfo,this),r=c(function(e){return function(t,n){return[t,new o(n,e)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=t}return e.prototype.getPathInfo=function(e,t){return i.parse(this,e,t)},e.prototype.getSubclassesOf=function(e){var t,n,r,i,o,a;if(n=e&&e.name?e:this.classes[e],null==n)throw new Error(""+e+" is not a table");r=[n.name],o=this.classes;for(i in o)t=o[i],a=n.name,d.call(t.parents(),a)>=0&&(r=r.concat(this.getSubclassesOf(t)));return r},e.prototype.getAncestorsOf=function(e){var t,n;if(t=e&&e.name?e:this.classes[e],null==t)throw new Error(""+e+" is not a table");return n=t.parents(),n.filter(function(e){return function(t){return e.classes[t]}}(this)).reduce(function(e){return function(t,n){return t.concat(e.getAncestorsOf(n))}}(this),n)},e.prototype.findSharedAncestor=function(e,t){var n,r,i;return null===t||null===e?null:e===t?e:(n=this.getAncestorsOf(e),d.call(n,t)>=0?t:(r=this.getAncestorsOf(t),d.call(r,e)>=0?e:i=s(n,function(e){return d.call(r,e)>=0})))},e.prototype.findCommonType=function(e){return null==e&&(e=[]),e.reduce(this.findSharedAncestor)},e}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(e){var t;try{return new r(e)}catch(n){throw t=n,new Error("Error loading model: "+t)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],l.Model=r}).call(this)},{"./path":32,"./table":37,"./util":39}],32:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g=function(e,t){return function(){return e.apply(t,arguments)}},y=[].slice,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};c=n,p=e("./util"),v=p.withCB,a=p.concatMap,l=p.get,o=p.any,f=p.set,s=p.copy,d=p.success,u=p.error,t={},r={},h=function(e,t,n){var r,i,o;return""+(null!=e?e.name:void 0)+"|"+(null!=e&&null!=(o=e.service)?o.root:void 0)+"|"+t+":"+function(){var e;e=[];for(r in n)i=n[r],e.push(""+r+"="+i);return e}()},i=function(){function e(e){var t,n;this.root=e.root,this.model=e.model,this.descriptors=e.descriptors,this.subclasses=e.subclasses,this.displayName=e.displayName,this.ident=e.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?y.call(n,0,t=n.length-1):(t=0,[]),this.end=n[t++],null==this.ident&&(this.ident=h(this.model,this,this.subclasses))}return e.prototype.isRoot=function(){return 0===this.descriptors.length},e.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},e.prototype.isClass=function(){return this.isRoot()||this.isReference()},e.prototype.isReference=function(){var e;return null!=(null!=(e=this.end)?e.referencedType:void 0)},e.prototype.isReverseReference=function(){var e,t,n,r,i;return!!(this.isReference()&&this.mid.length>0)&&(i=this.end,r=i.reverseReference,n=i.referencedType,t=this.getParent(),e=t.getParent(),null!=n&&e.isa(n)&&t.end.name===r)},e.prototype.isCollection=function(){var e,t;return null!=(e=null!=(t=this.end)?t.isCollection:void 0)&&e},e.prototype.containsCollection=function(){return o(this.descriptors,function(e){return e.isCollection})},e.prototype.getEndClass=function(){var e;return this.model.classes[this.subclasses[this.toString()]||(null!=(e=this.end)?e.referencedType:void 0)]||this.root},e.prototype.getParent=function(){var t;if(this.isRoot())throw new Error("Root paths do not have parents");return t={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new e(t)},e.prototype.append=function(t){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof t?this.getType().fields[t]:t,null==r)throw new Error(""+t+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new e(n)},e.prototype.isa=function(e){var t,n;return null!=e&&(this.isAttribute()?this.getType()===e:(t=e.name?e.name:""+e,n=this.getType(),t===n.name||m.call(this.model.getAncestorsOf(n),t)>=0))},e.prototype.getDisplayName=function(e){var n,r,i,o;return(r=this.displayName)?d(r):(null==this.namePromise&&(this.namePromise=(n=t[this.ident])?d(n):this.isRoot()&&this.root.displayName?d(this.root.displayName):null==this.model.service?u("No service"):(o="model"+a(function(e){return"/"+e.name})(this.allDescriptors()),i=f({format:"json"})(s(this.subclasses)),this.model.service.get(o,i).then(l("display")).then(function(e){return function(n){var r;return null!=t[r=e.ident]?t[r]:t[r]=n}}(this)))),v(e,this.namePromise))},e.prototype.getChildNodes=function(){var e,t,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(t in r)e=r[t],i.push(this.append(e));return i},e.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},e.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},e.prototype.equals=function(e){return this===e||this.ident&&(null!=e?e.ident:void 0)===this.ident},e.prototype.getType=function(){var e,t;return(null!=(e=this.end)&&null!=(t=e.type)?t.replace(/java\.lang\./,""):void 0)||this.getEndClass()},e}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(e,t,n){var o,a,s,u,l,c,f,d,p;return null==n&&(n={}),l=h(e,t,n),(o=r[l])?o:(d=(t+"").split("."),p=a=e.classes[d.shift()],c=p.name,s=function(){var r,i,o,s;for(s=[],r=0,i=d.length;r<i;r++){if(f=d[r],u=(null!=a?a.fields[f]:void 0)||(null!=(o=a=e.classes[n[c]])?o.fields[f]:void 0),!u)throw new Error("Could not find "+f+" in "+a+" when parsing "+t);c+="."+f,a=e.classes[u.type||u.referencedType],s.push(u)}return s}(),r[l]=new i({root:p,model:e,descriptors:s,subclasses:n,ident:l}))},i.flushCache=function(){return r={},t={}},c.PathInfo=i}).call(this)},{"./util":39}],33:[function(e,t,n){(function(){var n;n=e("es6-promise").Promise,t.exports=n}).call(this)},{"es6-promise":43}],34:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,E,_,S,T,k,C,P,A,O,D,N,M,I,L,R,B,j,q,F,z,V,U,X,H,Y,W,G,K,Z,$,Q,J=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},ee=function(e,t){return function(){return e.apply(t,arguments)}},te=[].slice,ne={}.hasOwnProperty;i=e("backbone-events-standalone"),C=n,C.xml=e("./xml"),X=e("./util"),s=X.REQUIRES_VERSION,H=X.withCB,D=X.merge,w=X.filter,R=X.partition,x=X.fold,v=X.concatMap,T=X.id,E=X.get,O=X.invoke,z=X.querystring,_=function(e){var t;if(t=null!=(null!=e?e.toLowerCase:void 0)?a.OP_DICT[e.toLowerCase()]:null,!t)throw new Error("Illegal constraint operator: "+e);return t},t=["path","op","code"],l=t.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(e){return X.compose(e.fetchList,E("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(e){return null==e&&(e=""),e.substr(e.indexOf("."))},p=function(e){return null!=e?"<value>"+X.escape(e)+"</value>":"<nullValue/>"},h=function(e,t){var n,r;return function(){var i;i=[];for(n in e)r=e[n],J.call(t,n)>=0&&i.push(""+n+'="'+X.escape(r)+'" ');return i}().join("")},L=function(e){return"<constraint "+h(e,t)+"/>"},V=function(e){return"<constraint "+h(e,["path","type"])+"/>"},j=function(e){return"<constraint "+h(e,l)+"/>"},M=function(e){return"<constraint "+h(e,t)+">"+v(p)(e.values)+"</constraint>"},k=function(e){return"<constraint "+h(e,t)+'ids="'+e.ids.join(",")+'"/>'},f=function(e){var t;return null!=e.values?M(e):null!=e.ids?k(e):null==e.op?V(e):(t=e.op,J.call(a.NULL_OPS,t)>=0?L(e):j(e))},S=function(e){return e.replace(/^[^\.]+\./,"")},g=function(e){var t,n,r,i,o,a,s,u,l,c,h;return a=e.path,l=e.type,o=e.op,c=e.value,h=e.values,r=e.extraValue,i=e.ids,t=e.code,n=e.editable,u=e.switched,s=e.switchable,i=null!=i?i.slice():void 0,h=null!=h?h.slice():void 0,I({path:a,type:l,op:o,value:c,values:h,extraValue:r,ids:i,code:t,editable:n,switched:u,switchable:s})},d=function(e){var t;return t=g(e),t.path=S(t.path),t},I=function(e){var t,n;for(t in e)n=e[t],null==n&&delete e[t];return e},m=function(e,t){return"Did not remove a single constraint. original = "+e+", reduced = "+t},A=function(e,t){var n,r,i,o,s,u,l;if(n={path:e},null===t)n.op="IS NULL";else if(X.isArray(t))n.op="ONE OF",n.values=t;else if("string"==(u=typeof t)||"number"===u||"boolean"===u)l="function"==typeof t.toUpperCase?t.toUpperCase():void 0,J.call(a.NULL_OPS,l)>=0?n.op=t:(n.op="=",n.value=t);else if(i=function(){var e;e=[];for(r in t)s=t[r],e.push(r);return e}(),J.call(i,"isa")>=0)X.isArray(t.isa)?(n.op=r,n.values=t.isa):n.type=t.isa;else{J.call(i,"extraValue")>=0&&(n.extraValue=t.extraValue);for(r in t)o=t[r],"extraValue"!==r&&(n.op=r,X.isArray(o)?n.values=o:n.value=o)}return n},P=function(e){var t,n,r,i;return e=e.slice(),n={path:e.shift()},1===e.length?(t=e[0],i="function"==typeof t.toUpperCase?t.toUpperCase():void 0,J.call(a.NULL_OPS,i)>=0?n.op=t:n.type=t):e.length>=2&&(n.op=e[0],r=e[1],X.isArray(r)?n.values=r:n.value=r,3===e.length&&(n.extraValue=e[2])),n},F=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(""+t.path+" "+t.direction);return i}().join(" ")},q=function(e){var t,n,r,i,o,a,s;if(null==e)return[];for(n=e.split(/\s+/),r=function(){var e,t,r;for(r=[],i=e=0,t=n.length/2;0<=t?e<t:e>t;i=0<=t?++e:--e)r.push(2*i);return r}(),s=[],o=0,a=r.length;o<a;o++)t=r[o],s.push([n[t],n[t+1]]);return s},B=function(){var e,t;if(t=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],this.isRelevant(e.path)&&i.push(e);return i}.call(this),t.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},a=function(){function e(e,t,n){var r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m;for(u=null!=n?n:{},r=u.model,o=u.summaryFields,this.addConstraint=ee(this.addConstraint,this),this.expandStar=ee(this.expandStar,this),this.adjustPath=ee(this.adjustPath,this),this.select=ee(this.select,this),null==e&&(e={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=X.copy(null!=(l=null!=(h=e.displayNames)?h:e.aliases)?l:{}),f=["name","title","comment","description","type"],a=0,s=f.length;a<s;a++)i=f[a],null!=e[i]&&(this[i]=e[i]);this.service=null!=t?t:{},this.model=null!=(d=null!=r?r:e.model)?d:{},this.summaryFields=null!=(p=null!=o?o:e.summaryFields)?p:{},this.root=null!=(v=e.root)?v:e.from,this.maxRows=null!=(g=null!=(y=e.size)?y:e.limit)?g:e.maxRows,this.start=null!=(m=null!=(c=e.start)?c:e.offset)?m:0,this.select(e.views||e.view||e.select||[]),this.addConstraints(e.constraints||e.where||[]),this.addJoins(e.joins||e.join||[]),this.orderBy(e.sortOrder||e.orderBy||[]),null!=e.constraintLogic&&(this.constraintLogic=e.constraintLogic),this.on("change:views",B,this)}var t,n,i,a,u,l,c,p,b;return e.JOIN_STYLES=["INNER","OUTER"],e.BIO_FORMATS=["gff3","fasta","bed"],e.NULL_OPS=["IS NULL","IS NOT NULL"],e.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],e.MULTIVALUE_OPS=["ONE OF","NONE OF"],e.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],e.TERNARY_OPS=["LOOKUP"],e.LOOP_OPS=["=","!="],e.LIST_OPS=["IN","NOT IN"],e.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],c=function(e,t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],e.hasAttribute(n)&&o.push([n,e.getAttribute(n)]);return o},i=function(e,t){var n,r,i,o,a;for(o=e.getElementsByTagName(t),a=[],r=0,i=o.length;r<i;r++)n=o[r],a.push(n);return a},b=function(e){return function(t){return t.getAttribute(e)}},e.fromXML=function(e){var t,r,o,a,s,l,h;if(r=C.xml.parse(e),l=i(r,"query")[0]||i(r,"template")[0],!l)throw new Error("no query in xml");return a=b("path"),h=b("style"),s=X.pairsToObj(c(l,u)),s.view=s.view.split(/\s+/),s.sortOrder=q(s.sortOrder),s.joins=function(){var e,t,n,r;for(n=i(l,"join"),r=[],e=0,t=n.length;e<t;e++)o=n[e],"OUTER"===h(o)&&r.push(a(o));return r}(),s.constraints=function(){var e,r,o,a;for(o=i(l,"constraint"),a=[],e=0,r=o.length;e<r;e++)t=o[e],a.push(function(e){var t,r,o,a,s;return t=X.pairsToObj(c(e,n)),null!=t.ids&&(t.ids=function(){var e,n,r,i;for(r=t.ids.split(","),i=[],e=0,n=r.length;e<n;e++)s=r[e],i.push(parseInt(s,10));return i}()),a=i(e,"value"),a.length&&(t.values=function(){var e,t,n;for(n=[],e=0,t=a.length;e<t;e++)o=a[e],n.push(function(){var e,t,n,i;for(n=o.childNodes,i=[],e=0,t=n.length;e<t;e++)r=n[e],i.push(r.data);return i}().join(""));return n}()),t}(t));return a}(),s},e.prototype.constraints=[],e.prototype.views=[],e.prototype.joins={},e.prototype.constraintLogic="",e.prototype.sortOrder="",e.prototype.name=null,e.prototype.title=null,e.prototype.comment=null,e.prototype.description=null,e.prototype.removeFromSelect=function(e){var t,n,r,i;return null==e&&(e=[]),e=X.stringList(e),t=X.compose(this.expandStar,this.adjustPath),e=X.flatten(function(){var n,i,o;for(o=[],n=0,i=e.length;n<i;n++)r=e[n],o.push(t(r));return o}()),this.sortOrder=function(){var t,r,i,o,a;for(i=this.sortOrder,a=[],t=0,r=i.length;t<r;t++)n=i[t],o=n.path,J.call(e,o)>=0||a.push(n);return a}.call(this),this.views=function(){var t,n,r,o;for(r=this.views,o=[],t=0,n=r.length;t<n;t++)i=r[t],J.call(e,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",e),this.trigger("change:views",this.views),this.trigger("change",this.views)},e.prototype.removeConstraint=function(e,t){var n,r,i,o;if(null==t&&(t=!1),i=this.constraints,r="string"==typeof e?function(t){return t.code===e}:function(t){var n,r;return t.path===e.path&&t.op===e.op&&t.value===e.value&&t.extraValue===e.extraValue&&e.type===t.type&&(null!=(n=t.values)?n.join("%%"):void 0)===(null!=(r=e.values)?r.join("%%"):void 0)},o=function(){var e,t,o;for(o=[],e=0,t=i.length;e<t;e++)n=i[e],r(n)||o.push(n);return o}(),o.length!==i.length-1)throw new Error(m(i,o));if(this.constraints=o,!t)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",X.find(i,r))},e.prototype.addToSelect=function(e,t){var n,r,i,o,a,s,u,l;if(null==e&&(e=[]),null==t&&(t={}),e=X.stringList(e),r=X.compose(this.expandStar,this.adjustPath),o=X.flatten(function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)a=e[t],i.push(r(a));return i}()),n=function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)i=o[e],J.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)i=o[e],function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)s=o[e],s===i&&n.push(s);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},e.prototype.select=function(e,t){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(e,t)}catch(i){n=i,this.views=r,X.error(n)}return this},e.prototype.adjustPath=function(e){return e=e&&e.name?e.name:""+e,null!=this.root?e.match("^"+this.root)||(e=this.root+"."+e):this.root=e.split(".")[0],e},e.prototype.getPossiblePaths=function(e,t,n){var r,i,o,a,s;return null==e&&(e=3),null==t&&(t=!0),null==n&&(n=null),a="string"==typeof n?function(e){return e[n]()}:n,r=function(e){return function(n,i){var o,a,s,u,l,c;return l=e.getPathInfo(n),!t&&l.isReverseReference()?[]:l.isAttribute()?[l]:(o=l.getType(),c=v(function(e){return r(""+n+"."+e.name,i-1)}),u=o&&i>0?c(function(){var e,t;e=o.fields,t=[];for(s in e)a=e[s],t.push(a);return t}()):[],[l].concat(u))}}(this),i=""+e+"-"+t,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=r(this.root,e)).slice(),null!=a?o.filter(a):o},e.prototype.getPathInfo=function(e){var t,n,r;return t=this.adjustPath(e),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(t,this.getSubclasses()):void 0,n&&t in this.displayNames&&(n.displayName=this.displayNames[t]),n},e.prototype.makePath=e.prototype.getPathInfo,p=function(e){return[e.path,e.type]},l=X.compose(X.pairsToObj,X.map(p),w(E("type"))),e.prototype.getSubclasses=function(){return l(this.constraints)},e.prototype.getType=function(e){return this.getPathInfo(e).getType()},e.prototype.getViewNodes=function(){var e,t;return t=function(e){return function(t){return e.getPathInfo(t).getParent()}}(this),X.uniqBy(String,function(){var n,r,i,o;for(i=this.views,o=[],n=0,r=i.length;n<r;n++)e=i[n],o.push(t(e));return o}.call(this))},e.prototype.isInView=function(e){var t,n,r;if(t=this.getPathInfo(e),!t)throw new Error("Invalid path: "+e);return t.isAttribute()?(r=t.toString(),J.call(this.views,r)>=0):(n=t.toString(),X.any(this.getViewNodes(),function(e){return e.toString()===n}))},e.prototype.isConstrained=function(e,t){var n,r;if(null==t&&(t=!1),n=this.getPathInfo(e),!n)throw new Error("Invalid path: "+e);return r=function(e){return null!=e.op&&e.path===n.toString()},!n.isAttribute()&&t&&(r=function(e){
return function(t){return null!=t.op&&(t.path===n.toString()||n.equals(e.getPathInfo(t.path).getParent()))}}(this)),X.any(this.constraints,r)},e.prototype.canHaveMultipleValues=function(e){return this.getPathInfo(e).containsCollection()},e.prototype.getQueryNodes=function(){var e,t,n,r;return r=this.getViewNodes(),t=function(){var t,r,i,o;for(i=this.constraints,o=[],t=0,r=i.length;t<r;t++)e=i[t],null==e.type&&(n=this.getPathInfo(e.path),n.isAttribute()?o.push(n.getParent()):o.push(n));return o}.call(this),X.uniqBy(String,r.concat(t))},e.prototype.isInQuery=function(e){var t,n,r,i,o,a;if(n=this.getPathInfo(e)){for(r=n.toPathString(),a=this.views.concat(function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;e<n;e++)t=r[e],null==t.type&&i.push(t.path);return i}.call(this)),i=0,o=a.length;i<o;i++)if(e=a[i],0===e.indexOf(r))return!0;return!1}return!0},e.prototype.isRelevant=function(e){var t,n,r;return n=this.getPathInfo(e),n.isAttribute()&&(n=n.getParent()),r=n.toString(),t=this.getViewNodes(),X.any(t,function(e){return e.toPathString()===r})},e.prototype.expandStar=function(e){var t,n,r,i,o,a,s,u;if(/\*$/.test(e))if(s=e.substr(0,e.lastIndexOf(".")),r=function(e){return s+e},n=this.getType(s),/\.\*$/.test(e)){if(n&&this.summaryFields[n.name])return i=X.compose(r,y),function(){var e,t,r,a;for(r=this.summaryFields[n.name],a=[],e=0,t=r.length;e<t;e++)o=r[e],this.hasView(o)||a.push(i(o));return a}.call(this)}else if(/\.\*\*$/.test(e))return u=this.expandStar(s+".*"),t=function(){var e;e=[];for(a in n.attributes)e.push(r("."+a));return e}(),X.uniqBy(T,u.concat(t));return e},e.prototype.isOuterJoin=function(e){return"OUTER"===this.joins[this.adjustPath(e)]},e.prototype.hasView=function(e){var t;return this.views&&(t=this.adjustPath(e),J.call(this.views,t)>=0)},e.prototype.count=function(e){if(this.service.count)return this.service.count(this,e);throw new Error("This query has no service with count functionality attached.")},e.prototype.appendToList=function(e,t){var n,r,i,a,s;return(null!=e?e.name:void 0)?(n=e.name,s=function(t,n){if(null==t)return e.size=n.size}):(n=String(e),s=null),a=this.makeListQuery(),i={listName:n,query:a.toXML()},r=o(this.service),H(s,t,this.service.post("query/append/tolist",i).then(r))},e.prototype.selectPreservingImpliedConstraints=function(e){var t,n,r,i,o;for(null==e&&(e=[]),n=this.clone(),n.select(e),o=this.getViewNodes(),r=0,i=o.length;r<i;r++)t=o[r],this.isOuterJoined(t)||n.isInView(t||n.isConstrained(t))||null==t.getEndClass().fields.id||n.addConstraint([t.append("id"),"IS NOT NULL"]);return n},e.prototype.makeListQuery=function(){var e,t;return e=this.views.slice(),1===e.length&&(null!=(t=e[0])?t.match(/\.id$/):void 0)||(e=["id"]),this.selectPreservingImpliedConstraints(e)},e.prototype.saveAsList=function(e,t){var n,r;return r=this.makeListQuery(),n=X.copy(e),n.listName=n.listName||n.name,n.query=r.toXML(),e.tags&&(n.tags=e.tags.join(";")),H(t,this.service.post("query/tolist",n).then(o(this.service)))},e.prototype.summarise=function(e,t,n){return this.filterSummary(e,"",t,n)},e.prototype.summarize=function(){var e;return e=1<=arguments.length?te.call(arguments,0):[],this.summarise.apply(this,e)},a=function(e){var t,n,r,i,o,a,s;for(t=null!=(null!=(a=e.results[0])?a.max:void 0),s=e.results,i=0,o=s.length;i<o;i++)n=s[i],n.count=parseInt(n.count,10);return r={uniqueValues:e.uniqueValues,filteredCount:e.filteredCount},t&&(r=D(r,e.results[0])),e.stats=r,e},e.prototype.filterSummary=function(e,t,n,r){var i,o,s;return null==r&&(r=function(){}),X.isFunction(n)&&(s=[n,null],r=s[0],n=s[1]),e=this.adjustPath(e),o=this.clone(),J.call(o.views,e)<0&&o.views.push(e),i={query:o.toXML(),summaryPath:e,format:"jsonrows"},n&&(i.size=n),t&&(i.filterTerm=t),H(r,this.service.post("query/results",i).then(a))},e.prototype.clone=function(t){var n,r,i,o;if(n=new e(this,this.service),null==n._callbacks&&(n._callbacks={}),t){o=this._callbacks;for(r in o)ne.call(o,r)&&(i=o[r],n._callbacks[r]=i);n.off("change:views",B,this)}return n},e.prototype.next=function(){var e;return e=this.clone(),this.maxRows&&(e.start=this.start+this.maxRows),e},e.prototype.previous=function(){var e;return e=this.clone(),this.maxRows?e.start=this.start-this.maxRows:e.start=0,e},e.prototype.getSortDirection=function(e){var t,n;if(t=this.adjustPath(e),!this.isInQuery(t)&&!this.isRelevant(t))throw new Error(""+e+" is not in the query");return n=X.find(this.sortOrder,function(e){var n;return n=e.path,t===n}),null!=n?n.direction:void 0},e.prototype.isOuterJoined=function(e){var t,n,r;e=this.adjustPath(e),r=this.joins;for(n in r)if(t=r[n],"OUTER"===t&&0===e.indexOf(n))return!0;return!1},e.prototype.getOuterJoin=function(e){var t,n;return e=this.adjustPath(e),t=function(){var e;e=[];for(n in this.joins)e.push(n);return e}.call(this).sort(function(e,t){return t.length-e.length}),X.find(t,function(t){return function(n){return"OUTER"===t.joins[n]&&0===e.indexOf(n)}}(this))},e.prototype._parse_sort_order=function(e){var t,n,r,i,o,a;if(null==e)throw new Error("No input");if("string"==typeof e)i={path:e,direction:"ASC"};else if(X.isArray(e))r=e[0],t=e[1],i={path:r,direction:t};else if(null==e.path){for(n in e)o=e[n],a=[n,o],r=a[0],t=a[1];i={path:r,direction:t}}else r=e.path,t=e.direction,i={path:r,direction:t};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},e.prototype.addOrSetSortOrder=function(e){var t,n;return e=this._parse_sort_order(e),t=this.getSortDirection(e.path),null==t?this.addSortOrder(e):t!==e.direction&&(n=X.find(this.sortOrder,function(t){var n;return n=t.path,n===e.path}),n.direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},e.prototype.addSortOrder=function(e,t){var n;if(n=(null!=t?t:{}).silent,this.sortOrder.push(this._parse_sort_order(e)),!n)return this.trigger("add:sortorder",e),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},e.prototype.orderBy=function(e,t){var n,r,i,o,a,s,u,l;for(null==t&&(t={}),o=this.sortOrder.slice(),this.sortOrder=[],s=0,u=e.length;s<u;s++)i=e[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var e,t,n,i,o;for(n=this.sortOrder,o=[],e=0,t=n.length;e<t;e++)i=n[e],a=i.path,r=i.direction,o.push({path:a,direction:r});return o}.call(this),this.trigger("set:sortorder",n),F(o)!==this.getSorting()&&(t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},e.prototype.addJoins=function(e){var t,n,r,i,o,a,s;if(X.isArray(e)){for(a=[],i=0,o=e.length;i<o;i++)t=e[i],a.push(this.addJoin(t));return a}s=[];for(n in e)r=e[n],s.push(this.addJoin({path:n,style:r}));return s},e.prototype.addJoin=function(e){return"string"==typeof e&&(e={path:e,style:"OUTER"}),this.setJoinStyle(e.path,e.style)},e.prototype.setJoinStyle=function(t,n){if(null==n&&(n="OUTER"),t=this.adjustPath(t),n=n.toUpperCase(),J.call(e.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[t]!==n&&(this.joins[t]=n,this.trigger("change:joins",{path:t,style:n}),this.trigger("change")),this},e.prototype.addConstraints=function(e,t){var n,r,i,o,a,s,u;if(null==t&&(t="and"),this.__silent__=!0,i=this.constraintLogic,X.isArray(e))for(s=0,u=e.length;s<u;s++)n=e[s],this.addConstraint(n,t);else{a=function(e){return function(n,r){return e.addConstraint(A(n,r),t)}}(this);for(o in e)r=e[o],a(o,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},e.prototype.addConstraint=function(e,t){var n,i,o,a,s,u,l;if(null==t&&(t="and"),"and"!==t&&"or"!==t)throw new Error("Unknown logical conjunction: "+t);return e=X.isArray(e)?P(e):g(e),"OFF"===e.switched?this:(e.path=this.adjustPath(e.path),null==e.type&&(e.op=_(e.op)),this.constraints.push(e),o="or"===t||(null!=(l=this.constraintLogic)?l.length:void 0)>0,a=this.constraints.length,u=this.constraintLogic,o&&(s=2===a?""+r[0]+" "+t+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var e,t,i;for(i=[],n=e=0,t=a-2;0<=t?e<=t:e>=t;n=0<=t?++e:--e)i.push(r[n]);return i}().join(" and ")),"("+i+") "+t+" "+r[a-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",e),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},e.prototype.getSorting=function(){return F(this.sortOrder)},e.prototype.getConstraintXML=function(){var e,t;return t=function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;t<n;t++)e=r[t],(null==e.type||this.isInQuery(e.path))&&i.push(e);return i}.call(this),t.length?v(f)(v(T)(R(function(e){return null!=e.type})(t))):""},e.prototype.getJoinXML=function(){var e,t,n;return n=function(){var n,r;n=this.joins,r=[];for(e in n)t=n[e],this.isInQuery(e)&&"OUTER"===t&&r.push('<join path="'+e+'" style="OUTER"/>');return r}.call(this),n.join("")},e.prototype.toXML=function(){var e,t,n,r;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),t=function(){var t;t=[];for(n in e)r=e[n],r&&t.push(n+'="'+r+'"');return t}().join(" "),"<query "+t+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},e.prototype.toJSON=function(){var e,t,n,r,i;return I({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var e,t,n,r;for(n=this.views,r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push(S(i));return r}.call(this),orderBy:function(){var e,r,i,o,a;for(i=this.sortOrder,a=[],e=0,r=i.length;e<r;e++)o=i[e],n=o.path,t=o.direction,a.push({path:S(n),direction:t});return a}.call(this),joins:function(){var e,t;e=this.joins,t=[];for(n in e)r=e[n],"OUTER"===r&&t.push(S(n));return t}.call(this),where:function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;t<n;t++)e=r[t],i.push(d(e));return i}.call(this)})},e.prototype.fetchCode=function(e,t){var n;return n={query:this.toXML(),lang:e},H(t,this.service.post("query/code",n).then(this.service.VERIFIER).then(E("code")))},e.prototype.setName=function(e){this.name=e},e.prototype.save=function(e,t){return s(this.service,16,function(n){return function(){var r,i;return X.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},H(t,n.service.authorise(r)).then(function(e){return n.service.doReq(e)}).then(function(e){return e.queries})}}(this))},e.prototype.store=function(e,t){return s(this.service,16,function(n){return function(){var r,i,o,a;return X.isFunction(e)&&(a=[null,e],e=a[0],t=a[1]),null!=e&&n.setName(e),o=function(e,t){if(null==e)return n.setName(t)},r=X.compose(E(n.name),E("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},H(t,o,n.service.authorise(i)).then(function(e){return n.service.doReq(e)}).then(r)}}(this))},e.prototype.saveAsTemplate=function(e,t){return s(this.service,16,function(n){return function(){var r,i;if(X.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+h(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},H(t,n.service.authorise(r).then(function(e){return n.service.doReq(e)}))}}(this))},e.prototype.getCodeURI=function(e){var t,n;return t={query:this.toXML(),lang:e,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(t.token=this.service.token),""+this.service.root+"query/code?"+z(t)},e.prototype.getExportURI=function(t,n){var r,i;return null==t&&(t="tab"),null==n&&(n={}),J.call(e.BIO_FORMATS,t)>=0?this["get"+t.toUpperCase()+"URI"](n):(r=D(n,{query:this.toXML(),format:t}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+z(r))},e.prototype.needsAuthentication=function(){return X.any(this.constraints,function(e){var t;return"NOT IN"===(t=e.op)||"IN"===t})},e.prototype.fetchQID=function(e){return H(e,this.service.post("queries",{query:this.toXML()}).then(E("id")))},t=function(e){return e.append("primaryIdentifier").toString()},e.prototype.__bio_req=function(e,n){var r,i;return i=this.makeListQuery(),r=function(t){return X.any(e,function(e){return t.isa(e)})},i.views=X.take(n)(function(){var e,i,o,a;for(o=this.getViewNodes(),a=[],e=0,i=o.length;e<i;e++)n=o[e],r(n)&&a.push(t(n));return a}.call(this)),{query:i.toXML(),format:"text"}},e.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},e.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},e.prototype._bed_req=e.prototype._gff3_req,e}(),U=x(function(e,t){return e.concat(t)}),a.prototype.toString=a.prototype.toXML,a.ATTRIBUTE_OPS=U([a.ATTRIBUTE_VALUE_OPS,a.MULTIVALUE_OPS,a.NULL_OPS]),a.REFERENCE_OPS=U([a.TERNARY_OPS,a.LOOP_OPS,a.LIST_OPS]),c=function(e,t){return function(n,r){var i,o,a,s,u;return null==n&&(n={}),null==r&&(r=function(){}),X.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(e){return function(t){var n;return n=e.getPathInfo(t),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var e,t,r,i;for(r=n.view,i=[],e=0,t=r.length;e<t;e++)s=r[e],i.push(this.getPathInfo(s).toString());return i}.call(this)),o=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,a=D(o[e](),n),t.call(o,a,r)}},Q=a.BIO_FORMATS,Y=function(e){var t,n,r;return n="_"+e+"_req",t="get"+e.toUpperCase(),r=t+"URI",a.prototype[t]=c(n,function(t,n){return H(n,this.service.post("query/results/"+e,t))}),a.prototype[r]=c(n,function(t,n){return null!=this.service.token&&(t.token=this.service.token),""+this.service.root+"query/results/"+e+"?"+z(t)})};for(G=0,Z=Q.length;G<Z;G++)b=Q[G],Y(b);for(W=function(e){return function(){var t,n,r,i;if(n=arguments[0],t=2<=arguments.length?te.call(arguments,1):[],this.service[e])return null==n?n={}:X.isFunction(n)&&(n={},t=function(){var e,t,n;for(n=[],e=0,t=arguments.length;e<t;e++)r=arguments[e],n.push(r);return n}.apply(this,arguments)),n=I(D({start:this.start,size:this.maxRows},n)),(i=this.service)[e].apply(i,[this,n].concat(te.call(t)));throw new Error("Service does not provide '"+e+"'.")}},K=0,$=u.length;K<$;K++)N=u[K],a.prototype[N]=W(N);i.mixin(a.prototype),a.prototype.emit=a.prototype.trigger,a.prototype.bind=a.prototype.on,C.Query=a}).call(this)},{"./util":39,"./xml":41,"backbone-events-standalone":15}],35:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,E,_,S,T,k,C,P,A,O,D,N,M,I,L,R,B,j,q,F,z,V,U,X,H,Y,W,G,K,Z,$,Q,J,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,he,fe,de,pe=function(e,t){return function(){return e.apply(t,arguments)}},ve={}.hasOwnProperty,ge=[].slice;for(_=e("./promise"),m=e("./model").Model,k=e("./query").Query,v=e("./lists").List,q=e("./user").User,c=e("./id-resolution-job").IDResolutionJob,oe=e("./version"),ie=e("./util"),Z=e("./http"),re=ie.querystring,ae=ie.withCB,Q=ie.map,J=ie.merge,G=ie.get,te=ie.set,$=ie.invoke,ne=ie.success,W=ie.error,A=ie.REQUIRES_VERSION,Y=ie.dejoin,F={},r={},C={},g={},M={},U={},a="http://",z="version",R="templates",P="version/release",i="classkeys",f="lists",y="model",N="summaryfields",S="query/results",T="search",X="widgets",s="list/enrichment",H="listswithobject",d={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},O="lists/subtract",V="user/whoami",L=S+"/tablerows",E="user/preferences",x="path/values",j="user/tokens",h="ids",w={},fe=[z,P,i,X,y,N,T,x],ue=0,ce=fe.length;ue<ce;ue++)ee=fe[ue],w[ee]=!0;for(t={},de=[V,E,d,O,H,s,R,j],le=0,he=de.length;le<he;le++)ee=de[le],t[ee]=!0;b=function(e,n){return!w[e]&&(!!t[e]||(null==n||!n.needsAuthentication||n.needsAuthentication()))},u=/^https?:\/\//i,l=/service\/?$/i,D="/service/",o=function(e){var t,n;return(t=null!=(n=console.error)?n:console.log)(e)},se=function(e,t,n,r,i){var o,a,s,u,l;return s=this.root,u=this.useCache,a=null!=this[e]?this[e]:this[e]=u&&(l=t[s])?ne(l):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(J(o,{url:this.root+n})).then(function(e){return t[s]=e[r]})),ae(i,a)},K=function(e){return function(t){return new _(function(n,r){var i;return(i=ie.find(t,function(t){return t.name===e}))?n(i):r('List "'+e+'" not found among: '+t.map(G("name")))})}},p=function(e,t){return null==t&&(t="listName"),ie.compose(e.fetchList,G(t))},B=function(e){var t,n,r,i,o,a;for(null==e&&(e=[]),i=ie.isArray(e)?e:[e],a=[],n=0,r=i.length;n<r;n++)t=i[n],a.push(null!=(o=t.name)?o:t);return a},I=function(){function e(e){var t;if(this.root=e.root,this.token=e.token,this.errorHandler=e.errorHandler,this.DEBUG=e.DEBUG,this.help=e.help,t=e.noCache,this.headers=e.headers,this.connectAs=pe(this.connectAs,this),this.createList=pe(this.createList,this),this.resolveIds=pe(this.resolveIds,this),this.templateQuery=pe(this.templateQuery,this),this.savedQuery=pe(this.savedQuery,this),this.query=pe(this.query,this),this.fetchRelease=pe(this.fetchRelease,this),this.fetchClassKeys=pe(this.fetchClassKeys,this),this.fetchVersion=pe(this.fetchVersion,this),this.fetchSummaryFields=pe(this.fetchSummaryFields,this),this.fetchModel=pe(this.fetchModel,this),this.fetchWidgetMap=pe(this.fetchWidgetMap,this),this.fetchWidgets=pe(this.fetchWidgets,this),this.complement=pe(this.complement,this),this.fetchListsContaining=pe(this.fetchListsContaining,this),this.fetchList=pe(this.fetchList,this),this.findLists=pe(this.findLists,this),this.fetchLists=pe(this.fetchLists,this),this.fetchTemplates=pe(this.fetchTemplates,this),this.tableRows=pe(this.tableRows,this),this.values=pe(this.values,this),this.rows=pe(this.rows,this),this.records=pe(this.records,this),this.table=pe(this.table,this),this.pathValues=pe(this.pathValues,this),this.fetchUser=pe(this.fetchUser,this),this.whoami=pe(this.whoami,this),this.findById=pe(this.findById,this),this.count=pe(this.count,this),this.enrichment=pe(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=a+this.root),l.test(this.root)||(this.root=this.root+D),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!t,this.getFormat=function(e){return function(e){return null==e&&(e="json"),e}}(this)}var t,n,w,_,I,j;return e.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),Z.doReq.apply(this,arguments)},e.prototype.post=function(e,t){return this.makeRequest("POST",e,t)},e.prototype.get=function(e,t){return this.makeRequest("GET",e,t)},e.prototype.makeRequest=function(e,t,n,r,i){var o,a,s,u,l,c,h;return null==e&&(e="GET"),null==t&&(t=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),ie.isArray(r)&&(l=r,r=l[0],a=l[1]),ie.isArray(n)&&(n=ie.pairsToObj(n)),null==a&&(a=this.errorHandler),n=ie.copy(n),o=this.getFormat(n.format),Z.supports(e)||(c=[e,Z.getMethod(e)],n.method=c[0],e=c[1]),s={data:n,dataType:o,success:r,error:a,path:t,type:e},null!=n.auth&&(s.auth=n.auth,delete s.data.auth),null!=n.headers&&(s.headers=ie.copy(n.headers),delete s.data.headers),(u=null!=(h=n.timeout)?h:this.timeout)&&(s.timeout=u,delete n.timeout),this.authorise(s).then(function(e){return function(t){return e.doReq(t,i)}}(this))},e.prototype.authorise=function(e){return this.fetchVersion().then(function(t){return function(n){var r,i,o;return r=ie.copy(e),null==r.headers&&(r.headers={}),r.url=t.root+r.path,i=[],n<14&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=t.token&&b(e.path,null!=(o=r.data)?o.query:void 0)&&(n>=14?r.headers.Authorization="Token "+t.token:"string"==typeof r.data?i.push(["token",t.token]):r.data.token=t.token),i.length&&(r.url+="?"+re(i)),r}}(this))},e.prototype.attachCustomHeaders=function(e){var t;return null!=this.headers?(t=ie.copy(e),t.headers=ie.merge(t.headers,this.headers),t):e},e.prototype.enrichment=function(e,t){return A(this,8,function(n){return function(){var r;return r=J({maxp:.05,correction:"Holm-Bonferroni"},e),ae(t,n.get(s,r).then(G("results")))}}(this))},e.prototype.search=function(e,t){return null==e&&(e={}),null==t&&(t=function(){}),A(this,9,function(n){return function(){var r,i,o,a;if(ie.isFunction(e)&&(a=[e,{}],t=a[0],e=a[1]),"string"==typeof e)i={q:e};else{i={q:e.q,start:e.start,size:e.size};for(r in e)ve.call(e,r)&&(o=e[r],"q"!==r&&"start"!==r&&"size"!==r&&(i["facet_"+r]=o))}return ae(t,n.post(T,i))}}(this))},e.prototype.makePath=function(e,t,n){return null==t&&(t={}),null==n&&(n=function(){}),ae(n,this.fetchModel().then(function(n){return n.makePath(e,t)}))},e.prototype.count=function(e,t){var n,r;return null==t&&(t=function(){}),n=e?null!=e.toPathString?(ee=e.isClass()?e.append("id"):e,this.pathValues(ee,"count")):null!=e.toXML?(r={query:e,format:"jsoncount"},this.post(S,r).then(G("count"))):"string"==typeof e?this.fetchModel().then(function(t){return function(n){var r;try{return t.count(n.makePath(e))}catch(i){return r=i,t.query({select:[e]}).then(t.count)}}}(this)):this.query(e).then(this.count):W("Not enough arguments"),ae(t,n)},e.prototype.findById=function(e,t,n,r){var i,o;return null==n&&(n=["**"]),null==r&&(r=function(){}),ie.isFunction(n)&&(o=[["**"],n],n=o[0],r=o[1]),i=this.query({from:e,select:n,where:{id:t}}).then(Y).then($("records")).then(G(0)),ae(r,i)},e.prototype.lookup=function(e,t,n,r){var i,o;return ie.isFunction(n)&&(o=[null,n],n=o[0],r=o[1]),i=this.query({from:e,select:["**"],where:[[e,"LOOKUP",t,n]]}).then(Y).then($("records")),ae(r,i)},e.prototype.find=function(e,t,n,r){var i;return ie.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),ae(r,this.lookup(e,t,n).then(function(e){return null==e||0===e.length?W("Nothing found"):e.length>1?W("Multiple items found: "+e.slice(0,3)+"..."):ne(e[0])}))},e.prototype.whoami=function(e){return A(this,9,function(t){return function(){return ae(e,t.get(V).then(G("user")).then(function(e){return new q(t,e)}))}}(this))},e.prototype.fetchUser=function(){var e;return e=1<=arguments.length?ge.call(arguments,0):[],this.whoami.apply(this,e)},I=function(e,t){return{format:e,path:String(t),typeConstraints:JSON.stringify(t.subclasses)}},e.prototype.pathValues=function(e,t,n){return null==t&&(t={}),A(this,6,function(r){return function(){var i,o,a,s,u;return"string"==typeof t&&(s=t,t={}),ie.isFunction(t)&&(u=[n,t],t=u[0],n=u[1]),"count"!==s&&(s="results"),o="count"===s?"jsoncount":"json",a=function(){var n;try{return this.fetchModel().then($("makePath",e,null!=(n=e.subclasses)?n:t)).then(function(e){return I(o,e)}).then(function(e){return function(t){return e.post(x,t)}}(this)).then(G(s))}catch(r){return i=r,W(i)}}.call(r),ae(n,a)}}(this))},e.prototype.doPagedRequest=function(e,t,n,r,i){var o,a;return null==n&&(n={}),null==i&&(i=function(){}),null!=e.toXML?(ie.isFunction(n)&&(a=[n,{}],i=a[0],n=a[1]),o=J(n,{query:e,format:r}),ae(i,this.post(t,o).then(G("results")))):this.query(e).then(function(e){return function(o){return e.doPagedRequest(o,t,n,r,i)}}(this))},e.prototype.table=function(e,t,n){return this.doPagedRequest(e,S,t,"jsontable",n)},e.prototype.records=function(e,t,n){return this.doPagedRequest(e,S,t,"jsonobjects",n)},e.prototype.rows=function(e,t,n){return this.doPagedRequest(e,S,t,"json",n)},e.prototype.values=function(e,t,n){var r,i;return ie.isFunction(t)&&(i=[t,n],n=i[0],t=i[1]),r=null==e?W("No query term supplied"):null!=e.descriptors||"string"==typeof e?this.pathValues(e,t).then(Q(G("value"))):null!=e.toXML?1!==e.views.length?W("Expected one column, got "+e.views.length):this.rows(e,t).then(Q(G(0))):this.query(e).then(function(e){return function(n){return e.values(n,t)}}(this)),ae(n,r)},e.prototype.tableRows=function(e,t,n){return this.doPagedRequest(e,L,t,"json",n)},e.prototype.fetchTemplates=function(e){return ae(e,this.get(R).then(G("templates")))},e.prototype.fetchLists=function(e){return this.findLists("",e)},e.prototype.findLists=function(e,t){return null==e&&(e=""),null==t&&(t=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return ae(t,e&&r<13?W("Finding lists by name on the server requires version 13. This is only "+r):(i=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(new v(t,n));return o},n.get(f,{name:e}).then(G("lists")).then(i)))}}(this))},e.prototype.fetchList=function(e,t){return this.fetchVersion().then(function(n){return function(r){return ae(t,r<13?n.findLists().then(K(e)):n.findLists(e).then(G(0)))}}(this))},e.prototype.fetchListsContaining=function(e,t){var n;return n=function(e){return function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(new v(n,e));return o}}(this),ae(t,this.get(H,e).then(G("lists")).then(n))},e.prototype.combineLists=function(e,t,n){var r,i,o,a,s,u;return u=J({lists:[],tags:[]},t),o=u.name,i=u.lists,s=u.tags,r=u.description,a={name:o,description:r},null==a.description&&(a.description=""+e+" of "+i.join(", ")),a.tags=s.join(";"),a.lists=i.join(";"),ae(n,this.get(d[e],a).then(p(this)))},e.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(ge.call(arguments)))},e.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(ge.call(arguments)))},e.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(ge.call(arguments)))},e.prototype.complement=function(e,t){var n,r,i,o,a,s,u,l,c;return null==e&&(e={}),null==t&&(t=function(){}),o=e.from,i=e.exclude,s=e.name,r=e.description,c=e.tags,n=function(){return"Relative complement of "+a.join(" and ")+" in "+u.join(" and ")},u=B(o),a=B(i),null==s&&(s=n()),null==r&&(r=n()),null==c&&(c=[]),l={name:s,description:r,tags:c,lists:a,references:u},ae(t,this.post(O,l).then(p(this)))},e.prototype.fetchWidgets=function(e){return A(this,8,function(t){return function(){return se.call(t,"widgets",U,X,"widgets",e)}}(this))},j=ie.omap(function(e){return[e.name,e]}),e.prototype.fetchWidgetMap=function(e){return A(this,8,function(t){return function(){return ae(e,null!=t.__wmap__?t.__wmap__:t.__wmap__=t.fetchWidgets().then(j))}}(this))},e.prototype.fetchModel=function(e){var t;return t=se.call(this,"model",g,y,"model").then(m.load).then(te({service:this})),ae(e,t)},e.prototype.fetchSummaryFields=function(e){return se.call(this,"summaryFields",M,N,"classes",e)},e.prototype.fetchVersion=function(e){return se.call(this,"version",F,z,"version",e)},e.prototype.fetchClassKeys=function(e){return se.call(this,"classkeys",r,i,"classes",e)},e.prototype.fetchRelease=function(e){return se.call(this,"release",C,P,"version",e)},e.prototype.query=function(e,t){var n;return n=function(t){return function(n){var r,i;return r=n[0],i=n[1],new k(e,t,{model:r,summaryFields:i})}}(this),ae(t,ie.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},_=function(e,t){return function(n){return n?e.query(n):W("No query found called "+t)}},n=function(e){return e?"string"==typeof e?ne():W("Name must be a string"):W("Name not provided")},e.prototype.savedQuery=function(e,t){return A(this,16,function(r){return function(){return n(e).then(function(){return ae(t,r.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(_(r,e)))})}}(this))},e.prototype.templateQuery=function(e,t){return n(e).then(function(n){return function(){return ae(t,n.fetchTemplates().then(G(e)).then(te("type","TEMPLATE")).then(_(n,e)))}}(this))},e.prototype.manageUserPreferences=function(e,t,n){return A(this,11,function(r){return function(){return ae(n,r.makeRequest(e,E,t).then(G("preferences")))}}(this))},e.prototype.resolveIds=function(e,t){return A(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+h,contentType:"application/json",data:JSON.stringify(e),dataType:"json"},ae(t,n.doReq(r).then(G("uid")).then(c.create(n)))}}(this))},e.prototype.resolutionJob=function(e){return c.create(this)(e)},e.prototype.createList=function(e,t,n){var r,i;return null==e&&(e={}),null==t&&(t=""),null==n&&(n=function(){}),r=function(t){return function(n){return J(n,{token:t.token,tags:e.tags||[]})}}(this),i={data:ie.isArray(t)?t.map(function(e){return'"'+e+'"'}).join("\n"):t,dataType:"json",url:""+this.root+"lists?"+re(r(e)),type:"POST",contentType:"text/plain"},ae(n,this.doReq(i).then(p(this)))},w=function(e){return e.user.temporaryToken},e.prototype.connectAs=function(t){return e.connect(J(this,{token:t,noCache:!this.useCache}))},e.prototype.register=function(e,t,n){return A(this,9,function(r){return function(){return ae(n,r.post("users",{name:e,password:t}).then(w).then(r.connectAs))}}(this))},t=300,e.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=t),A(this,16,function(t){return function(){var r;return r=null!=t.token?t.post("user/deregistration",{validity:e}).then(G("token")):W("Not registered"),ae(n,r)}}(this))},e.prototype.deregister=function(e,t){return A(this,16,function(n){return function(){return ae(t,n.makeRequest("DELETE","user",{deregistrationToken:e,format:"xml"}))}}(this))},e.prototype.login=function(e,t,n){return A(this,9,function(r){return function(){var i;return i=""+e+":"+t,ae(n,r.logout().then(function(e){return e.get("user/token",{auth:i})})).then(G("token")).then(r.connectAs)}}(this))},e.prototype.logout=function(e){return ae(e,ne(this.connectAs()))},e}(),I.prototype.rowByRow=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=Z.iterReq("POST",S,"json"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.rowByRow.apply(t,[n].concat(ge.call(e)))}}(this))},I.prototype.eachRow=I.prototype.rowByRow,I.prototype.recordByRecord=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=Z.iterReq("POST",S,"jsonobjects"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.recordByRecord.apply(t,[n].concat(ge.call(e)))}}(this))},I.prototype.eachRecord=I.prototype.recordByRecord,I.prototype.union=I.prototype.merge,I.prototype.difference=I.prototype.diff,I.prototype.symmetricDifference=I.prototype.diff,I.prototype.relativeComplement=I.prototype.complement,I.prototype.subtract=I.prototype.complement,I.flushCaches=function(){return g={},F={},C={},r={},M={},U={}},I.connect=function(e){if(null==(null!=e?e.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(e));return new I(e)},n.Service=I,n.Model=m,n.Query=k,n.utils=ie,n.VERSION=oe.VERSION,n.imjs=oe}).call(this)},{"./http":28,"./id-resolution-job":29,"./lists":30,"./model":31,"./promise":33,"./query":34,"./user":38,"./util":39,"./version":40}],36:[function(e,t,n){(function(e){(function(){var t;n.DOMParser=null!=e.DOMParser?e.DOMParser:t=function(){function e(){throw new Error("DOMParser is not available")}return e}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){(function(){var t,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}};r=function(e,t){var n,r,i;i=[];for(n in e)r=e[n],i.push(t[n]=r);return i},t=e("./promise"),i=["attributes","references","collections"],n.Table=function(){function e(e,t){var n,a,s,u,l,c,h;for(this.model=t,this.getDisplayName=o(this.getDisplayName,this),this.name=e.name,this.tags=e.tags,this.displayName=e.displayName,this.attributes=e.attributes,this.references=e.references,this.collections=e.collections,this.fields={},this.__parents__=null!=(c=e["extends"])?c:[],u=0,l=i.length;u<l;u++){if(a=i[u],null==this[a])throw new Error("Bad model data: missing "+a);r(this[a],this.fields)}h=this.collections;for(s in h)n=h[s],n.isCollection=!0}return e.prototype.toString=function(){
var e,t;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(e in n)t=n[e],r.push(e);return r}.call(this)+"]]"},e.prototype.parents=function(){var e;return(null!=(e=this.__parents__)?e:[]).slice()},e.prototype.getDisplayName=function(){return new t(function(e){return function(t,n){return null!=e.model?t(e.model.makePath(e.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},e}()}).call(this)},{"./promise":33}],38:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l=function(e,t){return function(){return e.apply(t,arguments)}};u=e("./util"),s=u.withCB,o=u.get,a=u.isFunction,t=u.any,i=u.error,r=function(e,t,n,r){return e.service.manageUserPreferences(n,t,r).then(function(t){return e.preferences=t})},n.User=function(){function e(e,t){this.service=e,this.username=t.username,this.preferences=t.preferences,this.refresh=l(this.refresh,this),this.clearPreferences=l(this.clearPreferences,this),this.clearPreference=l(this.clearPreference,this),this.setPreferences=l(this.setPreferences,this),this.setPreference=l(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return e.prototype.setPreference=function(e,t,n){var r,o;if(a(t)&&(o=[null,t],t=o[0],n=o[1]),"string"==typeof e)r={},r[e]=t;else{if(null!=t)return s(n,i("Incorrect arguments to setPreference"));r=e}return this.setPreferences(r,n)},e.prototype.setPreferences=function(e,t){return r(this,e,"POST",t)},e.prototype.clearPreference=function(e,t){return r(this,{key:e},"DELETE",t)},e.prototype.clearPreferences=function(e){return r(this,{},"DELETE",e)},e.prototype.refresh=function(e){return r(this,{},"GET",e)},e.prototype.createToken=function(e,n,r){var i,u;return null==e&&(e="day"),null==r&&t([e,n],a)&&(a(e)?(i=[null,null,e],e=i[0],n=i[1],r=i[2]):a(n)&&(u=[null,n],n=u[0],r=u[1])),s(r,this.service.post("user/tokens",{type:e,message:n}).then(o("token")))},e.prototype.fetchCurrentTokens=function(e){return s(e,this.service.get("user/tokens").then(o("tokens")))},e.prototype.revokeAllTokens=function(e){return s(e,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(e,t){return s(t,this.service.makeRequest("DELETE","user/tokens/"+e))},e}()}).call(this)},{"./util":39}],39:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,E=[].slice,_=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},S={}.hasOwnProperty;t=e("./promise"),m=n,m.defer=function(){var e;return e={},e.promise=new t(function(t,n){return e.resolve=t,e.reject=n}),e},a=function(e){return encodeURIComponent(String(e))},y=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t.map(a).join("="));return i}().join("&")},m.querystring=function(e){var t,n,r,i,o,a;if(!e)return"";if(p(e))r=e.slice();else{r=[];for(t in e)a=e[t],p(a)?(i=function(){var e,n,r;for(r=[],e=0,n=a.length;e<n;e++)o=a[e],r.push([t,o]);return r}(),r=r.concat(i)):r.push([t,a])}return y(function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)n=r[e],null!=n[1]&&i.push(n);return i}())},m.curry=o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?E.call(arguments,1):[],function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],t.apply(null,e.concat(n))}},m.error=u=function(e){return new t(function(t,n){return n(new Error(e))})},m.success=b=function(e){return new t(function(t,n){return t(e)})},m.parallel=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],1===e.length&&!e[0].then&&e[0].length?t.all(e[0]):t.all(e)},m.withCB=function(){var e,t,n,r,i,a,s,u;for(t=2<=arguments.length?E.call(arguments,0,a=arguments.length-1):(a=0,[]),i=arguments[a++],s=0,u=t.length;s<u;s++)e=t[s],null!=e&&(r=o(e,null),n=e,i.then(r,n));return i},m.fold=c=function(e){return function(t,n){var r,i,o;if(1===arguments.length&&(n=(null!=t?t.slice():void 0)||t,t=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(e,t);i=t;for(r in n)o=n[r],i=null!=i?e(i,r,o):{k:o};return i}},m.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},m.filter=function(e){return function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],e(n)&&o.push(n);return o}},m.uniqBy=function(e,t){var n,r,i,a,s,u;if(1===arguments.length)return o(m.uniqBy,e);if(r=[],i=[],null==t)return i;for(s=0,u=t.length;s<u;s++)a=t[s],n=e(a),_.call(r,n)<0&&(r.push(n),i.push(a));return i},m.find=function(e,t){var n,r,i;if(1===arguments.length)return t=e,function(e){return m.find(e,t)};for(r=0,i=e.length;r<i;r++)if(n=e[r],t(n))return n;return null},p=null!=(x=Array.isArray)?x:function(e){return null!=(null!=e?e.splice:void 0)&&null!=(null!=e?e.push:void 0)&&null!=(null!=e?e.pop:void 0)&&null!=(null!=e?e.slice:void 0)},m.isArray=p,m.isFunction="function"!=typeof/./?function(e){return"function"==typeof e}:function(e){return null!=e&&null!=e.call&&null!=e.apply&&"[object Function]"===e.toString()},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(e){var t,n,r,i,o,a;if(null==e)return"";for(i=String(e).replace(/[&<>"']/g,function(e){return s[e]}),r=[],n=o=0,a=i.length;0<=a?o<=a:o>=a;n=0<=a?++o:--o)t=i.charCodeAt(n),t>256?r.push("&#"+t+";"):r.push(i.charAt(n));return r.join("")},m.omap=function(e){var t;return t=c(function(t,n,r){var i,o,a;return a=e(n,r),i=a[0],o=a[1],p(o)&&(o=o.slice()),t[i]=o,t}),function(e){return t({},e)}},m.copy=m.omap(function(e,t){return[e,t]}),m.partition=function(e){return function(t){var n;return(n=c(function(t,n){var r,i;return i=t[0],r=t[1],e(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],t)}},m.merge=function(e,t){return extend(extend({},e),t)},m.extend=function(e,t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},m.id=h=function(e){return e},m.concatMap=function(e){return function(t){var n,r,i,o,a;for(r=void 0,o=0,a=t.length;o<a;o++)i=t[o],n=e(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):v(r,n);return r}},m.map=function(e){return f("map",e)},i=c(function(e,t){return function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],e(t.apply(null,n))}}),m.compose=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],i(e)},m.flatMap=m.concatMap,m.difference=function(e,t){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],_.call(t,n)<0&&o.push(n);return o},m.stringList=function(e){return"string"==typeof e?[e]:e},m.flatten=l=function(){var e,t,n,r,i,o,a,s,u;for(n=1<=arguments.length?E.call(arguments,0):[],e=[],i=0,a=n.length;i<a;i++)if(t=n[i],p(t))for(u=l.apply(null,t),o=0,s=u.length;o<s;o++)r=u[o],e.push(r);else e.push(t);return e},m.sum=m.concatMap(h),m.merge=v=function(){var e,t,n,r,i,o,a;for(r=1<=arguments.length?E.call(arguments,0):[],t={},o=0,a=r.length;o<a;o++){n=r[o];for(e in n)S.call(n,e)&&(i=n[e],t[e]=i)}return t},m.any=function(e,t){var n,r,i;for(null==t&&(t=h),r=0,i=e.length;r<i;r++)if(n=e[r],t(n))return!0;return!1},m.invoke=f=function(){var e,t;return t=arguments[0],e=2<=arguments.length?E.call(arguments,1):[],d(t,e)},m.invokeWith=d=function(e,t,n){return null==t&&(t=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+e+'" of null');if(r[e])return r[e].apply(n||r,t);throw new Error('Cannot call undefined method "'+e+" of "+r)}},m.get=function(e){return function(t){return t[e]}},m.set=function(e,t){return function(n){var r,i;if(2===arguments.length)n[e]=t;else for(r in e)S.call(e,r)&&(i=e[r],n[r]=i);return n}},r=function(e,t){return"This service requires a service at version "+e+" or above. This one is at "+t},m.REQUIRES_VERSION=function(e,t,n){return e.fetchVersion().then(function(e){return e>=t?n():u(r(t,e))})},m.dejoin=function(e){var t,n,r,i,o;for(o=e.views,r=0,i=o.length;r<i;r++)n=o[r],t=n.split("."),t.length>2&&e.addJoin(t.slice(1,-1).join("."));return e},w=c(function(e,t){return e.then(t)}),m.sequence=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],w(b(),e)},g=c(function(e,t){var n,r;if(n=t[0],r=t[1],null!=e[n])throw new Error("Duplicate key: "+n);return e[n]=r,e}),m.pairsToObj=function(e){return g({},e)}}).call(this)},{"./promise":33}],40:[function(e,t,n){(function(){n.VERSION="3.16.0"}).call(this)},{}],41:[function(e,t,n){(function(){var t,r;t=e("xmldom").DOMParser,r=function(e){return e=e.replace(/^\s*/g,""),e=e.replace(/\s$/g,""),0===e.length?e:">"!==e[e.length-1]?e+">":e},n.parse=function(e){var n,i;if("string"!=typeof e)throw new Error("Expected a string - got "+e);if(e=r(e),!e)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new t,i.parseFromString(e,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}}).call(this)},{xmldom:36}],42:[function(e,t,n){(function(r,i){function o(e,t){return"string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e?e:"function"==typeof e&&e(t)}var a=e("jsonparse"),s=e("through");n.parse=function(e,t){var n=new a,r=s(function(e){"string"==typeof e&&(e=new i(e)),n.write(e)},function(e){e&&r.write(e),r.queue(null)});"string"==typeof e&&(e=e.split(".").map(function(e){return"*"===e||(""===e?{recurse:!0}:e)}));var u=0;return e&&e.length||(e=null),n.onValue=function(n){if(this.root||(r.root=n),e){for(var i=0,a=0;i<e.length;){var s,l=e[i];if(a++,l&&!l.recurse){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(!o(l,s.key))return;i++}else{i++;var c=e[i];if(!c)return;for(;;){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(o(c,s.key)){i++;break}a++}}}if(a===this.stack.length){u++;var h=this.stack.slice(1).map(function(e){return e.key}).concat([this.key]),f=this.value[this.key];null!=f&&null!=(f=t?t(f,h):f)&&r.queue(f),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(t,i){n._onToken(t,i),0===this.stack.length&&r.root&&(e||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(e){r.emit("error",e)},r},n.stringify=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="[\n",t="\n,\n",n="\n]\n");var i,o=!0,a=!1;return i=s(function(n){a=!0;var s=JSON.stringify(n,null,r);o?(o=!1,i.queue(e+s)):i.queue(t+s)},function(t){a||i.queue(e),i.queue(n),i.queue(null)})},n.stringifyObject=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="{\n",t="\n,\n",n="\n}\n");var i=!0,o=!1;return stream=s(function(n){o=!0;var a=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(e+a)):this.queue(t+a)},function(t){o||this.queue(e),this.queue(n),this.queue(null)}),stream},t.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,e("_process"),e("buffer").Buffer)},{_process:49,buffer:18,jsonparse:44,through:75}],43:[function(t,n,r){(function(r,i,o){(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){W=e}function c(e){$=e}function h(){var e=r.nextTick,t=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=o),function(){e(g)}}function f(){return function(){Y(g)}}function d(){var e=0,t=new ee(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function v(){return function(){setTimeout(g,1)}}function g(){for(var e=0;e<Z;e+=2){var t=re[e],n=re[e+1];t(n),re[e]=void 0,re[e+1]=void 0}Z=0}function y(){try{var e=t,n=e("vertx");return Y=n.runOnLoop||n.runOnContext,f()}catch(r){return v()}}function m(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function x(e){try{return e.then}catch(t){return se.error=t,se}}function E(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function _(e,t,n){$(function(e){var r=!1,i=E(n,t,function(n){r||(r=!0,t!==n?k(e,n):P(e,n))},function(t){r||(r=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,A(e,i))},e)}function S(e,t){t._state===oe?P(e,t._result):t._state===ae?A(e,t._result):O(t,void 0,function(t){k(e,t)},function(t){A(e,t)})}function T(e,t){if(t.constructor===e.constructor)S(e,t);else{var n=x(t);n===se?A(e,se.error):void 0===n?P(e,t):s(n)?_(e,t,n):P(e,t)}}function k(e,t){e===t?A(e,b()):a(t)?T(e,t):P(e,t)}function C(e){e._onerror&&e._onerror(e._result),D(e)}function P(e,t){e._state===ie&&(e._result=t,e._state=oe,0!==e._subscribers.length&&$(D,e))}function A(e,t){e._state===ie&&(e._state=ae,e._result=t,$(C,e))}function O(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+oe]=n,i[o+ae]=r,0===o&&e._state&&$(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function N(){this.error=null}function M(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function I(e,t,n,r){var i,o,a,u,l=s(n);if(l){if(i=M(n,r),i===ue?(u=!0,o=i.error,i=null):a=!0,t===i)return void A(t,w())}else i=r,a=!0;t._state!==ie||(l&&a?k(t,i):u?A(t,o):e===oe?P(t,i):e===ae&&A(t,i))}function L(e,t){try{t(function(t){k(e,t)},function(t){A(e,t)})}catch(n){A(e,n)}}function R(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(m),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?P(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&P(n.promise,n._result))):A(n.promise,n._validationError())}function B(e){return new le(this,e).promise}function j(e){function t(e){k(i,e)}function n(e){A(i,e)}var r=this,i=new r(m);if(!K(e))return A(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===ie&&a<o;a++)O(r.resolve(e[a]),void 0,t,n);return i}function q(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return k(n,e),n}function F(e){var t=this,n=new t(m);return A(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==e&&(s(e)||z(),this instanceof U||V(),L(this,e))}function X(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=ve)}var H;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,W,G,K=H,Z=0,$=({}.toString,function(e,t){re[Z]=e,re[Z+1]=t,Z+=2,2===Z&&(W?W(g):G())}),Q="undefined"!=typeof window?window:void 0,J=Q||{},ee=J.MutationObserver||J.WebKitMutationObserver,te="undefined"!=typeof r&&"[object process]"==={}.toString.call(r),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3);G=te?h():ee?d():ne?p():void 0===Q&&"function"==typeof t?y():v();var ie=void 0,oe=1,ae=2,se=new N,ue=new N;R.prototype._validateInput=function(e){return K(e)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var le=R;R.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===ie&&i<t;i++)e._eachEntry(r[i],i)},R.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;u(e)?e.constructor===r&&e._state!==ie?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},R.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===ie&&(r._remaining--,e===ae?A(i,n):r._result[t]=n),0===r._remaining&&P(i,r._result)},R.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){n._settledAt(oe,t,e)},function(e){n._settledAt(ae,t,e)})};var ce=B,he=j,fe=q,de=F,pe=0,ve=U;U.all=ce,U.race=he,U.resolve=fe,U.reject=de,U._setScheduler=l,U._setAsap=c,U._asap=$,U.prototype={constructor:U,then:function(e,t){var n=this,r=n._state;if(r===oe&&!e||r===ae&&!t)return this;var i=new this.constructor(m),o=n._result;if(r){var a=arguments[r-1];$(function(){I(r,i,a,o)})}else O(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var ge=X,ye={Promise:ve,polyfill:ge};"function"==typeof e&&e.amd?e(function(){return ye}):"undefined"!=typeof n&&n.exports?n.exports=ye:"undefined"!=typeof this&&(this.ES6Promise=ye),ge()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:49,timers:76}],44:[function(e,t,n){(function(e){function n(e){for(var t=Object.keys(i),n=0,r=t.length;n<r;n++){var o=t[n];if(i[o]===e)return o}return e&&"0x"+e.toString(16)}function r(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=z,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new e(2),3:new e(3),4:new e(4)}}var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,l=i.COLON=5,c=i.COMMA=6,h=i.TRUE=7,f=i.FALSE=8,d=i.NULL=9,p=i.STRING=10,v=i.NUMBER=11,g=i.START=17,y=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,x=i.FALSE2=50,E=i.FALSE3=51,_=i.FALSE4=52,S=i.NULL1=65,T=i.NULL3=66,k=i.NULL2=67,C=i.NUMBER1=81,P=i.NUMBER2=82,A=i.NUMBER3=83,O=i.NUMBER4=84,D=i.NUMBER5=85,N=i.NUMBER6=86,M=i.NUMBER7=87,I=i.NUMBER8=88,L=i.STRING1=97,R=i.STRING2=98,B=i.STRING3=99,j=i.STRING4=100,q=i.STRING5=101,F=i.STRING6=102,z=i.VALUE=113,V=i.KEY=114,U=i.OBJECT=129,X=i.ARRAY=130,H=r.prototype;H.charError=function(e,t){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+n(this.tState)))},H.onError=function(e){throw e},H.write=function(t){"string"==typeof t&&(t=new e(t));for(var n,r=0,i=t.length;r<i;r++)if(this.tState===g)n=t[r],123===n?this.onToken(o,"{"):125===n?this.onToken(a,"}"):91===n?this.onToken(s,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(l,":"):44===n?this.onToken(c,","):116===n?this.tState=y:102===n?this.tState=w:110===n?this.tState=S:34===n?(this.string="",this.tState=L):45===n?(this.negative=!0,this.tState=C):48===n?(this.magnatude=0,this.tState=P):n>48&&n<64?(this.magnatude=n-48,this.tState=A):32===n||9===n||10===n||13===n||this.charError(t,r);else if(this.tState===L)if(n=t[r],this.bytes_remaining>0){for(var z=0;z<this.bytes_remaining;z++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+z]=t[z];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+z-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var V=0;V<=t.length-1-r;V++)this.temp_buffs[this.bytes_in_sequence][V]=t[r+V];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.string+=t.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=g,this.onToken(p,this.string),this.string=void 0):92===n?this.tState=R:n>=32?this.string+=String.fromCharCode(n):this.charError(t,r);else this.tState===R?(n=t[r],34===n?(this.string+='"',this.tState=L):92===n?(this.string+="\\",this.tState=L):47===n?(this.string+="/",this.tState=L):98===n?(this.string+="\b",this.tState=L):102===n?(this.string+="\f",this.tState=L):110===n?(this.string+="\n",this.tState=L):114===n?(this.string+="\r",this.tState=L):116===n?(this.string+="\t",this.tState=L):117===n?(this.unicode="",this.tState=B):this.charError(t,r)):this.tState===B||this.tState===j||this.tState===q||this.tState===F?(n=t[r],n>=48&&n<64||n>64&&n<=70||n>96&&n<=102?(this.unicode+=String.fromCharCode(n),this.tState++===F&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=L)):this.charError(t,r)):this.tState===C?(n=t[r],48===n?(this.magnatude=0,this.tState=P):n>48&&n<64?(this.magnatude=n-48,this.tState=A):this.charError(t,r)):this.tState===P?(n=t[r],46===n?(this.position=.1,this.tState=O):101===n||69===n?(this.exponent=0,this.tState=N):(this.tState=g,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===A?(n=t[r],46===n?(this.position=.1,this.tState=O):101===n||69===n?(this.exponent=0,this.tState=N):n>=48&&n<64?this.magnatude=10*this.magnatude+n-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===O?(n=t[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=D):this.charError(t,r)):this.tState===D?(n=t[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=N):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===N?(n=t[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=M):n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=I):this.charError(t,r)):this.tState===M?(n=t[r],n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=I):this.charError(t,r)):this.tState===I?(n=t[r],n>=48&&n<64?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===y?114===t[r]?this.tState=m:this.charError(t,r):this.tState===m?117===t[r]?this.tState=b:this.charError(t,r):this.tState===b?101===t[r]?(this.tState=g,this.onToken(h,!0)):this.charError(t,r):this.tState===w?97===t[r]?this.tState=x:this.charError(t,r):this.tState===x?108===t[r]?this.tState=E:this.charError(t,r):this.tState===E?115===t[r]?this.tState=_:this.charError(t,r):this.tState===_?101===t[r]?(this.tState=g,this.onToken(f,!1)):this.charError(t,r):this.tState===S?117===t[r]?this.tState=T:this.charError(t,r):this.tState===T?108===t[r]?this.tState=k:this.charError(t,r):this.tState===k&&(108===t[r]?(this.tState=g,this.onToken(d,null)):this.charError(t,r))},H.onToken=function(e,t){},H.parseError=function(e,t){this.onError(new Error("Unexpected "+n(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+n(this.state)))},H.onError=function(e){throw e},H.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},H.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=z)},H.emit=function(e){this.mode&&(this.state=c),this.onValue(e)},H.onValue=function(e){},H.onToken=function(e,t){this.state===z?e===p||e===v||e===h||e===f||e===d?(this.value&&(this.value[this.key]=t),this.emit(t)):e===o?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=V,this.mode=U):e===s?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=X,this.state=z):e===a?this.mode===U?this.pop():this.parseError(e,t):e===u&&this.mode===X?this.pop():this.parseError(e,t):this.state===V?e===p?(this.key=t,this.state=l):e===a?this.pop():this.parseError(e,t):this.state===l?e===l?this.state=z:this.parseError(e,t):this.state===c?e===c?this.mode===X?(this.key++,this.state=z):this.mode===U&&(this.state=V):e===u&&this.mode===X||e===a&&this.mode===U?this.pop():this.parseError(e,t):this.parseError(e,t)},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:18}],45:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],46:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],47:[function(e,t,n){(function(e){function n(e,t,n){function i(t){var n=v,r=g;return v=g=void 0,S=t,m=e.apply(r,n)}function o(e){return S=e,b=setTimeout(c,t),T?i(e):m}function u(e){var n=e-_,r=e-S,i=t-n;return k?x(i,y-r):i}function l(e){var n=e-_,r=e-S;return void 0===_||n>=t||n<0||k&&r>=y}function c(){var e=E();return l(e)?h(e):void(b=setTimeout(c,u(e)))}function h(e){return b=void 0,C&&v?i(e):(v=g=void 0,m)}function f(){void 0!==b&&clearTimeout(b),S=0,v=_=g=b=void 0}function d(){return void 0===b?m:h(E())}function p(){var e=E(),n=l(e);if(v=arguments,g=this,_=e,n){if(void 0===b)return o(_);if(k)return b=setTimeout(c,t),i(_)}return void 0===b&&(b=setTimeout(c,t)),m}var v,g,y,m,b,_,S=0,T=!1,k=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(T=!!n.leading,k="maxWait"in n,y=k?w(a(n.maxWait)||0,t):y,C="trailing"in n?!!n.trailing:C),p.cancel=f,p.flush=d,p}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&b.call(e)==l}function a(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=f.test(e);return n||d.test(e)?p(e.slice(2),n?2:8):h.test(e)?u:+e}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,y=v||g||Function("return this")(),m=Object.prototype,b=m.toString,w=Math.max,x=Math.min,E=function(){return y.Date.now()};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(this,e("_process"))},{_process:49}],49:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?v=p.concat(v):y=-1,v.length&&u())}function u(){if(!g){var e=o(s);g=!0;for(var t=v.length;t;){for(p=v,v=[];++y<t;)p&&p[y].run();y=-1,t=v.length}p=null,g=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var h,f,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var p,v=[],g=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new l(e,t)),1!==v.length||g||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],50:[function(t,n,r){(function(t){!function(i){function o(e){throw new RangeError(I[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(M,".");var i=e.split("."),o=a(i,t).join(".");return r+o}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?R(e/C):e>>1,e+=R(e/t);e>L*T>>1;r+=_)e=R(e/L);return R(r+(L+1)*e/(e+k))}function d(e){var t,n,r,i,a,s,u,h,d,p,v=[],g=e.length,y=0,m=A,b=P;for(n=e.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(a=y,s=1,u=_;i>=g&&o("invalid-input"),h=c(e.charCodeAt(i++)),(h>=_||h>R((E-y)/s))&&o("overflow"),y+=h*s,d=u<=b?S:u>=b+T?T:u-b,!(h<d);u+=_)p=_-d,s>R(E/p)&&o("overflow"),s*=p;t=v.length+1,b=f(y-a,t,0==a),R(y/t)>E-m&&o("overflow"),m+=R(y/t),y%=t,v.splice(y++,0,m)}return l(v)}function p(e){var t,n,r,i,a,s,l,c,d,p,v,g,y,m,b,w=[];for(e=u(e),g=e.length,t=A,n=0,a=P,s=0;s<g;++s)v=e[s],v<128&&w.push(B(v));for(r=i=w.length,i&&w.push(O);r<g;){for(l=E,s=0;s<g;++s)v=e[s],v>=t&&v<l&&(l=v);for(y=r+1,l-t>R((E-n)/y)&&o("overflow"),n+=(l-t)*y,t=l,s=0;s<g;++s)if(v=e[s],v<t&&++n>E&&o("overflow"),v==t){for(c=n,d=_;p=d<=a?S:d>=a+T?T:d-a,!(c<p);d+=_)b=c-p,m=_-p,w.push(B(h(p+b%m,0))),c=R(b/m);w.push(B(h(c,0))),a=f(n,y,r==i),n=0,++r}++n,++t}return w.join("")}function v(e){return s(e,function(e){return D.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return N.test(e)?"xn--"+p(e):e})}var y="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof t&&t;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var w,x,E=2147483647,_=36,S=1,T=26,k=38,C=700,P=72,A=128,O="-",D=/^xn--/,N=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=_-S,R=Math.floor,B=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:u,encode:l},decode:d,encode:p,toASCII:g,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(y&&m)if(n.exports==y)m.exports=w;else for(x in w)w.hasOwnProperty(x)&&(y[x]=w[x]);else i.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],51:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,d,p,v=e[c].replace(s,"%20"),g=v.indexOf(n);g>=0?(h=v.substr(0,g),f=v.substr(g+1)):(h=v,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],52:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],53:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":51,"./encode":52}],54:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":55}],55:[function(e,t,n){"use strict";function r(e){return this instanceof r?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var u=e("core-util-is");u.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");u.inherits(r,l);for(var h=s(c.prototype),f=0;f<h.length;f++){var d=h[f];r.prototype[d]||(r.prototype[d]=c.prototype[d])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},{"./_stream_readable":57,"./_stream_writable":59,"core-util-is":20,inherits:45,"process-nextick-args":48}],56:[function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":58,"core-util-is":20,inherits:45}],57:[function(e,t,n){(function(n,r){"use strict";function i(e){return B.from(e)}function o(e){return B.isBuffer(e)||e instanceof j}function a(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function s(t,n){M=M||e("./_stream_duplex"),t=t||{};var r=n instanceof M;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(o||0===o)?this.highWaterMark=o:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(V||(V=e("string_decoder/").StringDecoder),this.decoder=new V(t.encoding),this.encoding=t.encoding)}function u(t){return M=M||e("./_stream_duplex"),this instanceof u?(this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),void R.call(this)):new u(t)}function l(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,v(e,a);else{var s;o||(s=h(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===B.prototype||(t=i(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):m(e,a)):c(e,a,t,!1))):r||(a.reading=!1)}return f(a)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),m(e,t)}function h(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=Y?e=Y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N.nextTick(y,e):y(e))}function y(e){z("emit readable"),e.emit("readable"),S(e)}function m(e,t){t.readingMore||(t.readingMore=!0,N.nextTick(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,S(e))}}function x(e){z("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N.nextTick(_,e,t))}function _(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=k(e,t.buffer,t.decoder),n}function k(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?C(e,t):P(e,t),r}function C(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function P(e,t){var n=B.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,N.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var N=e("process-nextick-args");t.exports=u;var M,I=e("isarray");u.ReadableState=s;var L=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),R=e("./internal/streams/stream"),B=e("safe-buffer").Buffer,j=r.Uint8Array||function(){},q=e("core-util-is");q.inherits=e("inherits");var F=e("util"),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var V,U=e("./internal/streams/BufferList"),X=e("./internal/streams/destroy");q.inherits(u,R);var H=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=X.destroy,u.prototype._undestroy=X.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=B.from(e,t),t=""),n=!0),l(this,e,t,!1,n)},u.prototype.unshift=function(e){return l(this,e,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(t){return V||(V=e("string_decoder/").StringDecoder),this._readableState.decoder=new V(t),this._readableState.encoding=t,this};var Y=8388608;u.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):g(this),null;if(e=p(e,t),0===e&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,z("length less than watermark",r)),t.ended||t.reading?(r=!1,z("reading or ended",r)):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return i=e>0?T(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function r(e,t){z("onunpipe"),e===f&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",h),f.removeListener("data",s),y=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){z("ondata"),m=!1;var n=e.write(t);!1!==n||m||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&D(d.pipes,e)!==-1)&&!y&&(z("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,m=!0),f.pause())}function u(t){z("onerror",t),h(),e.removeListener("error",u),0===L(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),h()}function c(){z("onfinish"),e.removeListener("close",l),h()}function h(){z("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,z("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,v=p?i:h;d.endEmitted?N.nextTick(v):f.once("end",v),e.on("unpipe",r);var g=w(f);e.on("drain",g);var y=!1,m=!1;return f.on("data",s),a(e,"error",u),e.once("close",l),e.once("finish",c),e.emit("pipe",f),d.flowing||(z("pipe resume"),f.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=D(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):N.nextTick(x,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,E(this,e)),this},u.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(z("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(z("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<H.length;o++)e.on(H[o],this.emit.bind(this,H[o]));return this._read=function(t){z("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":55,"./internal/streams/BufferList":60,"./internal/streams/destroy":61,"./internal/streams/stream":62,_process:49,"core-util-is":20,events:23,inherits:45,isarray:63,"process-nextick-args":48,"safe-buffer":68,"string_decoder/":74,util:17}],58:[function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){return this instanceof i?(s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",o)):new i(e)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":55,"core-util-is":20,inherits:45}],59:[function(e,t,n){(function(n,r,i){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){C(t,e)}}function a(e){return I.from(e)}function s(e){return I.isBuffer(e)||e instanceof L}function u(){}function l(t,n){A=A||e("./_stream_duplex"),t=t||{};var r=n instanceof A;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(a||0===a)?this.highWaterMark=a:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=t.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(t){return A=A||e("./_stream_duplex"),B.call(c,this)||this instanceof A?(this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t["final"]&&(this._final=t["final"])),void M.call(this)):new c(t)}function h(e,t){var n=new Error("write after end");e.emit("error",n),P.nextTick(t,n)}function f(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),P.nextTick(r,o),i=!1),i}function d(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=I.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var a=d(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,r,i,o);return u}function v(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,n,r,i){--t.pendingcb,n?(P.nextTick(i,r),P.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(y(n),t)g(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?O(b,e,n,o,i):b(e,n,o,i)}}function b(e,t,n,r){n||w(e,t),t.pendingcb--,r(),T(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback,f=t.objectMode?1:l.length;if(v(e,t,!1,f,l,c,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,P.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function k(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?P.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function C(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var P=e("process-nextick-args");t.exports=c;var A,O=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:P.nextTick;c.WritableState=l;var D=e("core-util-is");D.inherits=e("inherits");var N={deprecate:e("util-deprecate")},M=e("./internal/streams/stream"),I=e("safe-buffer").Buffer,L=r.Uint8Array||function(){},R=e("./internal/streams/destroy");D.inherits(c,M),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var B;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||this===c&&(e&&e._writableState instanceof l)}})):B=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&s(e);return o&&!I.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?h(this,n):(o||f(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},c.prototype.cork=function(){var e=this._writableState;e.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||k(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=R.destroy,c.prototype._undestroy=R.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":55,"./internal/streams/destroy":61,"./internal/streams/stream":62,_process:49,"core-util-is":20,inherits:45,"process-nextick-args":48,"safe-buffer":68,timers:76,"util-deprecate":81}],60:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=e("safe-buffer").Buffer,a=e("util");t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":68,util:17}],61:[function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=e("process-nextick-args");t.exports={destroy:r,undestroy:i}},{"process-nextick-args":48}],62:[function(e,t,n){t.exports=e("events").EventEmitter},{events:23}],63:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],64:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":65}],65:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":55,"./lib/_stream_passthrough.js":56,"./lib/_stream_readable.js":57,"./lib/_stream_transform.js":58,"./lib/_stream_writable.js":59}],66:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":65}],67:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":59}],68:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:18}],69:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,o=e("inherits");o(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",r),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{events:23,inherits:45,"readable-stream/duplex.js":54,"readable-stream/passthrough.js":64,"readable-stream/readable.js":65,"readable-stream/transform.js":66,"readable-stream/writable.js":67}],70:[function(e,t,n){(function(t){var r=e("./lib/request"),i=e("./lib/response"),o=e("xtend"),a=e("builtin-status-codes"),s=e("url"),u=n;u.request=function(e,n){e="string"==typeof e?s.parse(e):o(e);var i=t.location.protocol.search(/^https?:$/)===-1?"http:":"",a=e.protocol||i,u=e.hostname||e.host,l=e.port,c=e.path||"/";u&&u.indexOf(":")!==-1&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(l?":"+l:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":72,"./lib/response":73,"builtin-status-codes":19,url:79,xtend:82}],71:[function(e,t,n){(function(e){function t(){if(void 0!==a)return a;if(e.XMLHttpRequest){a=new e.XMLHttpRequest;try{a.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(t){a=null}}else a=null;return a}function r(e){var n=t();if(!n)return!1;try{return n.responseType=e,n.responseType===e}catch(r){}return!1}function i(e){return"function"==typeof e}n.fetch=i(e.fetch)&&i(e.ReadableStream),n.writableStream=i(e.WritableStream),n.abortController=i(e.AbortController),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(o){}var a,s="undefined"!=typeof e.ArrayBuffer,u=s&&i(e.ArrayBuffer.prototype.slice);n.arraybuffer=n.fetch||s&&r("arraybuffer"),n.msstream=!n.fetch&&u&&r("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&s&&r("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!t()&&i(t().overrideMimeType),n.vbArray=i(e.VBArray),a=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(e,t,n){(function(n,r,i){function o(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(n){return!1}}var s=e("./capability"),u=e("inherits"),l=e("./response"),c=e("readable-stream"),h=e("to-arraybuffer"),f=l.IncomingMessage,d=l.readyStates,p=t.exports=function(e){
var t=this;c.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n,r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!s.abortController)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=o(n,r),t._fetchTimer=null,t.on("finish",function(){t._onFinish()})};u(p,c.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();v.indexOf(r)===-1&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,o=e._headers,a=null;"GET"!==t.method&&"HEAD"!==t.method&&(a=s.arraybuffer?h(i.concat(e._body)):s.blobConstructor?new r.Blob(e._body.map(function(e){return h(e)}),{type:(o["content-type"]||{}).value||""}):i.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,n=o[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode){var l=null;if(s.abortController){var c=new AbortController;l=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:l}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var f=e._xhr=new r.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick(function(){e.emit("error",p)})}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(f.timeout=t.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),u.forEach(function(e){f.setRequestHeader(e[0],e[1])}),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(a)}catch(p){return void n.nextTick(function(){e.emit("error",p)})}}}},p.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":71,"./response":73,_process:49,buffer:18,inherits:45,"readable-stream":65,"to-arraybuffer":77}],73:[function(e,t,n){(function(t,r,i){var o=e("./capability"),a=e("inherits"),s=e("readable-stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=n.IncomingMessage=function(e,n,a,u){function l(){d.read().then(function(e){if(!c._destroyed){if(e.done)return r.clearTimeout(u),void c.push(null);c.push(new i(e.value)),l()}})["catch"](function(e){r.clearTimeout(u),c._destroyed||c.emit("error",e)})}var c=this;if(s.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===a){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)}),o.writableStream){var h=new WritableStream({write:function(e){return new Promise(function(t,n){c._destroyed?n():c.push(new i(e))?t():c._resumeFetch=t})},close:function(){r.clearTimeout(u),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(h)["catch"](function(e){r.clearTimeout(u),c._destroyed||c.emit("error",e)})}catch(f){}}var d=n.body.getReader();l()}else{c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText;var p=e.getAllResponseHeaders().split(/\r?\n/);if(p.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(t[2])):void 0!==c.headers[n]?c.headers[n]+=", "+t[2]:c.headers[n]=t[2],c.rawHeaders.push(t[1],t[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var v=c.rawHeaders["mime-type"];if(v){var g=v.match(/;\s*charset=([^;])(;|$)/);g&&(c._charset=g[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(l,s.Readable),l.prototype._read=function(){var e=this,t=e._resumeFetch;t&&(e._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(o){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(o){e._mode="text:vbarray";break}if(n.length>e._pos){var a=n.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new i(a.length),l=0;l<a.length;l++)s[l]=255&a.charCodeAt(l);e.push(s)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":71,_process:49,buffer:18,inherits:45,"readable-stream":65}],74:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(m.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=f,this.end=d,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=p,this.end=v,t=3;break;default:return this.write=g,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=a(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=a(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function u(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,""}}function l(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function f(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}var m=e("safe-buffer").Buffer,b=m.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=h,o.prototype.text=c,o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":68}],75:[function(e,t,n){(function(r){function i(e,t,n){function i(){for(;l.length&&!h.paused;){var e=l.shift();if(null===e)return h.emit("end");h.emit("data",e)}}function a(){h.writable=!1,t.call(h),!h.readable&&h.autoDestroy&&h.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&n.autoDestroy===!1),h.write=function(t){return e.call(this,t),!h.paused},h.queue=h.push=function(e){return c?h:(null===e&&(c=!0),l.push(e),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(e){if(!s)return s=!0,arguments.length&&h.write(e),a(),h},h.destroy=function(){if(!u)return u=!0,s=!0,l.length=0,h.writable=h.readable=!1,h.emit("close"),h},h.pause=function(){if(!h.paused)return h.paused=!0,h},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=e("stream");n=t.exports=i,i.through=i}).call(this,e("_process"))},{_process:49,stream:69}],76:[function(e,t,n){(function(t,r){function i(e,t){this._id=e,this._clearFn=t}var o=e("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;n.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,r=!(arguments.length<2)&&s.call(arguments,1);return u[t]=!0,o(function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":49,timers:76}],77:[function(e,t,n){var r=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:18}],78:[function(t,n,r){(function(t){!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=i._,a=Array.prototype,s=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,c=a.slice,h=s.toString,f=s.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"==typeof r||r.nodeType?i._=y:("undefined"!=typeof n&&!n.nodeType&&n.exports&&(r=n.exports=y),r._=y),y.VERSION="1.9.1";var m,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return y.iteratee!==m?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=m=function(e,t){return w(e,t,1/0)};var x=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},E=function(e){if(!y.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&f.call(e,t)},T=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},k=Math.pow(2,53)-1,C=_("length"),P=function(e){var t=C(e);return"number"==typeof t&&t>=0&&t<=k};y.each=y.forEach=function(e,t,n){t=b(t,n);var r,i;if(P(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var A=function(e){var t=function(t,n,r,i){var o=!P(t)&&y.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var u=o?o[s]:s;r=n(r,t[u],u,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,b(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=A(1),y.reduceRight=y.foldr=A(-1),y.find=y.detect=function(e,t,n){var r=P(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&i!==-1)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=w(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return P(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=x(function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=T(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=P(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],null!=r&&r>o&&(o=r)}else t=w(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=P(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],null!=r&&r<o&&(o=r)}else t=w(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return P(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=P(e)?y.clone(e):y.values(e),i=C(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=y.random(a,o),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=w(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var O=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=w(r,i),y.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};y.groupBy=O(function(e,t,n){S(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=O(function(e,t,n){e[n]=t}),y.countBy=O(function(e,t,n){S(e,n)?e[n]++:e[n]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?c.call(e):y.isString(e)?e.match(D):P(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:P(e)?e.length:y.keys(e).length},y.partition=O(function(e,t,n){e[n?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var N=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,a=C(e);o<a;o++){var s=e[o];if(P(s)&&(y.isArray(s)||y.isArguments(s)))if(t)for(var u=0,l=s.length;u<l;)r[i++]=s[u++];else N(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r};y.flatten=function(e,t){return N(e,t,!1)},y.without=x(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=C(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t&&!n?(a&&o===l||i.push(u),o=l):n?y.contains(o,l)||(o.push(l),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=x(function(e){return y.uniq(N(e,!0,!0))}),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=C(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var a;for(a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},y.difference=x(function(e,t){return t=N(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,C).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=x(y.unzip),y.object=function(e,t){for(var n={},r=0,i=C(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var M=function(e){return function(t,n,r){n=w(n,r);for(var i=C(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=M(1),y.findLastIndex=M(-1),y.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),o=0,a=C(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o};var I=function(e,t,n){return function(r,i,o){var a=0,s=C(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(c.call(r,a,s),y.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=I(1,y.findIndex,y.sortedIndex),y.lastIndexOf=I(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(c.call(e,r,r+=t));return n};var L=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=E(e.prototype),a=e.apply(o,i);return y.isObject(a)?a:o};y.bind=x(function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=x(function(i){return L(e,r,t,this,n.concat(i))});return r}),y.partial=x(function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return L(e,r,this,this,a)};return r}),y.partial.placeholder=y,y.bindAll=x(function(e,t){t=N(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=y.bind(e[r],e)}}),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return S(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=x(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=n.leading===!1?0:y.now(),r=null,a=e.apply(i,o),r||(i=o=null)},l=function(){var l=y.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||n.trailing===!1||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=x(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=y.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=x;var R=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(e,t){var n=B.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||s,o="constructor";for(S(e,o)&&!y.contains(t,o)&&t.push(o);n--;)o=B[n],o in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)S(e,n)&&t.push(n);return R&&j(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return R&&j(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r=y.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var q=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}};y.extend=q(y.allKeys),y.extendOwn=y.assign=q(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r};var F=function(e,t,n){return t in n};y.pick=x(function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=b(r,t[1])),t=y.allKeys(e)):(r=F,t=N(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),y.omit=x(function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(N(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)}),y.defaults=q(y.allKeys,!0),y.create=function(e,t){var n=E(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var z,V;z=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&V(e,t,n,r)},V=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!z(e[l],t[l],n,r))return!1}else{var c,f=y.keys(e);if(l=f.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=f[l],!S(t,c)||!z(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return z(e,t)},y.isEmpty=function(e){return null==e||(P(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=d||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return S(e,"callee")});var U=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof U&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return S(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!f.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return i._=o,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return T(t,e)}:_(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?T(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=y.invert(X),Y=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=Y(X),y.unescape=Y(H),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var W=0;y.uniqueId=function(e){var t=++W+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\u2028|\u2029/g,$=function(e){return"\\"+K[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(Z,$),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var a;try{a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(e){return a.call(this,e,y)},l=t.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),Q(this,n.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},"function"==typeof e&&e.amd&&e("underscore",[],function(){return y})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}
function i(e,t,n){if(e&&l.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),l=e("./util");n.parse=i,n.resolve=a,n.resolveObject=s,n.format=o,n.Url=r;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(p),g=["%","/","?",";","#"].concat(v),y=["/","?","#"],m=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");r.prototype.parse=function(e,t,n){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var h=f.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=c.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===s.substr(0,2);!T||d&&E[d]||(s=s.substr(2),this.slashes=!0)}if(!E[d]&&(T||d&&!_[d])){for(var k=-1,C=0;C<y.length;C++){var P=s.indexOf(y[C]);P!==-1&&(k===-1||P<k)&&(k=P)}var A,O;O=k===-1?s.lastIndexOf("@"):s.lastIndexOf("@",k),O!==-1&&(A=s.slice(0,O),s=s.slice(O+1),this.auth=decodeURIComponent(A)),k=-1;for(var C=0;C<g.length;C++){var P=s.indexOf(g[C]);P!==-1&&(k===-1||P<k)&&(k=P)}k===-1&&(k=s.length),this.host=s.slice(0,k),s=s.slice(k),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var N=this.hostname.split(/\./),C=0,M=N.length;C<M;C++){var I=N[C];if(I&&!I.match(b)){for(var L="",R=0,B=I.length;R<B;R++)L+=I.charCodeAt(R)>127?"x":I[R];if(!L.match(b)){var j=N.slice(0,C),q=N.slice(C+1),F=I.match(w);F&&(j.push(F[1]),q.unshift(F[2])),q.length&&(s="/"+q.join(".")+s),this.hostname=j.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var z=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+z,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!x[p])for(var C=0,M=v.length;C<M;C++){var U=v[C];if(s.indexOf(U)!==-1){var X=encodeURIComponent(U);X===U&&(X=escape(U)),s=s.split(U).join(X)}}var H=s.indexOf("#");H!==-1&&(this.hash=s.substr(H),s=s.slice(0,H));var Y=s.indexOf("?");if(Y!==-1?(this.search=s.substr(Y),this.query=s.substr(Y+1),t&&(this.query=S.parse(this.query)),s=s.slice(0,Y)):t&&(this.search="",this.query={}),s&&(this.pathname=s),_[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",W=this.search||"";this.path=z+W}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var d=h[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=m||y||n.host&&e.pathname,w=b,x=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!_[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===x[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=x.shift();var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return n.search=e.search,n.query=e.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=x.slice(-1)[0],C=(n.host||e.host||x.length>1)&&("."===k||".."===k)||""===k,P=0,A=x.length;A>=0;A--)k=x[A],"."===k?x.splice(A,1):".."===k?(x.splice(A,1),P++):P&&(x.splice(A,1),P--);if(!b&&!w)for(;P--;P)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),C&&"/"!==x.join("/").substr(-1)&&x.push("");var O=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){n.hostname=n.host=O?"":x.length?x.shift():"";var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return b=b||n.host&&x.length,b&&!O&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":80,punycode:50,querystring:53}],80:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],81:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],82:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}],83:[function(e,t,n){t.exports='<body>\n  <div class="graph">\n    <div class="cy">\n      <div class="status loader"></div>\n    </div>\n    <div class="controls">\n      <div class="interactionFilter">\n        <div>Show the following interaction types:</div>\n        <div>\n          <button class="genetic">Genetic</button><button class="default selected">All</button><button class="physical">Physical</button>\n        </div>\n      </div>\n      <div class="secondaryControls">\n        <div class="reset">Reset&nbsp;view</div>\n        <div class="showTable">Show in table format</div>\n        <div class="export">Export&nbsp;graph\n          <div class="exportValues">\n            <select>\n              <option value="png">PNG</option>\n              <option value="jpg">JPG</option>\n              <option value="tsv">TSV</option>\n              <option value="csv" selected>CSV</option>\n            </select>\n            <button>Go!</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nodeDetails">\n    <h2 class="nodeTitle"></h2>\n    <dl class="nodeInfo intro">\n      <dt class="intro">Click on a gene to get more info about it.</dt>\n    </dl>\n  </div>\n  <div class="tableView firstRun disabled"></div>\n</body>\n'},{}],84:[function(e,t,n){t.exports='<dl class="child">\n  <dt>Type</dt>\n  <dd class="cym-type">{{=type}}</dd>\n  {{if (typeof roles !== "string") { }}\n    <dt>Roles</dt>\n    <dd class="roles">\n      <dl>\n        {{for (role in roles) { }}\n        <dt> {{= role}}</dt>\n        <dd> {{= roles[role] }} </dd>\n        {{ } }}\n      </dl>\n    </dd>\n  {{ } else { }}\n    <dt>Role</dt> <dd> {{=role1}} </dd>\n  {{ } }}\n  {{ if(dataSets.length == 1) { }}\n    <dt>Data set</dt>\n    <dd class="dataSets child">{{=dataSets[0].name}}</dd>\n  {{ } else if (dataSets.length > 1) { }}\n    <dt>Data sets</dt>\n    <dd>\n      <ul class="dataSets">\n        {{for (var i=0; i <dataSets.length; i++) { }}\n          <li> {{= dataSets[i].name }} </li>\n        {{ } }}\n      </ul>\n    </dd>\n  {{ } }}\n</dl>\n'},{}]},{},[6])(6)});